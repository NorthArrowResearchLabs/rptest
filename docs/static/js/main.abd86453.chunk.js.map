{"version":3,"sources":["components/controls/useNewImageMenu.jsx","lib/datelib.js","views/SeriesList/SeriesList.jsx","views/SeriesList/SeriesList.style.js","components/ContextMenu.jsx","lib/useComponentSize.js","components/maps/styles/index.js","components/maps/styles/StyleButtons.jsx","config.js","components/maps/BaseMap.jsx","components/maps/MapDot/MapDot.jsx","components/maps/MapDot/MapDot.style.js","components/controls/ExpandNote.jsx","components/TagChip.jsx","components/controls/useFormFieldState.jsx","components/controls/TextAreaControl.jsx","components/controls/TextFieldControl.jsx","lib/SeriesConfig.js","contexts.js","components/SeriesInfo/SeriesInfo.jsx","components/SeriesInfo/SeriesInfo.style.js","components/Photo/PhotoTags/PhotoTagChip.style.js","components/Photo/PhotoTags/XYTagChip.jsx","components/Photo/PhotoTags/XYTagSelect.jsx","components/Photo/PhotoTags/XYTagSelect.style.js","components/Photo/PhotoTags/XYTagChooser.jsx","components/Photo/PhotoTags/XYTagChooser.style.js","lib/Tags.js","components/Photo/PhotoTags/useTags.js","components/Photo/Photo.jsx","components/Photo/Photo.style.js","components/SwipeShow/SwipeShow.jsx","components/SwipeShow/SwipeShow.style.js","components/dialogs/DeleteDialog.jsx","components/PhotoGrid/PhotoGrid.jsx","components/PhotoGrid/PhotoGrid.style.js","views/SeriesView/SeriesView.jsx","views/SeriesView/SeriesView.style.js","views/SeriesEdit/SeriesEdit.jsx","views/SeriesEdit/SeriesEdit.style.js","views/Slideshow/Slideshow.jsx","views/Slideshow/Slideshow.style.js","components/controls/TagControl.jsx","components/controls/TagControl.style.js","components/controls/DateControl.jsx","components/PhotoInfo/PhotoInfo.jsx","components/PhotoInfo/PhotoInfo.style.js","views/PhotoViewTool/PhotoViewTool.jsx","views/PhotoViewTool/PhotoViewTool.style.js","lib/Photo.js","lib/Series.js","components/controls/PhotoFadeSlider.jsx","views/PhotoReviewTool/PhotoReviewTool.jsx","views/PhotoReviewTool/PhotoReviewTool.style.js","lib/useCamera.js","views/CameraTool/CameraTool.jsx","views/CameraTool/CameraTool.style.js","components/NewPhotoInfo/NewPhotoInfo.jsx","components/NewPhotoInfo/NewPhotoInfo.style.js","lib/useFileInput.js","NewPhoto.jsx","lib/sensors.js","RepeatablePhotos.jsx","TestApp/seriesConfig.js","TestApp/db.js","TestApp/TestApp.jsx","TestApp/TestApp.style.js","serviceWorker.js","index.js"],"names":["useNewImageMenu","cameraClick","libraryClick","_useState","useState","_useState2","Object","slicedToArray","menuEl","setMenuEl","_useState3","_useState4","series","setSeries","_useState5","_useState6","down","setDown","downRef","useRef","current","onDownThunk","e","el","currentTarget","setTimeout","onUpThunk","onBlock","stopPropagation","preventDefault","menu","react_default","a","createElement","CameraPopup","onCamera","onLibrary","onClose","withStyles","theme","root","_ref","classes","index_es","id","anchorEl","open","Boolean","className","onMouseUp","onTouchEnd","icons_index_es","formatDate","utctimestamp","format","arguments","length","undefined","moment","display","flexWrap","justifyContent","overflow","backgroundColor","palette","background","paper","fab","position","top","right","height","spacing","unit","width","fab2","left","seriesList","allowEdit","tileClick","columns","_useNewImageMenu","cols","cellHeight","map","seriesItem","idx","sortedPhotos","toConsumableArray","photos","sort","b","parseInt","date","photo","key","concat","onClick","src","url","base64","alt","name","onMouseDown","onTouchStart","color","title","subtitle","ContextMenu","menuItems","item","action","text","require","useCallback","useLayoutEffect","getSize","offsetWidth","offsetHeight","useComponentSize","ref","ComponentSize","setComponentSize","handleResize","ResizeObserver","resizeObserver","observe","disconnect","window","addEventListener","removeEventListener","maps_styles","toolTip","Icon","SatelliteOutlined","ActiveIcon","SatIcon","style","Satellite","TerrainOutlined","Terrain","TopoMap","DirectionsCarOutlined","DirectionsCar","BasicMap","zIndex","iconButton","margin","padding","border","borderRadius","fontSize","active","secondary","dark","icon","currStyle","mapStyles","setCurrStyle","_ref2","classNames","activeIcon","config","mapBoxToken","process","tagColors","BaseMap","props","_useMap","useMap","_useMap2","viewport","onViewportChange","mapRef","size","children","onMapDataEvent","stylechooser","esm","assign","mapStyle","onData","objectSpread","mapboxApiAccessToken","styles_StyleButtons","hideNavControls","showZoom","lockZoom","showCompass","lockRotation","Array","isArray","c","handleChild","child","defaultProps","zoom","latitude","longitude","maxZoom","minZoom","MapStyles","lockToBounds","lockPan","maxBounds","incomingOnViewportChange","zoomBounds","pitch","minPitch","maxPitch","bearing","setViewport","useEffect","newViewport","mapWrapper","svgDot","transformOrigin","transform","svgArc","editable","onChange","direction","objectWithoutProperties","components_maps_BaseMap","version","viewBox","cx","cy","r","stroke","strokeWidth","fill","d","fillOpacity","strokeOpacity","ExpandNote","expandNote","setExpandNote","variant","maxHeight","minHeight","expanded","whiteSpace","paddingBottom","transition","transitions","create","easing","easeInOut","duration","complex","&::before","content","bottom","opacity","tagChips","marginRight","marginTop","deleteIcon","chipAvatar","reduce","acc","tagCol","defineProperty","getContrastText","edit","tag","group","onDelete","label","data","headerStyle","fieldTitle","flexGrow","& svg","editButton","grey","cancelButton","error","main","marginLeft","useFormFieldState","defaultValue","onChangeExt","permaEdit","editing","setEditing","value","_onChange","val","onSave","onReset","onCancel","Header","checkButton","PropTypes","oneOfType","arrayOf","node","isRequired","TextAreaControl","collapsed","hint","collapsedHeight","_useFormFieldState","renderText","textRender","controls_ExpandNote","rootEdit","multiline","fullWidth","rows","rowsMax","textField","target","textBody","paddingLeft","paddingRight","& textarea","placeholder","TYPES","SeriesConfig","seriesConfig","_this","this","classCallCheck","getTagType","typeId","tags","find","tt","getTagTypeIndex","console","log","findIndex","getXYTagTypes","filter","isXY","getNonXYTagTypes","getSeriesMeta","keys","meta","type","default","getPhotoMeta","React","createContext","field","marginBottom","list","heading","tagListItem","chip","useContext","seriesConfigInst","SeriesConfigClass","newTags","forEach","existing","count","controls_TextFieldControl","controls_TextAreaControl","note","disableGutters","primary","tagKey","idtk","subheading","values","components_TagChip","render","xyTagChip","cursor","reversedChip","flexDirection","chipAvatarIcon","reversedDelete","chipBucket","reversedChipBucket","newSize","onTagDragOver","onTagDragStop","onNewTag","onTagDelete","isReversed","relCoords","x","newWidth","stopBadness","react_draggable_default","disabled","bounds","newHeight","y","onDrag","onStop","avatar","noOptionsMessage","singleValue","input","valueContainer","flex","alignItems","tagConfig","options","tc","allowAdditions","react_select_esm","components","Control","Menu","NoOptionsMessage","Option","Placeholder","ValueContainer","onBlur","blurInputOnSelect","isClearable","isSearchable","Creatable_default","InputProps","inputComponent","inputProps","selectProps","inputRef","innerRef","innerProps","textFieldProps","_ref3","square","_ref4","_ref5","isFocused","isSelected","buttonRef","selected","component","fontWeight","_ref6","header","listItem","dlgBody","coords","xyTags","t","scroll","paperScrollPaper","aria-labelledby","tagType","PhotoTags_XYTagSelect","Tags","findTagById","tagId","getXYTags","xyTagIds","indexOf","getNonXYTags","NonXYTagIds","createNewTagObj","uuid","createExistingTagObj","createNewXYTagObj","createExistingXYTagObj","getRelXYTags","multiplier","useTags","isDragging","setIsDragging","newTagDialog","setNewTagDialog","tagClass","addTag","__isNew__","updateTagLocation","oldTag","newX","newY","onAddTagTrigger","pageX","innerWidth","pageY","innerHeight","TagChooser","PhotoTags_XYTagChooser","inner","img","formControl","showTags","refImgWrap","setNewSize","_useComponentSize","_useTags","PhotoTags_XYTagChip","onLoad","event","_event$target","naturalHeight","naturalWidth","Math","min","SwipeShow","onImageSelect","activePhoto","setActivePhoto","setShowTags","singular","lib_default","axis","index","onChangeIndex","enableMouseEvents","photoWrapper","components_Photo_Photo","manualBack","manualForward","actionIcon","Fragment","tagButton","badgeContent","steps","activeStep","mobileStepper","dots","isFullScreen","slides","dateCaption","textAlign","withTheme","message","onConfirm","disableBackdropClick","disableEscapeKeyDown","maxWidth","PhotoGrid","multiSelect","onTileClick","selectMode","setSelectMode","selectedItems","setSelectedItems","deleteConfirm","setDeleteConfirm","handleCancelSelection","toggleListItem","remaining","arrId","handlePhotoTap","tile","unSelectedTile","selectedTile","aria-label","addFab","handleAddToSelection","autoHideDuration","ContentProps","aria-describedby","snackbarContent","snackbar","dialogs_DeleteDialog","confirmation","& img","appBar","overflowY","-webkit-overflow-scrolling","tabMenu","mapWrap","grow","gridList","titleBar","titleText","menuButton","onSlideshowStart","onEditSeries","onDeletePhotos","onCameraAdd","onDeleteSeries","onLibraryAdd","onMenuBack","contextEl","setContextEl","listTypeTab","setListTypeTab","addPhotoButton","startSlideshowButton","aria-haspopup","components_ContextMenu","components_SwipeShow_SwipeShow","components_SeriesInfo_SeriesInfo","components_PhotoGrid_PhotoGrid","maps_MapDot_MapDot","location","overflowX","form","slider","formLabel","minWidth","chips","rotation","setRotation","onChangeFormState","elevation","noValidate","autoComplete","mapFormLabel","Slider_default","container","max","step","dir","newDir","onRotationChange","Slideshow","_useStepper","useStepper","lastStep","handleForward","handleBack","paused","pause","play","showXYTags","setShowXYTags","slideContainer","slide","last","labelBadge","titlePosition","dotActive","nextButton","backButton","swipeAble","tagContainer","tagChip","num","interval","setActiveStep","setPaused","_useState7","_useState8","timer","setTimer","_useState9","_useState10","setLastStep","createTimer","newTimer","setInterval","oldStep","destroyTimer","clearInterval","actionButtons","onSelectChange","inputValue","removedValue","option","newVal","tcv","newCreateVal","v","SingleValue","removeProps","MultiValue","tagValues","selectOptions","remainingTags","isMulti","_ref7","_ref8","_ref9","disableField","isoStr","Date","dlgTitleContainer","dlgTitle","paddingTop","onChangeLocal","fieldName","tagInst","TagClass","fullScreen","disableTypography","controls_DateControl","controls_TagControl","STATES","tipChip","activeButton","onUpdatePhoto","newPhoto","tempPhoto","setTempPhoto","mode","setMode","tagsClass","changeMode","desired","onCommitTags","infoButton","infoWindow","components_PhotoInfo_PhotoInfo","Photo","setMeta","featured","jsDate","utc","rawData","Series","newSeries","PhotoFadeSlider","setSlider","sliderLabel","track","thumb","vertical","capturedContainer","referenceContainer","captured","reference","referenceTextContainer","newText","textShadow","refText","defaultRefPhotoId","onRetry","newRefPhoto","p","refPhoto","controls_PhotoFadeSlider","Webcam","webcamElement","canvasElement","protocol","hostname","warn","navigator","mediaDevices","getUserMedia","aspectRatio","Promise","resolve","reject","audio","video","facingMode","then","mediaStream","srcObject","URL","createObjectURL","onloadedmetadata","catch","err","Error","imageWidth","videoWidth","imageHeight","videoHeight","context","getContext","drawImage","_this2","_this$_drawImage","_drawImage","toBlob","blob","quality","_this$_drawImage2","toDataURL","cameraErrorText","disabledFab","cameraFab","@media (orientation: landscape)","@media (orientation: portrait)","cameraIcon","cancelFab","cancelIcon","swipeDrawer","libraryFab","myLocationFab","myLocationIcon","onShutter","setRefPhoto","drawerOpen","setDrawerOpen","_useCamera","onCapture","webcam","setWebcam","cameraError","setCameraError","initCamera","document","getElementById","setup","captureImage","asyncToGenerator","regenerator_default","mark","_callee","capturedData","wrap","_context","prev","next","takeBase64Photo","stop","apply","delayedOrientationChange","useCamera","autoPlay","playsInline","muted","buttonFab","libraryIcon","anchor","paperAnchorLeft","onOpen","tabIndex","swipeDrawerContainer","role","onKeyDown","isNewSeries","onChangeLocalSeries","useFileInput","fileInput","handleChange","evt","file","files","reader","FileReader","onload","result","readAsDataURL","click","MODES","NewPhoto","inputMethod","onCreate","setNewPhoto","SeriesClass","setNewSeries","photoRefId","setPhotoRefId","history","_changeMode","orientation","absolute","alpha","beta","gamma","deviceOrientation","setDeviceOrientation","handleDeviceOrientation","useDeviceOrientation","geo","watchId","accuracy","altitude","altitudeAccuracy","speed","timestamp","now","state","setState","mounted","onEvent","geolocation","getCurrentPosition","watchPosition","clearWatch","useGeolocation","fileClick","exif","DateTimeOriginal","PhotoClass","loc","_newPhoto$rawData$geo","geolocate","newModeName","views_CameraTool_CameraTool","refId","_newPhoto$rawData$geo2","orient","views_PhotoReviewTool_PhotoReviewTool","oldHistory","oldMode","pop","components_NewPhotoInfo_NewPhotoInfo","VIEW_ONLY_MODES","RepeatablePhotos","modeName","inputMethodINIT","onNewSeries","pid","sp","newPid","newInputMethod","from","to","lastMode","views_SeriesView_SeriesView","photoIdArr","views_SeriesEdit_SeriesEdit","views_PhotoViewTool_PhotoViewTool","views_Slideshow_Slideshow","src_NewPhoto","contexts_SeriesConfig","Provider","canEdit","TestApp_seriesConfig","project","reach","user","STORENAME","dbPromise","openDb","upgradeDB","store","createObjectStore","put","_x","TestApp_db","reload","_reload","_callee3","db","tx","_context3","sent","transaction","_callee2","_context2","objectStore","_x2","get","_get","_callee4","_context4","abrupt","_x3","getAll","_getAll","_callee5","_context5","set","_set","_callee6","_context6","complete","_x4","_x5","delete","_delete2","_callee7","_context7","_x6","clear","_clear","_callee8","_context8","_keys","_callee9","_context9","getAllKeys","photoBar","projMockup","currSeriesList","setSeriesList","aboutOpen","setAboutOpen","setAllowEdit","settingsOpen","setSettingsOpen","rpState","setStartState","dumpData","JSON","stringify","fetchData","src_RepeatablePhotos","s","paragraph","views_SeriesList_SeriesList","selectedSeries","control","checked","labelPlacement","button","isLocalhost","match","registerValidSW","swUrl","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","deferredPrompt","addToHomeScreen","querySelector","prompt","userChoice","choiceResult","outcome","ReactDOM","src_TestApp_TestApp","href","origin","fetch","response","contentType","headers","status","ready","unregister","checkValidServiceWorker","a2hsBtn","showAddToHomeScreen","userAgent","toLowerCase","test","isIos","standalone"],"mappings":"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","file":"static/js/main.abd86453.chunk.js","sourcesContent":["import React, { useState, useRef } from 'react'\nimport PropTypes from 'prop-types'\nimport {\n  Menu,\n  MenuItem\n} from '@material-ui/core'\nimport {\n  AddAPhoto as AddCameraIcon,\n  PhotoLibrary as PhotoLibraryIcon\n} from '@material-ui/icons'\nimport { withStyles } from '@material-ui/core/styles'\n\nconst useNewImageMenu = (cameraClick, libraryClick) => {\n  const [menuEl, setMenuEl] = useState(null)\n  const [series, setSeries] = useState(null)\n  const [down, setDown] = useState(false)\n  const downRef = useRef(down)\n  downRef.current = down\n\n  const startTimer = (el) => {\n    setDown(true)\n    setTimeout(() => {\n      if (downRef && downRef.current) setMenuEl(el)\n    }, 300)\n  }\n\n  const onDownThunk = series => (e) => {\n    // console.log('onDown', e.currentTarget)\n    setSeries(series)\n    startTimer(e.currentTarget)\n  }\n\n  const onUpThunk = series => (e) => {\n    // console.log('onUp', e.currentTarget)\n    setSeries(series)\n    setDown(false)\n    cameraClick(series)\n  }\n\n  const onCamera = (e) => {\n    // console.log('onCamera', e.currentTarget)\n    e.stopPropagation()\n    e.preventDefault()\n    cameraClick(series)\n    setMenuEl(null)\n  }\n\n  const onLibrary = (e) => {\n    // console.log('onLibrary', e.currentTarget)\n    e.stopPropagation()\n    e.preventDefault()\n    libraryClick(series)\n    setMenuEl(null)\n  }\n\n  const onClose = (e) => {\n    // console.log('Close Menu', e.currentTarget)\n    e.stopPropagation()\n    e.preventDefault()\n    setMenuEl(null)\n  }\n\n  const onBlock = (e) => {\n    // console.log('Block', e.currentTarget)\n    e.stopPropagation()\n    e.preventDefault()\n  }\n\n  return {\n    onDownThunk,\n    onUpThunk,\n    onBlock,\n    menu: (\n      <CameraPopup {...{ menuEl, onCamera, onLibrary, onClose }} />\n    )\n  }\n}\n\nexport default useNewImageMenu\n\nconst CameraPopupUnstyled = ({ classes, menuEl, onCamera, onLibrary, onClose }) => (\n  <Menu\n    id='simple-menu'\n    anchorEl={menuEl}\n    open={Boolean(menuEl)}\n    className={classes.root}\n    onClose={onClose}\n  >\n    <MenuItem onMouseUp={onCamera} onTouchEnd={onCamera}>\n      <AddCameraIcon />Add from camera\n    </MenuItem>\n    <MenuItem onMouseUp={onLibrary} onTouchEnd={onLibrary}>\n      <PhotoLibraryIcon /> Add from Library\n    </MenuItem>\n  </Menu>\n)\n\nCameraPopupUnstyled.propTypes = {\n  classes: PropTypes.object.isRequired,\n  menuEl: PropTypes.object,\n  onCamera: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired,\n  onLibrary: PropTypes.func.isRequired\n}\n\nconst style = theme => ({\n  root: {\n\n  }\n})\n\nexport const CameraPopup = withStyles(style)(CameraPopupUnstyled)\n","import Faker from 'faker'\nimport moment from 'moment'\n\n/**\n * get a fake past date as a unix millisecond utc timestamp\n */\nexport const fakePastDate = () => {\n  return moment.utc(Faker.date.past()).format('x')\n}\n\n/**\n * Takes a UTC unix timestamp integer or string (milliseconds)\n * and a valid moment format string and returns a formatted\n * date string\n * @param {*} utctimestamp\n * @param {*} format\n */\nexport const formatDate = (utctimestamp, format = 'LLLL') => {\n  return moment(utctimestamp, 'x')\n    .format(format)\n}\n\n/**\n * Takes a UTC timestamp and returns a moment object in LOCAL mode\n * @param {*} utctimestamp\n */\nexport const parseDate = (utctimestamp) => {\n  return moment(utctimestamp, 'x')\n}\n\n/**\n * This returns the object in LOCAL mode\n * @param {*} jsDate\n */\nexport const convertJSDatetoTimestamp = (jsDate) => {\n  return moment\n    .utc(jsDate)\n    .format('x')\n}\n\nexport function timestampToHTML5Input (utctimestamp) {\n  // // trim the Z and milliseconds + seconds\n  return moment(utctimestamp, 'x').format('YYYY-MM-DDTkk:mm')\n}\n\nexport function HTML5InputToTimestamp (isoStr) {\n  return moment(new Date(isoStr), 'YYYY-MM-DDTkk:mm').format('x')\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport {\n  GridList,\n  GridListTile,\n  GridListTileBar,\n  Fab\n} from '@material-ui/core'\nimport {\n  AddAPhoto as AddCameraIcon\n} from '@material-ui/icons'\nimport { withStyles } from '@material-ui/core/styles'\nimport useNewImageMenu from '../../components/controls/useNewImageMenu'\nimport style from './SeriesList.style'\nimport { formatDate } from '../../lib/datelib'\n\nconst SeriesList = ({ classes, seriesList, allowEdit, tileClick, cameraClick, columns, libraryClick }) => {\n  const { onDownThunk, onUpThunk, onBlock, menu } = useNewImageMenu(\n    cameraClick,\n    libraryClick\n  )\n\n  return (\n    <GridList cols={columns || 1} cellHeight={200} className={classes.root}>\n      {seriesList.map((seriesItem, idx) => {\n        // const photo = seriesItem.photos.find(photo => photo.featured === true)\n        const sortedPhotos = [...seriesItem.photos]\n        sortedPhotos.sort((a, b) => parseInt(b.date, 10) - parseInt(a.date, 10))\n        const photo = sortedPhotos[0]\n        return (\n          <GridListTile key={`gridTile${idx}`} onClick={() => tileClick(seriesItem)}>\n            {photo && (\n              <img\n                src={photo.url || photo.base64}\n                alt={seriesItem.name}\n              />\n            )}\n            {allowEdit && (\n              <Fab\n                onClick={onBlock}\n                onMouseDown={onDownThunk(seriesItem)}\n                onMouseUp={onUpThunk(seriesItem)}\n                onTouchStart={onDownThunk(seriesItem)}\n                onTouchEnd={onUpThunk(seriesItem)}\n                color='secondary'\n                className={classes.fab}\n              >\n                <AddCameraIcon />\n              </Fab>\n            )}\n            {menu}\n            <GridListTileBar\n              title={seriesItem.name}\n              subtitle={<span>{seriesItem.photos.length} photos <strong>Last Photo</strong>: {formatDate(seriesItem.photos[0].date, 'llll')}</span>}\n            />\n          </GridListTile>\n        )\n      })}\n    </GridList>\n  )\n}\n\nSeriesList.propTypes = {\n  classes: PropTypes.object.isRequired,\n  seriesList: PropTypes.array.isRequired,\n  columns: PropTypes.number,\n  allowEdit: PropTypes.bool,\n  tileClick: PropTypes.func.isRequired,\n  cameraClick: PropTypes.func.isRequired,\n  libraryClick: PropTypes.func.isRequired\n}\n\nexport default withStyles(style)(SeriesList)\n","export default theme => ({\n  root: {\n    display: 'flex',\n    flexWrap: 'wrap',\n    justifyContent: 'space-around',\n    overflow: 'hidden',\n    backgroundColor: theme.palette.background.paper\n  },\n  fab: {\n    position: 'absolute',\n    top: 10,\n    right: 10,\n    height: theme.spacing.unit * 5,\n    width: theme.spacing.unit * 5\n    // color: 'rgba(255, 255, 255, 1.0)'\n  },\n  fab2: {\n    position: 'absolute',\n    top: 10,\n    left: 10,\n    height: theme.spacing.unit * 5,\n    width: theme.spacing.unit * 5\n    // color: 'rgba(255, 255, 255, 1.0)'\n  }\n})\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Menu, MenuItem } from '@material-ui/core'\n// import { Menu as MenuIcon } from '@material-ui/icons'\n\nconst ContextMenu = ({ anchorEl, onClose, menuItems }) => (\n  <Menu\n    anchorEl={anchorEl}\n    open={!!anchorEl}\n    onClose={onClose}\n  >\n    {menuItems.map((item, idx) => (\n      <MenuItem\n        key={`contextMenu-${idx}`}\n        onClick={() => {\n          onClose()\n          item.action()\n        }}>\n        {item.text}\n      </MenuItem>\n    ))}\n  </Menu>\n)\n\nContextMenu.propTypes = {\n  anchorEl: PropTypes.object,\n  onClose: PropTypes.func,\n  menuItems: PropTypes.array\n}\n\nexport default ContextMenu\n","let { useCallback, useState, useLayoutEffect } = require('react')\n\nconst getSize = el => ({\n  width: !el ? 0 : el.offsetWidth,\n  height: !el ? 0 : el.offsetHeight\n})\n\nconst useComponentSize = ref => {\n  let [ComponentSize, setComponentSize] = useState(\n    getSize(ref ? ref.current : {})\n  )\n\n  const handleResize = useCallback(() => {\n    if (ref.current) setComponentSize(getSize(ref.current))\n  }, [ref])\n\n  useLayoutEffect(() => {\n    if (!ref.current) return\n\n    handleResize()\n\n    if (typeof ResizeObserver === 'function') {\n      let resizeObserver = new ResizeObserver(() => handleResize())\n      resizeObserver.observe(ref.current)\n\n      return () => {\n        resizeObserver.disconnect(ref.current)\n        resizeObserver = null\n      }\n    }\n    else {\n      window.addEventListener('resize', handleResize)\n\n      return () => {\n        window.removeEventListener('resize', handleResize)\n      }\n    }\n  },\n  [ref.current])\n\n  return ComponentSize\n}\n\nexport default useComponentSize\n","import Satellite from './Satellite.json'\nimport BasicMap from './BasicMap.json'\nimport TopoMap from './TopoMap.json'\nimport {\n  Satellite as SatIcon,\n  SatelliteOutlined,\n  DirectionsCar,\n  DirectionsCarOutlined,\n  Terrain,\n  TerrainOutlined\n} from '@material-ui/icons'\n\nexport default [\n  {\n    toolTip: 'Aerial Map',\n    Icon: SatelliteOutlined,\n    ActiveIcon: SatIcon,\n    color: 'green',\n    style: Satellite\n  },\n  {\n    toolTip: 'Topo Map',\n    Icon: TerrainOutlined,\n    ActiveIcon: Terrain,\n    color: 'blue',\n    style: TopoMap\n  },\n  {\n    toolTip: 'Road Map',\n    Icon: DirectionsCarOutlined,\n    ActiveIcon: DirectionsCar,\n    color: 'blue',\n    style: BasicMap\n  }\n]\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\nimport { IconButton } from '@material-ui/core'\nimport { withStyles } from '@material-ui/core/styles'\n\nconst style = theme => ({\n  root: {\n    zIndex: 10,\n    top: theme.spacing.unit,\n    right: theme.spacing.unit,\n    position: 'absolute'\n  },\n  iconButton: {\n    // background: theme.palette.primary.dark,\n    // color: theme.palette.primary.light,\n    margin: theme.spacing.unit / 2,\n    padding: theme.spacing.unit / 2,\n    border: '2px solid',\n    borderRadius: theme.spacing.unit,\n    fontSize: 20\n  },\n  active: {\n    background: theme.palette.secondary.dark,\n    color: 'white'\n  },\n  icon: {\n\n  }\n})\n\nconst StyleButtons = ({ classes, currStyle, mapStyles, setCurrStyle }) => (\n  <div className={classes.root}>\n    {\n      mapStyles.map(({ Icon, ActiveIcon }, idx) => {\n        return <IconButton key={`stylebutton${idx}`}\n          className={classNames(classes.iconButton, idx === currStyle && classes.active)}\n          onClick={() => setCurrStyle(idx)}>\n          {idx === currStyle\n            ? <ActiveIcon className={classes.icon} />\n            : <Icon className={classes.activeIcon} />\n          }\n        </IconButton>\n      })\n    }\n\n  </div>\n)\n\nStyleButtons.propTypes = {\n  classes: PropTypes.object.isRequired,\n  currStyle: PropTypes.number,\n  mapStyles: PropTypes.array,\n  setCurrStyle: PropTypes.func\n}\n\nexport default withStyles(style)(StyleButtons)\n","export default {\n  mapBoxToken: process.env.REACT_APP_MAPBOX_TOKEN,\n  // Bright Pastel\n  tagColors: [\n    '#418CF0', '#FCB441', '#E0400A', '#056492', '#BFBFBF', '#1A3B69', '#FFE382', '#129CDD', '#CA6B4B',\n    '#005CDB', '#F3D288', '#506381', '#F1B9A8', '#E0830A', '#7893BE'\n  ]\n}\n","import React, { useState, useEffect, useRef } from 'react'\nimport ReactMapGL, { NavigationControl } from 'react-map-gl'\nimport PropTypes from 'prop-types'\n// import WebMercatorViewport from 'viewport-mercator-project'\nimport useComponentSize from '../../lib/useComponentSize'\nimport MapStyles from './styles'\nimport StyleButtons from './styles/StyleButtons'\nimport config from '../../config'\nimport classNames from 'classnames'\nimport 'mapbox-gl/dist/mapbox-gl.css'\nimport './BaseMap.css'\n\n/**\n * Note that this component technically has state but it is designed to be functionally stateless\n */\nconst BaseMap = (props) => {\n  const [viewport, currStyle, setCurrStyle, onViewportChange] = useMap(props)\n  const mapRef = useRef(null)\n  const size = useComponentSize(mapRef)\n  const {\n    children, mapStyles,\n    onMapDataEvent,\n    stylechooser\n  } = props\n\n  return (\n    <div className={classNames('BaseMap', props.className)} ref={mapRef} style={{ height: '100%', width: '100%' }}>\n      <ReactMapGL\n        {...viewport}\n        height={size.height}\n        width={size.width}\n        mapStyle={mapStyles[currStyle].style}\n        onData={onMapDataEvent}\n        onViewportChange={viewport => onViewportChange({ ...viewport, ...size })}\n        mapboxApiAccessToken={config.mapBoxToken} >\n        { stylechooser ? <StyleButtons currStyle={currStyle} mapStyles={mapStyles} setCurrStyle={setCurrStyle} /> : null }\n        {/* Augment children with some props they need to survive in this harsh world */}\n        { !props.hideNavControls && <NavigationControl onViewportChange={viewport => onViewportChange({ ...viewport, ...size })} showZoom={!props.lockZoom} showCompass={!props.lockRotation} /> }\n        {\n          children && Array.isArray(children)\n            ? children.map(c => handleChild(c, viewport, size.height, size.width))\n            : handleChild(children, viewport, size.height, size.width)\n        }\n      </ReactMapGL>\n    </div>\n  )\n}\n\nfunction handleChild (child, viewport, height, width) {\n  return typeof child === 'function'\n    ? child(viewport, height, width)\n    : child\n}\n\nBaseMap.propTypes = {\n  // Anything else we want to add to the map\n  children: PropTypes.any,\n  deckelements: PropTypes.array,\n  data: PropTypes.array,\n\n  // Some switches to make things easier\n  stylechooser: PropTypes.bool,\n  lockPan: PropTypes.bool,\n  lockRotation: PropTypes.bool,\n  lockZoom: PropTypes.bool,\n  lockToBounds: PropTypes.bool,\n  hideNavControls: PropTypes.bool,\n\n  minPitch: PropTypes.number,\n  maxPitch: PropTypes.number,\n  pitch: PropTypes.number,\n\n  maxBounds: PropTypes.array,\n  zoomBounds: PropTypes.array,\n  InnerBounds: PropTypes.array,\n\n  mapStyles: PropTypes.array,\n\n  // Just some default props we probably won't set.\n  latitude: PropTypes.number,\n  longitude: PropTypes.number,\n  zoom: PropTypes.number,\n\n  onMapDataEvent: PropTypes.func,\n  onViewportChange: PropTypes.func\n\n  // We get these props from calculating the window size at a higher level\n  // size: PropTypes.shape({\n  //   width: PropTypes.number.isRequired,\n  //   height: PropTypes.number.isRequired\n  // })\n}\nBaseMap.defaultProps = {\n  stylechooser: true,\n  zoom: 12,\n  latitude: 49.3050394,\n  longitude: -123.1398254,\n  maxZoom: 18,\n  minZoom: 1,\n  mapStyles: MapStyles,\n  lockToBounds: true\n}\n\nexport default BaseMap\n\nconst useMap = ({\n  lockToBounds, lockPan, lockZoom, lockRotation, maxBounds, latitude, longitude, zoomBounds,\n  onViewportChange: incomingOnViewportChange,\n  zoom, pitch, minPitch, maxPitch, bearing, size\n}) => {\n  const [currStyle, setCurrStyle] = useState(0)\n  const [viewport, setViewport] = useState({\n    latitude: maxBounds ? (maxBounds[1] + maxBounds[3]) / 2 : latitude,\n    longitude: maxBounds ? (maxBounds[0] + maxBounds[2]) / 2 : longitude,\n    zoom: zoom,\n    minPitch: minPitch,\n    maxPitch: maxPitch,\n    bearing: bearing || 0,\n    pitch: pitch || 0\n  })\n\n  // const recalcZoomBounds = () => {\n  //   // On the first run we're going to try to center the bounds.\n  //   const { width, height } = size\n  //   const [minlng, minlat, maxlng, maxlat] = maxBounds\n\n  //   try {\n  //     const wmview = new WebMercatorViewport({ width: width > 0 ? width : size.width, height: height > 0 ? height : size.height })\n  //     console.log('before boundschange', { wmview, bds: [ [minlng, minlat], [maxlng, maxlat] ] })\n  //     const fittedBounds = wmview.fitBounds(\n  //       [ [minlng, minlat], [maxlng, maxlat] ],\n  //       { padding: 20, offset: [0, -40] }\n  //     )\n  //     const newLat = fittedBounds.latitude\n  //     const newLong = fittedBounds.longitude\n  //     zoom = fittedBounds.zoom\n\n  //     return [\n  //       viewport.zoom + 6,\n  //       viewport.zoom - 6\n  //     ]\n  //   }\n  //   catch (e) {\n  //     // Sometimes we don't have a valid bound. Don't make a big deal out of it.\n  //     console.error(e)\n  //   }\n  // }\n\n  // const zoomBounds = useMemo(() => recalcZoomBounds(), [maxBounds, size])\n\n  const onViewportChange = newViewport => {\n    // Here we set/reset the bounds\n    if (lockPan) {\n      newViewport.longitude = viewport.longitude\n      newViewport.latitude = viewport.latitude\n    }\n    else if (maxBounds && lockToBounds) {\n      if (newViewport.longitude < maxBounds[0]) newViewport.longitude = maxBounds[0]\n      else if (newViewport.longitude > maxBounds[2]) newViewport.longitude = maxBounds[2]\n\n      if (newViewport.latitude < maxBounds[1]) newViewport.latitude = maxBounds[1]\n      else if (newViewport.latitude > maxBounds[3]) newViewport.latitude = maxBounds[3]\n    }\n    // Here we set the max and min zoom bounds.\n    if (lockZoom) {\n      newViewport.zoom = viewport.zoom\n    }\n    if (lockRotation) {\n      newViewport.pitch = viewport.pitch\n      newViewport.bearing = viewport.bearing\n    }\n    // else if (zoomBounds) {\n    //   if (newViewport.zoom < zoomBounds.min) newViewport.zoom = zoomBounds.min\n    //   else if (newViewport.zoom > zoomBounds.max) newViewport.zoom = zoomBounds.max\n    // }\n    // console.log('onViewportChange', newViewport)\n    if (typeof incomingOnViewportChange === 'function') incomingOnViewportChange(newViewport)\n    setViewport(newViewport)\n  }\n\n  useEffect(() => {\n    // onViewportChange(viewport)\n  })\n\n  return [viewport, currStyle, setCurrStyle, onViewportChange]\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { withStyles } from '@material-ui/core/styles'\nimport BaseMap from '../BaseMap'\nimport style from './MapDot.style'\n\nconst MapDot = ({ classes, longitude, latitude, editable, onChange, direction, ...props }) => {\n  return (\n    <BaseMap\n      {...props}\n      lockPan={!editable}\n      lockRotation\n      longitude={longitude}\n      onViewportChange={onChange}\n      latitude={latitude}\n    >\n      <svg className={classes.svgDot}\n        version='1.1'\n        viewBox='0, 0, 10, 10'\n      >\n        <circle cx='5' cy='5' r='4'\n          stroke='#CCCCFF'\n          strokeWidth='1'\n          fill='#4444FF'\n        />\n      </svg>\n      {direction !== null ? (\n        <svg className={classes.svgArc}\n          version='1.1'\n          width='100'\n          height='100'\n          viewBox='0, 0, 100, 100'\n          style={{ transform: `translateY(-50%) translateX(-50%) rotateZ(${direction}deg)` }}>\n          <path d='M50,0 C60.946,0.151 72.136,3.514 80.675,10.56 L50,50 L19.325,10.56 C27.938,3.461 39,0.278 50,0 z'\n            fill='#009DC1'\n            fillOpacity='0.444'\n            strokeWidth='0.5'\n            strokeOpacity='0.6'\n            stroke='#FFFFFF'\n          />\n        </svg>\n      ) : null}\n    </BaseMap>\n  )\n}\n\nMapDot.propTypes = {\n  classes: PropTypes.object.isRequired,\n  longitude: PropTypes.number.isRequired,\n  latitude: PropTypes.number.isRequired,\n  direction: PropTypes.number,\n  editable: PropTypes.bool,\n  onChange: PropTypes.func\n}\n\nexport default withStyles(style)(MapDot)\n","export default theme => ({\n  mapWrapper: {\n    width: '100%'\n  },\n  svgDot: {\n    zIndex: 2,\n    position: 'absolute',\n    width: '5%',\n    height: '5%',\n    top: '50%',\n    left: '50%',\n    transformOrigin: '50% 50%',\n    transform: 'translateY(-50%) translateX(-50%)'\n  },\n  svgArc: {\n    zIndex: 1,\n    position: 'absolute',\n    width: '85%',\n    height: '85%',\n    top: '50%',\n    left: '50%',\n    transformOrigin: '50% 50%'\n  }\n})\n","import React, { useState } from 'react'\nimport classNames from 'classnames'\nimport PropTypes from 'prop-types'\nimport { Typography } from '@material-ui/core'\nimport { withStyles } from '@material-ui/core/styles'\n\nconst style = theme => ({\n  root: {\n    position: 'relative',\n    display: 'block',\n    overflow: 'hidden',\n    whiteSpace: 'pre-line',\n    paddingBottom: theme.spacing.unit,\n    transition: theme.transitions.create(['all'], {\n      easing: theme.transitions.easing.easeInOut,\n      duration: theme.transitions.duration.complex\n    }),\n    '&::before': {\n      content: '\"  \"',\n      display: 'block',\n      position: 'absolute',\n      bottom: 0,\n      width: '100%',\n      height: 100,\n      background: `linear-gradient(180deg, rgba(255,255,255,0) 0%, ${theme.palette.background.paper} 100%)`\n    }\n  },\n  expanded: {\n    '&::before': {\n      opacity: 0\n    }\n  }\n})\n\nconst ExpandNote = ({ classes, text, height }) => {\n  const [expandNote, setExpandNote] = useState(false)\n  return (\n    <Typography\n      onClick={() => setExpandNote(!expandNote)}\n      variant='body1'\n      color='inherit'\n      style={{ maxHeight: expandNote ? 5000 : height, minHeight: height }}\n      className={classNames(classes.root, expandNote && classes.expanded)}\n    >\n      {text}\n    </Typography>\n  )\n}\n\nExpandNote.propTypes = {\n  classes: PropTypes.object.isRequired,\n  text: PropTypes.string,\n  height: PropTypes.number\n}\nExpandNote.defaultProps = {\n  height: 100\n}\n\nexport default withStyles(style)(ExpandNote)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\nimport {\n  Chip\n} from '@material-ui/core'\nimport {\n  Cancel as CancelIcon\n} from '@material-ui/icons'\nimport { withStyles } from '@material-ui/core/styles'\nimport config from '../config'\nexport const tagChips = {\n  height: 20\n}\n\nconst style = theme => ({\n  root: {\n    fontSize: '0.6em',\n    height: tagChips.height,\n    marginRight: theme.spacing.unit / 2,\n    marginTop: theme.spacing.unit / 2\n  },\n  deleteIcon: {\n    width: tagChips.height - 1,\n    height: tagChips.height - 1\n  },\n  chipAvatar: {\n    width: tagChips.height,\n    height: tagChips.height\n  },\n  ...config.tagColors.reduce((acc, tagCol, idx) => ({\n    ...acc,\n    [`tag-${idx}`]: {\n      background: `${tagCol}!important`,\n      color: `${theme.palette.getContrastText(tagCol)}!important`\n    }\n  }), {})\n})\n\nconst TagChip = ({ classes, edit, tag, group, onDelete, ...props }) => {\n  return (\n    <Chip\n      label={tag.label}\n      data={tag.id}\n      onDelete={edit ? () => onDelete(tag) : null}\n      deleteIcon={<CancelIcon className={classes.deleteIcon} />}\n      className={classNames(classes.root, classes[`tag-${group}`])}\n      {...props}\n    />\n  )\n}\n\nTagChip.propTypes = {\n  classes: PropTypes.object.isRequired,\n  edit: PropTypes.bool,\n  tag: PropTypes.object.isRequired,\n  onDelete: PropTypes.func,\n  group: PropTypes.number.isRequired\n}\n\nexport default withStyles(style)(TagChip)\n","import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\nimport {\n  IconButton,\n  Typography\n} from '@material-ui/core'\nimport {\n  Edit as EditIcon,\n  Close as CloseIcon,\n  Check as CheckIcon\n  // Refresh as RefreshIcon\n} from '@material-ui/icons'\nimport { withStyles } from '@material-ui/core/styles'\n\nconst headerStyle = theme => ({\n  root: {\n    display: 'flex'\n    // borderBottom: `1px solid ${theme.palette.grey['A200']}`\n  },\n  fieldTitle: {\n    flexGrow: 1,\n    display: 'block',\n    color: theme.palette.text.secondary\n  },\n  iconButton: {\n    padding: theme.spacing.unit * 0.75,\n    '& svg': {\n      fontSize: theme.spacing.unit * 2\n    }\n  },\n  editButton: {\n    color: theme.palette.grey['500']\n  },\n  cancelButton: {\n    color: theme.palette.error.main,\n    marginLeft: theme.spacing.unit\n  }\n})\n\nconst useFormFieldState = (defaultValue, allowEdit, onChangeExt = () => {}, permaEdit) => {\n  const [editing, setEditing] = useState(false)\n  const [value, _onChange] = useState(defaultValue)\n\n  const onChange = (val) => {\n    if (permaEdit) onChangeExt(val)\n    _onChange(val)\n  }\n\n  // Save drops out of edit mode and returns the saved state value\n  // NOTE: THIS DOESN'T SET THE STATE. USE ONCHANGE FOR THAT.\n  const onSave = () => {\n    setEditing(false)\n    onChangeExt(value)\n  }\n  // Reset just resets the form element to its previous state\n  const onReset = () => {\n    onChange(defaultValue)\n    if (permaEdit) onChangeExt(defaultValue)\n  }\n  // Cancel resets the form AND returns to view mode\n  const onCancel = () => {\n    setEditing(false)\n    onReset()\n  }\n\n  /**\n   * HOC for the form control header\n   */\n  const Header = withStyles(headerStyle)(({ classes, children }) => (\n    <div className={classes.root}>\n      <Typography variant='overline' className={classes.fieldTitle}>\n        {children}\n      </Typography>\n      {allowEdit && !editing && !permaEdit && (\n        <IconButton\n          className={classNames(classes.editButton, classes.iconButton)}\n          onClick={() => setEditing(true)}\n        >\n          <EditIcon className={classes.icon} />\n        </IconButton>\n      )}\n      {allowEdit && editing && !permaEdit && (\n        <div>\n          <IconButton\n            className={classNames(classes.checkButton, classes.iconButton)}\n            onClick={onSave}\n          >\n            <CheckIcon className={classes.icon} />\n          </IconButton>\n          <IconButton\n            className={classNames(classes.cancelButton, classes.iconButton)}\n            onClick={onCancel}\n          >\n            <CloseIcon className={classes.icon} />\n          </IconButton>\n        </div>\n      )}\n    </div>\n  ))\n  Header.PropTypes = {\n    children: PropTypes.oneOfType([\n      PropTypes.arrayOf(PropTypes.node),\n      PropTypes.node\n    ]).isRequired\n  }\n\n  return { editing, value, onChange, onSave, onReset, onCancel, Header }\n}\n\nexport default useFormFieldState\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\nimport {\n  Typography,\n  TextField\n} from '@material-ui/core'\nimport useFormFieldState from './useFormFieldState'\nimport ExpandNote from './ExpandNote'\nimport { withStyles } from '@material-ui/core/styles'\n\nconst style = theme => ({\n  root: {\n  },\n  rootEdit: {\n  },\n  textBody: {\n    whiteSpace: 'pre-line',\n    paddingLeft: theme.spacing.unit,\n    paddingRight: theme.spacing.unit\n  },\n  hint: {\n    // marginTop: theme.spacing.unit,\n    // marginBottom: theme.spacing.unit\n  },\n  textField: {\n    color: theme.palette.grey['900'],\n    background: theme.palette.grey['200'],\n    '& textarea': {\n      color: theme.palette.grey['900'],\n      background: theme.palette.grey['200']\n      // padding: theme.spacing.unit\n    }\n  }\n})\n\nconst TextAreaControl = ({ classes, defaultValue, permaEdit,\n  collapsed, className,\n  hint,\n  collapsedHeight, label,\n  allowEdit,\n  onChange: onChangeExt, ...props }) => {\n  const { editing, value, onChange, Header } = useFormFieldState(defaultValue, allowEdit, onChangeExt, permaEdit)\n  const renderText = value && value.length > 1 ? value : <em>none</em>\n  const textRender = collapsed && value && value.length > 1\n    ? <ExpandNote text={renderText} height={collapsedHeight} />\n    : <Typography variant='body2'>{renderText}</Typography>\n\n  return (\n    <div className={classNames(classes.root, editing && classes.rootEdit, className)}>\n      <Header>{label}</Header>\n      {!editing && !permaEdit\n        ? <div className={classes.textBody}>{textRender}</div>\n        : <TextField\n          multiline\n          fullWidth\n          rows={5}\n          rowsMax={10}\n          value={value || ''}\n          className={classes.textField}\n          {...props}\n          onChange={(e) => onChange(e.target.value)}\n        />\n      }\n      {hint && <Typography variant='caption' className={classes.hint}>{hint}</Typography>}\n    </div>\n\n  )\n}\n\nTextAreaControl.propTypes = {\n  classes: PropTypes.object.isRequired,\n  className: PropTypes.string,\n  label: PropTypes.string.isRequired,\n  defaultValue: PropTypes.string,\n  hint: PropTypes.string,\n  collapsed: PropTypes.bool,\n  collapsedHeight: PropTypes.number,\n  allowEdit: PropTypes.bool,\n  permaEdit: PropTypes.bool,\n  // These come in from the HOC\n  onChange: PropTypes.func.isRequired\n}\n\nTextAreaControl.defaultProps = {\n  collapsed: false,\n  allowEdit: false\n}\n\nexport default withStyles(style)(TextAreaControl)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\nimport {\n  Typography,\n  TextField\n} from '@material-ui/core'\nimport useFormFieldState from './useFormFieldState'\n// import ExpandNote from './ExpandNote'\nimport { withStyles } from '@material-ui/core/styles'\n\nconst style = theme => ({\n  root: {\n  },\n  rootEdit: {\n  },\n  textBody: {\n    whiteSpace: 'pre-line',\n    paddingLeft: theme.spacing.unit,\n    paddingRight: theme.spacing.unit\n  },\n  textField: {\n    '& textarea': {\n      color: theme.palette.grey['900'],\n      background: theme.palette.grey['200'],\n      padding: theme.spacing.unit\n    }\n\n  }\n})\n\nconst TextFieldControl = ({\n  classes, defaultValue,\n  className, label,\n  hint, permaEdit,\n  placeholder,\n  allowEdit,\n  onChange: onChangeExt\n}) => {\n  const { editing, value, onChange, Header } = useFormFieldState(defaultValue, allowEdit, onChangeExt, permaEdit)\n\n  return (\n    <div className={classNames(classes.root, editing && classes.rootEdit, className)}>\n      <Header>{label}</Header>\n      {!editing && !permaEdit\n        ? <div className={classes.textBody}>\n          <Typography variant='body2'>{value}</Typography>\n        </div>\n        : <TextField\n          fullWidth\n          placeholder={placeholder}\n          value={value || ''}\n          className={classes.textField}\n          onChange={(e) => onChange(e.target.value)}\n        />\n      }\n      {hint && <Typography variant='caption' className={classes.hint}>{hint}</Typography>}\n    </div>\n\n  )\n}\n\nTextFieldControl.propTypes = {\n  classes: PropTypes.object.isRequired,\n  className: PropTypes.string,\n  placeholder: PropTypes.string,\n  label: PropTypes.string.isRequired,\n  defaultValue: PropTypes.string,\n  hint: PropTypes.string,\n  allowEdit: PropTypes.bool,\n  permaEdit: PropTypes.bool,\n  // These come in from the HOC\n  onChange: PropTypes.func.isRequired\n}\n\nexport default withStyles(style)(TextFieldControl)\n","const TYPES = {\n  // Series meta gets appended automatically to the seriees\n  SERIES: 'SERIES',\n  // Same but now only gets appended to the photo\n  PHOTO: 'PHOTO'\n}\nclass SeriesConfig {\n  constructor (seriesConfig) {\n    this.config = seriesConfig\n  }\n\n  getTagType = (typeId) => this.config.tags.find(tt => tt.id === typeId)\n  // getTagTypeIndex = (typeId) => this.config.tags.findIndex(tt => tt.id === typeId)\n  getTagTypeIndex = (typeId) => {\n    console.log('HERE', typeId)\n    return this.config.tags.findIndex(tt => tt.id === typeId)\n  }\n\n  getXYTagTypes = () => this.config.tags.filter(tt => tt.isXY)\n  getNonXYTagTypes = () => this.config.tags.filter(tt => !tt.isXY)\n\n  getSeriesMeta = () => Object.keys(this.config.meta)\n    .filter(key => this.config.meta[key].type === TYPES.SERIES)\n    .reduce((acc, key) => ({\n      ...acc,\n      [key]: this.config.meta[key].default\n    }), {})\n\n  getPhotoMeta = () => Object.keys(this.config.meta)\n    .filter(key => this.config.meta[key].type === TYPES.PHOTO)\n    .reduce((acc, key) => ({\n      ...acc,\n      [key]: this.config.meta[key].default\n    }), {})\n}\n\nexport default SeriesConfig\n","import React from 'react'\n\nexport const SeriesConfig = React.createContext({})\n","import React, { useContext } from 'react'\nimport classNames from 'classnames'\nimport PropTypes from 'prop-types'\nimport {\n  Divider,\n  List,\n  ListItem,\n  ListItemText,\n  Typography\n} from '@material-ui/core'\nimport { formatDate } from '../../lib/datelib'\nimport { withStyles } from '@material-ui/core/styles'\nimport ExpandNote from '../controls/ExpandNote'\nimport TagChip from '../TagChip'\nimport TextAreaControl from '../controls/TextAreaControl'\nimport TextFieldControl from '../controls/TextFieldControl'\nimport style from './SeriesInfo.style'\nimport SeriesConfigClass from '../../lib/SeriesConfig'\nimport { SeriesConfig } from '../../contexts'\n\nconst SeriesInfo = ({ classes, series }) => {\n  const seriesConfig = useContext(SeriesConfig)\n  const seriesConfigInst = new SeriesConfigClass(seriesConfig)\n  const newTags = series.photos.reduce((acc, { tags }) => {\n    tags.forEach(tag => {\n      if (!acc[tag.typeId]) {\n        acc[tag.typeId] = {\n          [tag.label]: { ...tag, count: 1 }\n        }\n      }\n      else if (acc[tag.typeId][tag.label]) {\n        const existing = acc[tag.typeId][tag.label]\n        acc[tag.typeId][tag.label] = { ...existing, count: existing.count + 1 }\n      }\n      else acc[tag.typeId][tag.label] = { ...tag, count: 1 }\n    })\n    return acc\n  }, {})\n\n  return (\n    <div className={classes.root}>\n\n      <TextFieldControl\n        className={classes.field}\n        label='Series Name'\n        placeholder='New Series'\n        defaultValue={series.name}\n      />\n      <TextAreaControl\n        className={classes.field}\n        label='Notes'\n        placeholder='Any instructions for the next person to add a picture to this series?'\n        collapsed\n        defaultValue={series.note}\n      />\n\n      <Typography className={classes.heading} variant='h6'>Series Summary</Typography>\n      <Divider />\n      <List className={classes.list}>\n        <ListItem disableGutters>\n          <ListItemText\n            primary={`Photos: ${series.photos.length}`}\n            secondary={series.photos.length > 0 && (\n              <span>\n             First: {formatDate(series.photos[series.photos.length - 1].date, 'lll')}\n                <br />\n             Latest: {formatDate(series.photos[0].date, 'lll')}\n              </span>\n            )}\n          />\n        </ListItem>\n        <ListItem disableGutters>\n          <ListItemText>\n            <Typography variant='subtitle1'>Tags in use (across all photos)</Typography>\n            {Object.keys(newTags).map((tagKey, idtk) => (\n              <div key={`tagchipkey${idtk}`} className={classes.tagListItem}>\n                <Typography className={classes.subheading} variant='subtitle1'>{seriesConfigInst.getTagType(tagKey).label}</Typography>\n                <Divider />\n                {\n                  Object.values(newTags[tagKey]).map((tag, idx) => (\n                    <TagChip key={`tagchip-${idtk}-${idx}`} tag={tag} group={seriesConfigInst.getTagTypeIndex(tagKey)} />\n                  ))\n                }\n              </div>\n            ))}\n          </ListItemText>\n        </ListItem>\n      </List>\n\n      <Typography className={classes.heading} variant='h6'>Metadata</Typography>\n      <Divider />\n      <List className={classes.list}>\n        {Object.keys(series.meta).map((key, idx) => seriesConfig.meta[key] ? (\n          <ListItem key={`metadata${idx}`}>\n            <ListItemText\n              primary={seriesConfig.meta[key].label}\n              secondary={seriesConfig.meta[key].render(series.meta[key])}\n            />\n          </ListItem>\n        ) : null\n        )}\n      </List>\n\n    </div>\n  )\n}\n\nSeriesInfo.propTypes = {\n  classes: PropTypes.object.isRequired,\n  series: PropTypes.object.isRequired\n}\n\nexport default withStyles(style)(SeriesInfo)\n","export default theme => ({\n  root: {\n    margin: theme.spacing.unit,\n    backgroundColor: theme.palette.background.paper\n  },\n  field: {\n    marginBottom: theme.spacing.unit\n  },\n  list: {\n    padding: theme.spacing.unit\n  },\n  heading: {\n    marginTop: theme.spacing.unit\n  },\n  tagListItem: {\n    marginTop: theme.spacing.unit,\n    marginBottom: theme.spacing.unit * 2\n  },\n  chip: {\n    margin: theme.spacing.unit / 2\n  }\n})\n","import config from '../../../config'\n\nconst tagChips = {\n  height: 20\n}\n\nexport default theme => ({\n  xyTagChip: {\n    cursor: 'pointer',\n    color: 'white',\n    fontSize: '0.6em',\n    background: '#444444',\n    height: tagChips.height,\n    position: 'absolute',\n    left: -tagChips.height / 2,\n    top: -tagChips.height / 2\n  },\n  editing: {\n    // color: 'white',\n    // background: theme.palette.secondary.main\n  },\n  // The tag is flipped on the right side of the screen\n  reversedChip: {\n    flexDirection: 'row-reverse',\n    left: 'unset',\n    right: -tagChips.height / 2\n  },\n  deleteIcon: {\n    // color: 'white',\n    width: tagChips.height - 1,\n    height: tagChips.height - 1\n  },\n  chipAvatarIcon: {\n    color: 'white',\n    width: tagChips.height - 4,\n    height: tagChips.height - 4\n  },\n  chipAvatar: {\n    background: 'inherit',\n    width: tagChips.height,\n    height: tagChips.height\n  },\n  reversedDelete: {\n    margin: `0 -${tagChips.height / 8}px 0 ${tagChips.height / 8}px`\n  },\n  // The chip bucket is the container div for the chip and represents the\n  // Actual XY coordinates. The chip itself is offset to make the\n  chipBucket: {\n    width: 1,\n    height: 1,\n    display: 'flex',\n    flexDirection: 'row',\n    position: 'absolute'\n  },\n  reversedChipBucket: {\n    flexDirection: 'row-reverse'\n  },\n  ...config.tagColors.reduce((acc, tagCol, idx) => ({\n    ...acc,\n    [`tag-${idx}`]: {\n      background: `${tagCol}!important`,\n      color: `${theme.palette.getContrastText(tagCol)}!important`\n    }\n  }), {})\n})\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\nimport Draggable from 'react-draggable'\nimport {\n  Chip,\n  Avatar\n} from '@material-ui/core'\nimport {\n  Cancel as CancelIcon,\n  MyLocation\n} from '@material-ui/icons'\nimport { withStyles } from '@material-ui/core/styles'\nimport style from './PhotoTagChip.style'\n\nconst XYTagChip = ({ classes, edit, tag, newSize, onTagDragOver, onTagDragStop, onNewTag, group, onTagDelete, ...props }) => {\n  const isReversed = tag.relCoords.x > newSize.newWidth / 2\n\n  const stopBadness = (e) => {\n    e.preventDefault()\n    e.stopPropagation()\n  }\n\n  const handleDrag = (e, data) => {\n    stopBadness(e)\n    onTagDragOver(data, tag)\n  }\n  const handleStopDrag = (e, data) => {\n    stopBadness(e)\n    onTagDragStop(data, tag)\n  }\n\n  // Draggable chip if it is editable\n  return (\n    <Draggable\n      disabled={!edit}\n      bounds={{ left: 10, top: 10, right: newSize.newWidth - 10, bottom: newSize.newHeight - 10 }}\n      position={{ x: tag.relCoords.x, y: tag.relCoords.y }}\n      onDrag={handleDrag}\n      onStop={handleStopDrag}\n      onClick={stopBadness}\n    >\n      <div className={classNames(classes.chipBucket, isReversed && classes.reversedChipBucket)}>\n        <Chip\n          color={edit ? 'secondary' : 'default'}\n          label={tag.label}\n          data={tag.id}\n          onClick={stopBadness}\n          onDelete={edit ? onTagDelete(tag) : null}\n          deleteIcon={edit ? <CancelIcon className={classNames(classes.deleteIcon, isReversed && classes.reversedDelete)} /> : <div />}\n          className={classNames(\n            classes.xyTagChip,\n            isReversed && classes.reversedChip,\n            edit && classes.editing,\n            classes[`tag-${group}`]\n          )}\n          {...props}\n          avatar={<Avatar className={classNames(classes.chipAvatar, edit && classes.editing)}>\n            <MyLocation className={classNames(classes.chipAvatarIcon, edit && classes.editing)} />\n          </Avatar>}\n        />\n      </div>\n    </Draggable>\n  )\n}\n\nXYTagChip.propTypes = {\n  classes: PropTypes.object.isRequired,\n  edit: PropTypes.bool,\n  tag: PropTypes.object.isRequired,\n  group: PropTypes.number.isRequired,\n  newSize: PropTypes.object,\n  onTagDragOver: PropTypes.func,\n  onTagDragStop: PropTypes.func,\n  onNewTag: PropTypes.func,\n  onTagDelete: PropTypes.func\n}\n\nexport default withStyles(style)(XYTagChip)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport {\n  Paper,\n  Typography,\n  TextField,\n  MenuItem\n} from '@material-ui/core'\n\n// import { Menu as MenuIcon } from '@material-ui/icons'\nimport { withStyles } from '@material-ui/core/styles'\nimport Select from 'react-select'\nimport CreatableSelect from 'react-select/lib/Creatable'\nimport style from './XYTagSelect.style'\n\nconst XYTagSelect = ({ classes, tagConfig, onChange }) => {\n  const options = tagConfig.values.map(tc => ({ label: tc.label, value: tc.id }))\n\n  return (\n    <div className={classes.root}>\n      {!tagConfig.allowAdditions && (\n        <Select\n          options={options}\n          classes={classes}\n          components={{\n            Control,\n            Menu,\n            NoOptionsMessage,\n            Option,\n            Placeholder,\n            ValueContainer\n          }}\n          value={null}\n          onBlur={e => e.preventDefault()}\n          blurInputOnSelect\n          isClearable={false}\n          onChange={onChange}\n          placeholder={tagConfig.label}\n          isSearchable\n        />\n      ) }\n      { tagConfig.allowAdditions && (\n        <CreatableSelect\n          options={options}\n          classes={classes}\n          components={{\n            Control,\n            Menu,\n            NoOptionsMessage,\n            Option,\n            Placeholder,\n            ValueContainer\n          }}\n          value={null}\n          isClearable={false}\n          onBlur={e => e.preventDefault()}\n          blurInputOnSelect\n          onChange={onChange}\n          placeholder={tagConfig.label}\n          isSearchable\n        />\n      )}\n    </div>\n  )\n}\nXYTagSelect.propTypes = {\n  classes: PropTypes.object.isRequired,\n  tagConfig: PropTypes.object.isRequired,\n  onChange: PropTypes.func.isRequired\n}\n\nexport default withStyles(style)(XYTagSelect)\n\nfunction Control (props) {\n  return (\n    <TextField\n      fullWidth\n      InputProps={{\n        inputComponent,\n        inputProps: {\n          className: props.selectProps.classes.input,\n          inputRef: props.innerRef,\n          children: props.children,\n          ...props.innerProps\n        }\n      }}\n      {...props.selectProps.textFieldProps}\n    />\n  )\n}\n\nconst NoOptionsMessage = ({ innerProps, selectProps, children }) => (\n  <Typography\n    color='textSecondary'\n    className={selectProps.classes.noOptionsMessage}\n    {...innerProps}\n  >\n    {children}\n  </Typography>\n)\n\nconst Menu = ({ selectProps, innerProps, children }) => (\n  <Paper square className={selectProps.classes.paper} {...innerProps}>\n    {children}\n  </Paper>\n)\n\nconst inputComponent = ({ inputRef, ...props }) => <div ref={inputRef} {...props} />\n\nconst Placeholder = (props) => (\n  <Typography\n    color='textSecondary'\n    className={props.selectProps.classes.placeholder}\n    {...props.innerProps}\n  >\n    {props.children}\n  </Typography>\n)\n\nconst Option = ({ innerRef, isFocused, isSelected, innerProps, children }) => (\n  <MenuItem\n    buttonRef={innerRef}\n    selected={isFocused}\n    component='div'\n    style={{ fontWeight: isSelected ? 500 : 400 }}\n    {...innerProps}\n  >\n    {children}\n  </MenuItem>\n)\n\nconst ValueContainer = ({ selectProps, children }) => (\n  <div className={selectProps.classes.valueContainer}>{children}</div>\n)\n","export default theme => ({\n  root: {\n    width: '100%'\n  },\n  noOptionsMessage: {\n    padding: `${theme.spacing.unit}px ${theme.spacing.unit * 2}px`\n  },\n  singleValue: {\n    fontSize: 16\n  },\n  placeholder: {\n    position: 'absolute',\n    left: 2,\n    fontSize: 16\n  },\n  input: {\n    display: 'flex',\n    padding: 0\n  },\n  valueContainer: {\n    display: 'flex',\n    flexWrap: 'wrap',\n    flex: 1,\n    alignItems: 'center',\n    overflow: 'hidden'\n  },\n  paper: {\n    position: 'absolute',\n    zIndex: 100,\n    marginTop: theme.spacing.unit,\n    left: 0,\n    right: 0\n  }\n})\n","import React, { useContext } from 'react'\nimport PropTypes from 'prop-types'\nimport {\n  Dialog,\n  DialogTitle,\n  Typography\n} from '@material-ui/core'\nimport { withStyles } from '@material-ui/core/styles'\nimport XYTagSelect from './XYTagSelect'\nimport style from './XYTagChooser.style'\nimport { SeriesConfig } from '../../../contexts'\n\nconst XYTagChooser = ({ classes, coords, open, onNewTag, onClose }) => {\n  const seriesConfig = useContext(SeriesConfig)\n  const xyTags = seriesConfig.tags.filter(t => t.isXY)\n  if (!coords) return null\n  return (\n    <Dialog\n      open={open}\n      scroll='paper'\n      classes={{ paperScrollPaper: classes.root }}\n      onClose={() => onClose()}\n      aria-labelledby='simple-dialog-title'\n    >\n      <DialogTitle id='simple-dialog-title' className={classes.header}>New Tag:</DialogTitle>\n      <div className={classes.dlgBody}>\n        {xyTags.length > 1 && (\n          <Typography variant='caption'>What kind of tag would you like to create?</Typography>\n        )}\n\n        {xyTags.map((tagType, idx) => (\n          <div className={classes.listItem} key={`tagSelect${idx}`}>\n            <XYTagSelect tagConfig={tagType} onChange={onNewTag(coords, tagType)} />\n          </div>\n        ))}\n      </div>\n    </Dialog>\n  )\n}\n\nXYTagChooser.propTypes = {\n  classes: PropTypes.object.isRequired,\n  open: PropTypes.bool.isRequired,\n  coords: PropTypes.object,\n  onClose: PropTypes.func.isRequired,\n  onNewTag: PropTypes.func.isRequired\n}\n\nexport default withStyles(style)(XYTagChooser)\n","export default theme => ({\n  root: {\n    overflow: 'visible'\n  },\n  header: {\n    padding: theme.spacing.unit * 2\n  },\n  listItem: {\n    flexDirection: 'column'\n  },\n  dlgBody: {\n    paddingLeft: theme.spacing.unit * 2,\n    paddingRight: theme.spacing.unit * 2,\n    paddingBottom: theme.spacing.unit * 2\n  }\n})\n","import uuid from 'uuid/v4'\nimport SeriesConfig from './SeriesConfig'\n\nclass Tags {\n  constructor (seriesConfig, tags) {\n    this.tags = tags\n    this.seriesConfig = new SeriesConfig(seriesConfig)\n  }\n\n  findTagById = (typeId, tagId) => {\n    return this.seriesConfig.getTagType(typeId).values\n      .find(tt => tt.id === tagId)\n  }\n\n  // Filter the list of tags to those that are XY tags\n  getXYTags = () => {\n    const xyTagIds = this.seriesConfig.getXYTagTypes().map(tt => tt.id)\n    return this.tags.filter(tag => xyTagIds.indexOf(tag.typeId) > -1)\n  }\n\n  getNonXYTags = () => {\n    const NonXYTagIds = this.seriesConfig.getNonXYTagTypes().map(tt => tt.id)\n    return this.tags.filter(tag => NonXYTagIds.indexOf(tag.typeId) > -1)\n  }\n\n  createNewTagObj = (label, typeId) => (\n    { id: uuid(), label, typeId }\n  )\n\n  createExistingTagObj = (id, typeId) => ({\n    ...this.findTagById(typeId, id),\n    typeId\n  })\n\n  createNewXYTagObj = (label, typeId, coords) => ({\n    id: uuid(),\n    label,\n    typeId,\n    coords\n  })\n\n  createExistingXYTagObj = (id, typeId, coords) => ({\n    ...this.findTagById(typeId, id),\n    typeId,\n    coords\n  })\n\n  // Get tags in a way that's easy to render them\n  // We augment these tags with relative positions\n  // and a group number for coloring.\n  getRelXYTags = (multiplier) => this.getXYTags().map(tag => ({\n    ...tag,\n    group: this.seriesConfig.getTagTypeIndex(tag.typeId),\n    relCoords: {\n      x: tag.coords.x * multiplier,\n      y: tag.coords.y * multiplier\n    }\n  }))\n}\n\nexport default Tags\n","import React, { useState, useContext } from 'react'\nimport { SeriesConfig } from '../../../contexts'\nimport XYTagChooser from './XYTagChooser'\nimport Tags from '../../../lib/Tags'\n\nconst useTags = (photo, newSize, onChange) => {\n  const seriesConfig = useContext(SeriesConfig)\n\n  // we hold the tags in state so that every little drag motion\n  // doesn't cause an updated state until you let go\n  const [isDragging, setIsDragging] = useState(false)\n  const [newTagDialog, setNewTagDialog] = useState(null)\n\n  const tagClass = new Tags(seriesConfig, photo.tags)\n\n  const onNewTag = (coords, tagType) => ({ value, __isNew__: isNew }) => {\n    let addTag = isNew\n      ? tagClass.createNewXYTagObj(value, tagType.id, coords)\n      : tagClass.createExistingXYTagObj(value, tagType.id, coords)\n\n    setNewTagDialog(null)\n    onChange({ ...photo, tags: [...photo.tags, addTag] })\n  }\n\n  const onTagDelete = (tag) => () => {\n    const tags = photo.tags.filter(oldTag => oldTag.id !== tag.id)\n    onChange({\n      ...photo,\n      tags\n    })\n  }\n\n  // When the photo is tapped, send the x,y coords of that tap\n  // to a dialog we will open\n  const onAddTagTrigger = (e) => {\n    setNewTagDialog({\n      x: e.pageX - (window.innerWidth - newSize.newWidth) / 2 * newSize.multiplier,\n      y: e.pageY - (window.innerHeight - newSize.newHeight) / 2 * newSize.multiplier\n    })\n  }\n\n  // This gets used by the drag AND the stop\n  const updateTagLocation = ({ x, y }, tag) => {\n    const newTags = photo.tags.map(oldTag => {\n      if (oldTag.id !== tag.id) return oldTag\n      else {\n        let newX = x / newSize.multiplier\n        let newY = y / newSize.multiplier\n\n        return {\n          ...oldTag,\n          coords: { x: newX, y: newY }\n        }\n      }\n    })\n    return newTags\n  }\n\n  const onTagDragStop = (coords, tag) => {\n    const tags = updateTagLocation(coords, tag)\n    setIsDragging(false)\n    onChange({\n      ...photo,\n      tags\n    })\n  }\n\n  const onTagDragOver = (coords, tag) => {\n    updateTagLocation(coords, tag)\n    setIsDragging(true)\n  }\n  const TagChooser = () => (\n    <XYTagChooser\n      open={!isDragging && Boolean(newTagDialog)}\n      coords={newTagDialog}\n      seriesConfig={seriesConfig}\n      onNewTag={onNewTag}\n      onClose={() => setNewTagDialog(null)}\n    />\n  )\n\n  return {\n    onNewTag,\n    onTagDelete,\n    onAddTagTrigger,\n    onTagDragOver,\n    onTagDragStop,\n    TagChooser,\n    getRelXYTags: tagClass.getRelXYTags\n  }\n}\n\nexport default useTags\n","import React, { useState, useRef } from 'react'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\nimport { withStyles } from '@material-ui/core/styles'\nimport useComponentSize from '../../lib/useComponentSize'\nimport XYTagChip from './PhotoTags/XYTagChip'\nimport style from './Photo.style'\nimport useTags from './PhotoTags/useTags'\n\nconst Photo = ({ classes, photo, opacity, edit, showTags, transition, onChange, className }) => {\n  const refImgWrap = useRef(null)\n  const [newSize, setNewSize] = useState({ multiplier: 1 })\n  const { height, width } = useComponentSize(refImgWrap)\n\n  // All tag-related info is put in its own hook\n  const { onAddTagTrigger, TagChooser, getRelXYTags, onTagDragOver, onTagDragStop, onTagDelete } = useTags(photo, newSize, onChange)\n\n  const handleImageLoaded = event => {\n    if (refImgWrap.current) {\n      const { naturalHeight, naturalWidth } = event.target\n\n      // 4 different cases of orientation:\n      const multiplier = Math.min(\n        height / naturalHeight,\n        width / naturalWidth\n      )\n\n      const newWidth = multiplier * naturalWidth\n      const newHeight = multiplier * naturalHeight\n\n      setNewSize({ newWidth, newHeight, naturalWidth, naturalHeight, multiplier })\n    }\n  }\n\n  return (\n    <div\n      className={classNames(classes.root, className)}\n      style={{ opacity: opacity !== null ? opacity : 1 }}\n      ref={refImgWrap}\n    >\n      <div\n        className={classes.inner}\n        style={{\n          height: newSize ? newSize.newHeight : 1,\n          width: newSize ? newSize.newWidth : 1\n        }}\n        onClick={onAddTagTrigger}\n      >\n        { showTags || edit\n          ? (\n            <div className={className}>\n              { getRelXYTags(newSize.multiplier).map((tag, idx) => (\n                <XYTagChip\n                  key={`xytag-${idx}`}\n                  group={tag.group}\n                  {...{ edit, newSize, tag, onTagDragOver, onTagDragStop, onTagDelete }} />\n              ))}\n            </div>\n          ) : null\n        }\n        <img\n          className={classes.img}\n          alt={photo.url}\n          src={photo.url || photo.base64}\n          onLoad={handleImageLoaded}\n          style={{ height: newSize.newHeight, width: newSize.newWidth }}\n        />\n      </div>\n      {edit && <TagChooser />}\n    </div>\n  )\n}\n\nPhoto.propTypes = {\n  classes: PropTypes.object.isRequired,\n  className: PropTypes.string,\n  opacity: PropTypes.number,\n  photo: PropTypes.object.isRequired,\n  edit: PropTypes.bool,\n  showTags: PropTypes.bool,\n  transition: PropTypes.string,\n  onChange: PropTypes.func\n}\n\nexport default withStyles(style)(Photo)\n","// import { fade } from '@material-ui/core/styles/colorManipulator'\nexport default theme => ({\n  root: {\n    // maxWidth: 400,\n    display: 'block',\n    position: 'relative',\n    width: '100%',\n    height: '100%',\n    background: 'black',\n    overflow: 'hidden'\n  },\n  inner: {\n    position: 'absolute',\n    top: '50%',\n    left: '50%',\n    transform: 'translateY(-50%) translateX(-50%)',\n    overflow: 'hidden'\n  },\n  xyTags: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    // opacity: 0.8,\n    // border: '4px solid red',\n    height: '100%',\n    width: '100%'\n    // background: 'rgba(150, 150, 150, 0.5)'\n  },\n  img: {\n    display: 'block'\n  },\n  formControl: {\n    width: '100%'\n  }\n})\n","import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\nimport {\n  MobileStepper,\n  IconButton,\n  GridListTileBar,\n  Badge\n} from '@material-ui/core'\nimport {\n  Label as LabelIcon,\n  RemoveRedEye,\n  KeyboardArrowLeft,\n  KeyboardArrowRight\n} from '@material-ui/icons'\nimport SwipeableViews from 'react-swipeable-views'\nimport Photo from '../Photo/Photo'\nimport { formatDate } from '../../lib/datelib'\nimport { withStyles } from '@material-ui/core/styles'\nimport style from './SwipeShow.style'\n\nconst SwipeShow = ({ classes, theme, photos, onImageSelect }) => {\n  const [activePhoto, setActivePhoto] = useState(0)\n  const [showTags, setShowTags] = useState(false)\n  const singular = photos.length < 2\n\n  const sortedPhotos = [...photos]\n  sortedPhotos.sort((a, b) => parseInt(b.date, 10) - parseInt(a.date, 10))\n\n  const handleForward = () => setActivePhoto(activePhoto >= sortedPhotos.length ? 0 : activePhoto + 1)\n  const handleBack = () => setActivePhoto(activePhoto <= 0 ? sortedPhotos.length - 1 : activePhoto - 1)\n\n  return (\n    <div className={classes.root}>\n      <div className={classes.inner}>\n        <SwipeableViews\n          axis={theme.direction === 'rtl' ? 'x-reverse' : 'x'}\n          index={activePhoto}\n          onChangeIndex={setActivePhoto}\n          enableMouseEvents\n        >\n          {sortedPhotos.map((photo, idx) => (\n            <div className={classes.photoWrapper} key={`swipeshowpic-${idx}`}>\n              <Photo photo={photo} className={classes.photo} showTags={showTags} />\n            </div>\n          ))}\n        </SwipeableViews>\n        <IconButton size='small' className={classes.manualBack} onClick={handleBack} color='inherit' disabled={activePhoto === 0}>\n          {theme.direction === 'rtl' ? <KeyboardArrowRight /> : <KeyboardArrowLeft />}\n        </IconButton>\n        <IconButton size='small' className={classes.manualForward} onClick={handleForward} color='inherit' disabled={activePhoto === photos.length - 1}>\n          {theme.direction === 'rtl' ? <KeyboardArrowLeft /> : <KeyboardArrowRight />}\n        </IconButton>\n        <GridListTileBar\n          title={singular ? 'Photo' : `Photo (${activePhoto + 1}/${sortedPhotos.length})`}\n          subtitle={sortedPhotos.length > 0 && (\n            <span>{formatDate(sortedPhotos[activePhoto].date)}</span>\n          )}\n          actionIcon={\n            <React.Fragment>\n              <IconButton className={classes.tagButton} onClick={() => setShowTags(!showTags)}>\n                <Badge color={showTags ? 'primary' : 'secondary'} badgeContent={sortedPhotos[activePhoto].tags.filter(tag => tag.coords).length}>\n                  <LabelIcon />\n                </Badge>\n              </IconButton>\n              <IconButton className={classes.tagButton} onClick={() => onImageSelect(sortedPhotos[activePhoto].id)}>\n                <RemoveRedEye />\n              </IconButton>\n            </React.Fragment>\n          }\n        />\n      </div>\n      {!singular &&\n      <MobileStepper\n        steps={sortedPhotos.length}\n        position='static'\n        activeStep={activePhoto}\n        classes={{\n          root: classes.mobileStepper,\n          dots: classes.dots\n        }}\n      />\n      }\n    </div>\n  )\n}\n\nSwipeShow.propTypes = {\n  // These two come from Material UI\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  // This is just the basic shape of the photo object\n  photos: PropTypes.arrayOf(PropTypes.shape({\n    img: PropTypes.string,\n    tags: PropTypes.array,\n    date: PropTypes.date\n  })),\n  transition: PropTypes.number,\n  onImageSelect: PropTypes.func.isRequired\n}\n\nSwipeShow.defaultProps = {\n  transition: 5000,\n  isFullScreen: false,\n  slides: []\n}\n\nexport default withStyles(style, { withTheme: true })(SwipeShow)\n","export default theme => ({\n  root: {\n    position: 'relative'\n  },\n  inner: {\n    position: 'relative'\n  },\n  photoWrapper: {\n    minHeight: 250,\n    height: 250\n  },\n  dateCaption: {\n    padding: theme.spacing.unit,\n    background: 'black',\n    color: 'white',\n    textAlign: 'center'\n  },\n  mobileStepper: {\n    // position: 'absolute',\n    // bottom: theme.spacing.unit,\n    // right: theme.spacing.unit\n  },\n  manualBack: {\n    color: 'white',\n    zIndex: 10,\n    position: 'absolute',\n    transform: 'translateY(-50%)',\n    left: 0,\n    top: '50%'\n  },\n  manualForward: {\n    color: 'white',\n    zIndex: 10,\n    position: 'absolute',\n    transform: 'translateY(-50%)',\n    right: 0,\n    top: '50%'\n  },\n  tagButton: {\n    color: 'rgba(255, 255, 255, 0.54)'\n  },\n  dots: {\n    margin: '0 auto'\n  }\n})\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  Button,\n  Typography,\n  DialogActions\n} from '@material-ui/core'\n// import { Menu as MenuIcon } from '@material-ui/icons'\nimport { withStyles } from '@material-ui/core/styles'\n\nconst style = theme => ({\n\n})\n\nconst DeleteDialog = ({ classes, title, message, onConfirm, open }) => (\n  <Dialog\n    className={classes.root}\n    disableBackdropClick\n    open={open}\n    disableEscapeKeyDown\n    maxWidth='xl'\n    aria-labelledby='confirmation-dialog-title'\n  >\n    <DialogTitle id='confirmation-dialog-title'>{title}</DialogTitle>\n    <DialogContent>\n      <Typography>\n        {message}\n      </Typography>\n\n    </DialogContent>\n    <DialogActions>\n      <Button onClick={() => onConfirm(false)} color='primary'>\n      No\n      </Button>\n      <Button onClick={() => onConfirm(true)} color='primary'>\n      Yes\n      </Button>\n    </DialogActions>\n  </Dialog>\n)\n\nDeleteDialog.propTypes = {\n  classes: PropTypes.object.isRequired,\n  open: PropTypes.bool,\n  title: PropTypes.string.isRequired,\n  message: PropTypes.string.isRequired,\n  onConfirm: PropTypes.func.isRequired\n}\n\nexport default withStyles(style)(DeleteDialog)\n","import React, { useState } from 'react'\nimport classNames from 'classnames'\nimport PropTypes from 'prop-types'\nimport {\n  GridList,\n  GridListTile,\n  GridListTileBar,\n  Snackbar,\n  Button,\n  Fab\n} from '@material-ui/core'\nimport {\n  Add as AddIcon,\n  Remove as RemoveIcon\n} from '@material-ui/icons'\nimport { withStyles } from '@material-ui/core/styles'\nimport style from './PhotoGrid.style'\nimport DeleteDialog from '../../components/dialogs/DeleteDialog'\nimport { formatDate } from '../../lib/datelib'\n\nconst PhotoGrid = ({ classes, photos, columns, multiSelect, onDelete, onTileClick, allowEdit }) => {\n  const [selectMode, setSelectMode] = useState(false)\n  const [selectedItems, setSelectedItems] = useState([])\n  const [deleteConfirm, setDeleteConfirm] = useState(false)\n\n  const handleAddToSelection = (e, id) => {\n    e.preventDefault()\n    e.stopPropagation()\n\n    setSelectMode(true)\n    toggleListItem(id)\n  }\n\n  const handleCancelSelection = () => {\n    setSelectMode(false)\n    setSelectedItems([])\n  }\n\n  const onDeleteConfirm = (confirmation) => {\n    setDeleteConfirm(false)\n    if (confirmation === true && selectedItems.length < photos.length) onDelete(selectedItems)\n    handleCancelSelection()\n  }\n\n  const toggleListItem = (id) => {\n    const index = selectedItems.indexOf(id)\n    if (index < 0) setSelectedItems([...selectedItems, id])\n    else {\n      const remaining = selectedItems.filter(arrId => arrId !== id)\n      if (remaining.length === 0) handleCancelSelection()\n      setSelectedItems(remaining)\n    }\n  }\n\n  const handlePhotoTap = (e, photo) => {\n    e.preventDefault()\n    e.stopPropagation()\n    // Select / deselect the item in edit mode\n    if (selectMode) toggleListItem(photo.id)\n    // navigate if tileClick selected\n    else onTileClick(photo.id)\n  }\n\n  const sortedPhotos = [...photos]\n  sortedPhotos.sort((a, b) => parseInt(b.date, 10) - parseInt(a.date, 10))\n\n  return (\n    <div>\n      <GridList cols={columns} cellHeight={200} className={classes.root}>\n        {sortedPhotos.map((photo, idx) => {\n          const selected = selectedItems.indexOf(photo.id) > -1\n          return (\n            <GridListTile\n              key={`gridTile${idx}`}\n              onClick={(e) => handlePhotoTap(e, photo)}\n              className={classNames(\n                classes.tile,\n                selectMode && !selected && classes.unSelectedTile,\n                selectMode && selected && classes.selectedTile\n              )}\n            >\n              <img src={photo.url || photo.base64} alt={photo.url} className={classes.img} />\n              {allowEdit && multiSelect && (\n                <Fab size='small' aria-label='Add' className={classes.addFab} onClick={(e) => handleAddToSelection(e, photo.id)}>\n                  {!selectMode || !selected ? <AddIcon /> : <RemoveIcon />}\n                </Fab>\n              )}\n              <GridListTileBar\n                title={<span>{formatDate(photo.date)}</span>}\n              />\n            </GridListTile>\n          )\n        })}\n      </GridList>\n      <Snackbar\n        open={selectMode}\n        autoHideDuration={null}\n        ContentProps={{\n          'aria-describedby': 'snackbar-fab-message-id',\n          className: classes.snackbarContent\n        }}\n        message={<span id='snackbar-fab-message-id'>{selectedItems.length} Photos selected</span>}\n        action={<div>\n          <Button color='inherit' size='small' onClick={() => setDeleteConfirm(true)}>\n                Delete\n          </Button>\n          <Button color='inherit' size='small' onClick={() => handleCancelSelection()}>\n                Cancel\n          </Button>\n        </div>\n        }\n        className={classes.snackbar}\n      />\n\n      <DeleteDialog\n        open={deleteConfirm}\n        onConfirm={onDeleteConfirm}\n        title={`Delete ${selectedItems.length} Photos`}\n        message='Are you sure you want to delete these photos?'\n      />\n    </div>\n\n  )\n}\n\nPhotoGrid.propTypes = {\n  classes: PropTypes.object.isRequired,\n  photos: PropTypes.array.isRequired,\n  columns: PropTypes.number,\n  allowEdit: PropTypes.bool,\n  multiSelect: PropTypes.bool,\n  onDelete: PropTypes.func,\n  onTileClick: PropTypes.func.isRequired\n}\nPhotoGrid.defaultProps = {\n  multiSelect: true,\n  columns: 2\n}\n\nexport default withStyles(style)(PhotoGrid)\n","\nexport default theme => ({\n  root: {\n\n  },\n  tile: {\n\n  },\n  addFab: {\n    position: 'absolute',\n    zIndex: 10,\n    top: theme.spacing.unit,\n    left: theme.spacing.unit,\n    opacity: 0.3\n  },\n  unSelectedTile: {\n    '& img': {\n      opacity: 0.3\n    }\n  },\n  selectedTile: {\n    padding: `${theme.spacing.unit * 2}px!important`,\n    '& img': {\n      opacity: 1\n    }\n  },\n  img: {\n\n  }\n})\n","import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\n// import classNames from 'classnames'\nimport {\n  CssBaseline,\n  AppBar,\n  Toolbar,\n  IconButton,\n  Typography,\n  Tabs,\n  Tab\n} from '@material-ui/core'\nimport {\n  ArrowBack as ArrowBackIcon,\n  Slideshow as SlideshowIcon,\n  AddAPhoto as AddCameraIcon,\n  MoreVert as MoreIcon\n} from '@material-ui/icons'\nimport { withStyles } from '@material-ui/core/styles'\nimport ContextMenu from '../../components/ContextMenu'\nimport MapDot from '../../components/maps/MapDot/MapDot'\nimport useNewImageMenu from '../../components/controls/useNewImageMenu'\n\nimport SeriesInfo from '../../components/SeriesInfo/SeriesInfo'\nimport SwipeShow from '../../components/SwipeShow/SwipeShow'\nimport PhotoGrid from '../../components/PhotoGrid/PhotoGrid'\nimport DeleteDialog from '../../components/dialogs/DeleteDialog'\nimport style from './SeriesView.style'\n\nconst SeriesView = ({\n  classes, series, onSlideshowStart, onChange, allowEdit,\n  onEditSeries, onDeletePhotos, onCameraAdd,\n  onDeleteSeries, onLibraryAdd, onTileClick, onMenuBack\n}) => {\n  const [contextEl, setContextEl] = useState()\n  const [deleteConfirm, setDeleteConfirm] = useState(false)\n\n  const { onDownThunk, onUpThunk, onBlock, menu } = useNewImageMenu(\n    () => onCameraAdd(series),\n    onLibraryAdd\n  )\n\n  const onDeleteConfirm = (confirmation) => {\n    setDeleteConfirm(false)\n    if (confirmation === true) onDeleteSeries(series.id)\n  }\n\n  const [listTypeTab, setListTypeTab] = useState(0)\n  return (\n    <div className={classes.root}>\n      <CssBaseline />\n      <AppBar position='static' className={classes.appBar}>\n        <Toolbar>\n          <IconButton className={classes.menuButton} color='inherit' onClick={onMenuBack} aria-label='Menu'>\n            <ArrowBackIcon />\n          </IconButton>\n          <Typography variant='h6' color='inherit' className={classes.grow}>\n           Series\n          </Typography>\n          {allowEdit && (\n            <IconButton\n              onClick={onBlock}\n              onMouseDown={onDownThunk(series)}\n              onMouseUp={onUpThunk(series)}\n              onTouchStart={onDownThunk(series)}\n              onTouchEnd={onUpThunk(series)}\n              className={classes.addPhotoButton}\n              color='inherit'\n              aria-label='Menu'\n            >\n              <AddCameraIcon />\n            </IconButton>\n          )}\n          <IconButton\n            className={classes.startSlideshowButton}\n            disabled={series.photos.length === 0}\n            color='inherit'\n            aria-label='Menu'\n            onClick={onSlideshowStart}\n          >\n            <SlideshowIcon />\n          </IconButton>\n          { allowEdit && (\n            <IconButton\n              aria-haspopup='true'\n              color='inherit'\n              onClick={event => setContextEl(event.currentTarget)}\n            >\n              <MoreIcon />\n            </IconButton>\n          )}\n\n          <ContextMenu anchorEl={contextEl} onClose={() => setContextEl(null)} menuItems={[\n            { text: 'Edit Series', action: onEditSeries },\n            { text: 'Delete Series', action: () => setDeleteConfirm(true) }\n          ]} />\n          {menu}\n        </Toolbar>\n        <Tabs variant='fullWidth'\n          value={listTypeTab}\n          onChange={(e, value) => setListTypeTab(value)}\n        >\n          <Tab label='Info' />\n          <Tab label='Map' />\n          <Tab label='Photos' />\n        </Tabs>\n      </AppBar>\n\n      <div className={classes.inner}>\n        {listTypeTab === 0 && (\n          <React.Fragment>\n            {series.photos.length > 0 && (\n              <SwipeShow\n                photos={series.photos}\n                onImageSelect={onTileClick}\n              />\n            )}\n            <SeriesInfo series={series} onChange={onChange} />\n          </React.Fragment>\n        )}\n        {listTypeTab === 2 && (\n          <PhotoGrid\n            photos={series.photos}\n            allowEdit={allowEdit}\n            onTileClick={onTileClick}\n            onDelete={onDeletePhotos}\n          />\n        )}\n      </div>\n\n      {listTypeTab === 1 && (\n        <MapDot\n          zoom={18}\n          longitude={series.location[1]}\n          latitude={series.location[0]}\n          direction={series.direction}\n        />\n      )}\n      <DeleteDialog\n        open={deleteConfirm}\n        onConfirm={onDeleteConfirm}\n        title='Delete Series'\n        message='Are you sure you want to delete this series? The record and all images associated with it will be gone forever.'\n      />\n    </div>\n  )\n}\n\nSeriesView.propTypes = {\n  classes: PropTypes.object.isRequired,\n  series: PropTypes.object,\n  allowEdit: PropTypes.bool,\n  // Action functions\n  onSlideshowStart: PropTypes.func.isRequired,\n  onChange: PropTypes.func.isRequired,\n  onDeletePhotos: PropTypes.func.isRequired,\n  onDeleteSeries: PropTypes.func.isRequired,\n  onCameraAdd: PropTypes.func.isRequired,\n  onEditSeries: PropTypes.func.isRequired,\n  onLibraryAdd: PropTypes.func.isRequired,\n  onTileClick: PropTypes.func.isRequired,\n  onMenuBack: PropTypes.func.isRequired\n}\n\nexport default withStyles(style)(SeriesView)\n","export default theme => ({\n  root: {\n    display: 'flex',\n    height: '100%',\n    flexDirection: 'column',\n    overflow: 'hidden'\n  },\n  appBar: {\n    flexGrow: 0\n  },\n  inner: {\n    position: 'relative',\n    flexGrow: 1,\n    overflowY: 'scroll',\n    '-webkit-overflow-scrolling': 'touch'\n  },\n  tabMenu: {\n    marginTop: theme.spacing.unit * 7\n  },\n  mapWrap: {\n    position: 'absolute',\n    height: '100%',\n    width: '100%',\n    top: 0,\n    left: 0\n  },\n  grow: {\n    flexGrow: 1\n  },\n  gridList: {\n    flexWrap: 'nowrap',\n    // Promote the list into his own layer on Chrome. This cost memory but helps keeping high FPS.\n    transform: 'translateZ(0)'\n  },\n  titleBar: {\n    display: 'flex',\n    padding: theme.spacing.unit\n  },\n  titleText: {\n    flexGrow: 1\n  },\n  menuButton: {\n    marginLeft: -12,\n    marginRight: 20\n  }\n})\n","\nimport React, { useState } from 'react'\nimport PropTypes from 'prop-types'\nimport {\n  CssBaseline,\n  AppBar,\n  Toolbar,\n  Button,\n  Typography,\n  FormLabel\n} from '@material-ui/core'\nimport {\n  Delete as DeleteIcon,\n  ArrowBack as ArrowBackIcon\n} from '@material-ui/icons'\nimport { withStyles } from '@material-ui/core/styles'\nimport Slider from '@material-ui/lab/Slider'\nimport TextAreaControl from '../../components/controls/TextAreaControl'\nimport TextFieldControl from '../../components/controls/TextFieldControl'\nimport MapDot from '../../components/maps/MapDot/MapDot'\nimport DeleteDialog from '../../components/dialogs/DeleteDialog'\nimport style from './SeriesEdit.style'\n\nconst SeriesEdit = ({ classes, series, onMenuBack, onChange, onDeleteSeries }) => {\n  const [rotation, setRotation] = useState(series.direction || -1)\n  const [deleteConfirm, setDeleteConfirm] = useState(false)\n\n  const onChangeFormState = (name, value) => {\n    onChange({\n      ...series,\n      [name]: value\n    })\n  }\n\n  const onRotationChange = (dir) => {\n    const newDir = dir >= 0 ? dir : null\n    onChangeFormState('direction', newDir)\n    setRotation(newDir)\n  }\n\n  const onMapChange = ({ latitude, longitude }) => {\n    onChangeFormState('location', [latitude, longitude])\n  }\n\n  const onDeleteConfirm = (confirmation) => {\n    setDeleteConfirm(false)\n    if (confirmation === true) onDeleteSeries(series.id)\n  }\n\n  return (\n    <div className={classes.root}>\n      <CssBaseline />\n      <AppBar position='static' className={classes.appBar}>\n        <Toolbar>\n          <Typography variant='h6' color='inherit' className={classes.grow}>\n           Edit Series Details\n          </Typography>\n          <Button className={classes.menuButton} color='inherit' onClick={onMenuBack} aria-label='Menu'>\n            Ok\n          </Button>\n        </Toolbar>\n      </AppBar>\n      <div className={classes.inner}>\n        <form className={classes.form} elevation={1} noValidate autoComplete='off'>\n          <TextFieldControl\n            className={classes.field}\n            label='Series Name'\n            placeholder='New Series'\n            permaEdit\n            allowEdit\n            defaultValue={series.name}\n            onChange={val => onChangeFormState('name', val)}\n          />\n          <TextAreaControl\n            className={classes.field}\n            label='Notes'\n            placeholder='Any instructions for the next person to add a picture to this series?'\n            multiline\n            rows={1}\n            rowsMax={4}\n            permaEdit\n            allowEdit\n            defaultValue={series.note}\n            onChange={val => onChangeFormState('note', val)}\n          />\n\n          <div className={classes.mapWrapper}>\n            <FormLabel className={classes.formLabel}>Location</FormLabel>\n            <div style={{ height: 200, marginBottom: 10 }}>\n              <MapDot\n                editable\n                className={classes.map}\n                direction={rotation > 0 ? rotation : null}\n                latitude={series.location[0]}\n                longitude={series.location[1]}\n                onChange={onMapChange}\n              />\n            </div>\n            <FormLabel className={classes.mapFormLabel}>Direction {rotation > 0 ? '' : '(off)'}</FormLabel>\n            <Slider\n              classes={{ container: classes.slider }}\n              value={rotation || -1}\n              min={-1}\n              max={360}\n              step={1}\n              onChange={(e, value) => onRotationChange(value)}\n            />\n          </div>\n          {/* <TextField\n            id='standard-name'\n            label='Name'\n            className={classes.textField}\n            value={series.name}\n            permaEdit\n            onChange={e => onChangeFormState('name', e.target.value)}\n            margin='dense'\n          />\n          <TextField\n            id='standard-multiline-flexible'\n            label='Notes'\n            multiline\n            placeholder='This photo is cool because...'\n            rows='4'\n            rowsMax='7'\n            value={series.note}\n            onChange={e => onChangeFormState('note', e.target.value)}\n            className={classes.textField}\n            margin='dense'\n          />\n\n          <div className={classes.mapWrapper}>\n            <FormLabel className={classes.formLabel}>Location</FormLabel>\n            <div style={{ height: 200 }}>\n              <MapDot\n                editable\n                className={classes.map}\n                direction={rotation > 0 ? rotation : null}\n                latitude={series.location[0]}\n                longitude={series.location[1]}\n                onChange={onMapChange}\n              />\n            </div>\n            <FormLabel className={classes.formLabel}>Direction {rotation > 0 ? '' : '(off)'}</FormLabel>\n            <Slider\n              classes={{ container: classes.slider }}\n              value={rotation}\n              min={-1}\n              max={360}\n              step={1}\n              onChange={(e, value) => onRotationChange(value)}\n            />\n          </div> */}\n        </form>\n      </div>\n      <DeleteDialog\n        open={deleteConfirm}\n        onConfirm={onDeleteConfirm}\n        title='Delete Series'\n        message='Are you sure you want to delete this series? The record and all images associated with it will be gone forever.'\n      />\n    </div>\n  )\n}\n\nSeriesEdit.propTypes = {\n  classes: PropTypes.object.isRequired,\n  series: PropTypes.object.isRequired,\n  // now some functions\n  onMenuBack: PropTypes.func.isRequired,\n  onChange: PropTypes.func.isRequired,\n  onDeleteSeries: PropTypes.func.isRequired\n}\n\nexport default withStyles(style)(SeriesEdit)\n","export default theme => ({\n  root: {\n\n  },\n  inner: {\n    position: 'relative',\n    flexGrow: 1,\n    overflowY: 'scroll',\n    '-webkit-overflow-scrolling': 'touch',\n    overflowX: 'hidden'\n  },\n  grow: {\n    flexGrow: 1\n  },\n  form: {\n    position: 'relative',\n    padding: theme.spacing.unit\n  },\n  field: {\n    marginBottom: theme.spacing.unit * 2\n  },\n  slider: {\n    paddingLeft: theme.spacing.unit,\n    paddingRight: theme.spacing.unit\n  },\n  textField: {\n    marginLeft: theme.spacing.unit,\n    marginRight: theme.spacing.unit,\n    width: '100%'\n  },\n  formLabel: {\n    display: 'block',\n    marginTop: theme.spacing.unit,\n    marginBottom: theme.spacing.unit\n  },\n  map: {\n  },\n  mapWrapper: {\n    margin: theme.spacing.unit\n  },\n  formControl: {\n    margin: theme.spacing.unit,\n    minWidth: 120\n  },\n  chips: {\n    display: 'flex',\n    flexWrap: 'wrap'\n  }\n})\n","import React, { useState, useEffect, useRef } from 'react'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\nimport {\n  Badge,\n  Typography,\n  IconButton,\n  CssBaseline,\n  GridListTile,\n  GridListTileBar,\n  MobileStepper,\n  Button\n} from '@material-ui/core'\nimport {\n  ArrowBack as ArrowBackIcon,\n  Label as LabelIcon,\n  PauseCircleFilled as PauseIcon,\n  PlayCircleFilled as PlayIcon,\n  KeyboardArrowLeft,\n  KeyboardArrowRight\n} from '@material-ui/icons'\nimport { withStyles } from '@material-ui/core/styles'\n\nimport Photo from '../../components/Photo/Photo'\nimport { formatDate } from '../../lib/datelib'\nimport style from './Slideshow.style'\nimport useComponentSize from '../../lib/useComponentSize'\n\nconst Slideshow = ({ classes, theme, onCancel, photos, transition }) => {\n  const { activeStep, lastStep, handleForward, handleBack, paused, pause, play } = useStepper(photos.length, transition)\n  const [showXYTags, setShowXYTags] = useState(false)\n\n  const refImgWrap = useRef(null)\n  const { height, width } = useComponentSize(refImgWrap)\n\n  return (\n    <div className={classes.root}>\n      <CssBaseline />\n      <div ref={refImgWrap} className={classes.slideContainer}>\n        {photos.map((slide, idx) => (\n          <GridListTile\n            key={`slide-${idx}`}\n            className={classNames(\n              classes.slide,\n              activeStep === idx && classes.active,\n              lastStep === idx && classes.last\n            )}\n            onClick={() => setShowXYTags(!showXYTags)}\n            style={{\n              height,\n              width,\n              transition: theme.transitions.create(['opacity'], { duration: 1 / 4 * transition })\n            }}\n          >\n            <Photo photo={slide} className={classes.photo} showTags={showXYTags} />\n            <Typography className={classes.labelBadge} >\n            Tags: {showXYTags ? 'On ' : 'Off '}\n              <Badge color='secondary' badgeContent={photos[activeStep].tags.filter(tag => tag.coords).length}>\n                <LabelIcon color='inherit' />\n              </Badge>\n            </Typography>\n\n            <GridListTileBar\n              titlePosition='top'\n              title={(\n                <Typography color='inherit' variant='caption'>\n                  <IconButton className={classes.iconButton} onClick={(e) => onCancel()}>\n                    <ArrowBackIcon />\n                  </IconButton>\n                  {formatDate(slide.date)}\n                </Typography>\n              )}\n              subtitle={<em>{paused ? 'Paused' : '    '}</em>}\n              actionIcon={paused ? (\n                <IconButton className={classes.iconButton} onClick={(e) => {\n                  e.preventDefault()\n                  e.stopPropagation()\n                  play()\n                }}>\n                  <PlayIcon />\n                </IconButton>\n              ) : (\n                <IconButton className={classes.iconButton} onClick={(e) => {\n                  e.preventDefault()\n                  e.stopPropagation()\n                  pause()\n                }}>\n                  <PauseIcon />\n                </IconButton>\n              )}\n            />\n          </GridListTile>\n        ))}\n        <IconButton size='small' className={classes.manualBack} onClick={handleBack} color='inherit'>\n          {theme.direction === 'rtl' ? <KeyboardArrowRight /> : <KeyboardArrowLeft />}\n        </IconButton>\n        <IconButton size='small' className={classes.manualForward} onClick={handleForward} color='inherit'>\n          {theme.direction === 'rtl' ? <KeyboardArrowLeft /> : <KeyboardArrowRight />}\n        </IconButton>\n      </div>\n\n      <MobileStepper\n        steps={photos.length}\n        position='static'\n        activeStep={activeStep}\n        classes={{\n          root: classes.mobileStepper,\n          dotActive: classes.dotActive\n        }}\n        nextButton={\n          <Button color='inherit' size='small' onClick={handleForward} disabled={activeStep === photos.length - 1}>\n            Next\n            {theme.direction === 'rtl' ? <KeyboardArrowLeft /> : <KeyboardArrowRight />}\n          </Button>\n        }\n        backButton={\n          <Button color='inherit' size='small' onClick={handleBack} disabled={activeStep === 0}>\n            {theme.direction === 'rtl' ? <KeyboardArrowRight /> : <KeyboardArrowLeft />}\n            Back\n          </Button>\n        }\n      />\n    </div>\n  )\n}\n\nSlideshow.propTypes = {\n  // These two come from Material UI\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  // We might want to go full screen\n  isFullScreen: PropTypes.bool,\n  // This is just the basic shape of the photo object\n  photos: PropTypes.arrayOf(PropTypes.shape({\n    img: PropTypes.string,\n    tags: PropTypes.array,\n    date: PropTypes.date\n  })),\n  transition: PropTypes.number,\n  onCancel: PropTypes.func.isRequired\n}\n\nSlideshow.defaultProps = {\n  transition: 5000,\n  isFullScreen: false,\n  slides: []\n}\n\nexport default withStyles(style, { withTheme: true })(Slideshow)\n\n/**\n * Custom React Hook for all our timer handling\n */\nconst useStepper = (num, interval) => {\n  const [activeStep, setActiveStep] = useState(0)\n  const [paused, setPaused] = useState(false)\n  const [timer, setTimer] = useState(null)\n  const [lastStep, setLastStep] = useState(0)\n\n  const handleForward = () => {\n    setLastStep(activeStep)\n    if (activeStep + 1 >= num) setActiveStep(0)\n    else setActiveStep(activeStep + 1)\n    if (!paused) {\n      destroyTimer()\n      createTimer()\n    }\n  }\n  const handleBack = () => {\n    setLastStep(activeStep)\n    if (activeStep - 1 < 0) setActiveStep(num - 1)\n    else setActiveStep(activeStep - 1)\n    if (!paused) {\n      destroyTimer()\n      createTimer()\n    }\n  }\n\n  const pause = () => {\n    destroyTimer()\n    setPaused(true)\n  }\n  const play = () => {\n    setPaused(false)\n    destroyTimer()\n    createTimer()\n  }\n\n  const createTimer = () => {\n    const newTimer = window.setInterval(\n      // We need to use the alternate notation for the useState function\n      // because setInterval will only have access to the activeStep it was\n      // initialized with\n      () => setActiveStep(oldStep => {\n        setLastStep(oldStep)\n        return (oldStep + 1 >= num) ? 0 : oldStep + 1\n      })\n      , interval\n    )\n    setTimer(newTimer)\n  }\n  const destroyTimer = () => {\n    window.clearInterval(timer)\n    setTimer(null)\n  }\n\n  useEffect(() => {\n    createTimer()\n    return () => {\n      destroyTimer()\n    }\n  }, []) // Pass in empty array to run useEffect only on mount.\n\n  return { activeStep, lastStep, handleForward, handleBack, setActiveStep, paused, pause, play }\n}\n","// import { fade } from '@material-ui/core/styles/colorManipulator'\n\nexport default theme => ({\n  root: {\n    // maxWidth: 400,\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column'\n  },\n  swipeAble: {\n    height: '100%'\n  },\n  slideContainer: {\n    flexGrow: 1\n  },\n  mobileStepper: {\n    flexGrow: 0,\n    background: theme.palette.grey[800],\n    color: theme.palette.getContrastText(theme.palette.grey[800])\n  },\n  slide: {\n    top: 0,\n    zIndex: 0,\n    opacity: 0,\n    position: 'absolute',\n    display: 'block',\n    overflow: 'hidden',\n    width: '100%',\n    height: '100%',\n    minHeight: 300\n  },\n  dotActive: {\n    background: 'white'\n  },\n  iconButton: {\n    color: 'white'\n  },\n  active: {\n    zIndex: 5,\n    opacity: 1\n  },\n  last: {\n    opacity: 1,\n    zIndex: 4\n  },\n  tagContainer: {\n\n  },\n  labelBadge: {\n    color: 'white',\n    zIndex: 10,\n    position: 'absolute',\n    right: theme.spacing.unit * 2,\n    bottom: theme.spacing.unit,\n    opacity: 0.8\n  },\n  tagChip: {\n    // height: theme.spacing.unit * 3,\n    marginRight: theme.spacing.unit,\n    fontSize: 10,\n    height: theme.spacing.unit * 2,\n    padding: theme.spacing.unit / 2\n  },\n  xyTagChip: {\n    position: 'absolute',\n    fontSize: theme.spacing.unit,\n    height: theme.spacing.unit * 2\n  },\n  manualBack: {\n    color: 'white',\n    zIndex: 10,\n    position: 'absolute',\n    transform: 'translateY(-50%)',\n    left: 0,\n    top: '50%'\n  },\n  manualForward: {\n    color: 'white',\n    zIndex: 10,\n    position: 'absolute',\n    transform: 'translateY(-50%)',\n    right: 0,\n    top: '50%'\n  }\n})\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\nimport uuid from 'uuid/v4'\nimport {\n  Paper,\n  TextField,\n  Typography,\n  MenuItem\n} from '@material-ui/core'\nimport Select from 'react-select'\nimport CreatableSelect from 'react-select/lib/Creatable'\nimport { withStyles } from '@material-ui/core/styles'\nimport TagChip from '../TagChip'\nimport useFormFieldState from './useFormFieldState'\nimport style from './TagControl.style'\n\n/**\n * Just to be clear: the state here is being stored as []\n */\nconst TagControl = ({ classes, defaultValue, allowEdit, onChange: onChangeExt, permaEdit, hint, tagConfig, group, className }) => {\n  const {\n    editing, value, onChange, Header\n  } = useFormFieldState(defaultValue, allowEdit, onChangeExt, permaEdit)\n\n  const onSelectChange = (inputValue, { action, removedValue, option, ...other }) => {\n    // If this was the last tag then close the menu\n    switch (action) {\n      case 'clear':\n        onChange([])\n        break\n      case 'remove-value':\n        // Remember we need to potentially remove it from the old AND the new\n        onChange(value.filter(val => val.id !== removedValue.value))\n        break\n      case 'select-option':\n        const newVal = {\n          ...tagConfig.values.find(tcv => tcv.id === option.value),\n          typeId: tagConfig.id\n        }\n        onChange([...value, newVal])\n        break\n      case 'create-option':\n        const newLabel = inputValue.find(v => v.__isNew__).value\n        const newCreateVal = {\n          label: newLabel,\n          id: uuid(),\n          typeId: tagConfig.id\n        }\n        onChange([...value, newCreateVal])\n        break\n      default:\n        break\n    }\n  }\n\n  const SingleValue = ({ removeProps, data }) => (\n    <TagChip tag={data} onDelete={removeProps.onClick} group={group} edit />\n  )\n  SingleValue.propTypes = {\n    removeProps: PropTypes.any,\n    data: PropTypes.any\n  }\n\n  const MultiValue = ({ removeProps, data }) => (\n    <TagChip tag={data} onDelete={removeProps.onClick} group={group} edit />\n  )\n  MultiValue.propTypes = {\n    removeProps: PropTypes.any,\n    data: PropTypes.any\n  }\n\n  // Filter to just this tag type\n  const tagValues = value.filter(tag => tag.typeId === tagConfig.id)\n  // Now format it as {label, value: id} for react-select\n  const selectOptions = tagValues.map(val => ({ label: val.label, value: val.id }))\n\n  // Filter out things we haven't chosen yet\n  // Also transform the options into a label/value pair for react-select\n  const remainingTags = tagConfig.values\n    .filter(val => tagValues.map(t => t.id).indexOf(val.id) === -1)\n    .map(val => ({ label: val.label, value: val.id }))\n\n  // console.log('TAG DEBUG', { value, tagValues, tagConfig })\n\n  return (\n    <div className={classNames(classes.root, editing && classes.rootEdit, className)}>\n      <Header>{tagConfig.label}</Header>\n      {!(editing || permaEdit)\n        ? <div className={classes.tagContainer}>\n          {tagValues.map((tag, idx) => (\n            <TagChip tag={tag} key={`tagchip${idx}`} group={group} edit={editing} />\n          ))}\n        </div>\n        : null\n      }\n      { (editing || permaEdit) && !tagConfig.allowAdditions && (\n        <Select\n          options={remainingTags}\n          classes={classes}\n          components={{\n            Control,\n            Menu,\n            MultiValue,\n            NoOptionsMessage,\n            Option,\n            Placeholder,\n            SingleValue,\n            ValueContainer\n          }}\n          value={selectOptions}\n          isClearable={false}\n          onChange={onSelectChange}\n          placeholder='Select Tags'\n          isMulti\n          isSearchable\n        />\n      ) }\n      { (editing || permaEdit) && tagConfig.allowAdditions && (\n        <CreatableSelect\n          options={remainingTags}\n          classes={classes}\n          components={{\n            Control,\n            Menu,\n            MultiValue,\n            NoOptionsMessage,\n            Option,\n            Placeholder,\n            SingleValue,\n            ValueContainer\n          }}\n          value={selectOptions}\n          isClearable={false}\n          onChange={onSelectChange}\n          placeholder='Select Tags'\n          isMulti\n          isSearchable\n        />\n      )}\n      {hint && <Typography variant='caption' className={classes.hint}>{hint}</Typography>}\n    </div>\n  )\n}\n\nTagControl.propTypes = {\n  classes: PropTypes.object.isRequired,\n  className: PropTypes.string,\n  hint: PropTypes.string,\n  defaultValue: PropTypes.array,\n  allowEdit: PropTypes.bool,\n  permaEdit: PropTypes.bool,\n  onChange: PropTypes.func.isRequired,\n  tagConfig: PropTypes.object,\n  group: PropTypes.number\n}\n\nexport default withStyles(style)(TagControl)\n\nfunction Control (props) {\n  return (\n    <TextField\n      fullWidth\n      InputProps={{\n        inputComponent,\n        inputProps: {\n          className: props.selectProps.classes.input,\n          inputRef: props.innerRef,\n          children: props.children,\n          ...props.innerProps\n        }\n      }}\n      {...props.selectProps.textFieldProps}\n    />\n  )\n}\n\nconst NoOptionsMessage = ({ innerProps, selectProps, children }) => (\n  <Typography\n    color='textSecondary'\n    className={selectProps.classes.noOptionsMessage}\n    {...innerProps}\n  >\n    {children}\n  </Typography>\n)\n\nconst Menu = ({ selectProps, innerProps, children }) => (\n  <Paper square className={selectProps.classes.paper} {...innerProps}>\n    {children}\n  </Paper>\n)\n\nconst inputComponent = ({ inputRef, ...props }) => <div ref={inputRef} {...props} />\n\nconst Placeholder = (props) => (\n  <Typography\n    color='textSecondary'\n    className={props.selectProps.classes.placeholder}\n    {...props.innerProps}\n  >\n    {props.children}\n  </Typography>\n)\n\nconst Option = ({ innerRef, isFocused, isSelected, innerProps, children }) => (\n  <MenuItem\n    buttonRef={innerRef}\n    selected={isFocused}\n    component='div'\n    style={{ fontWeight: isSelected ? 500 : 400 }}\n    {...innerProps}\n  >\n    {children}\n  </MenuItem>\n)\n\nconst ValueContainer = ({ selectProps, children }) => (\n  <div className={selectProps.classes.valueContainer}>{children}</div>\n)\nValueContainer.propTypes = {\n  selectProps: PropTypes.any,\n  children: PropTypes.any\n}\n","export default theme => ({\n  root: {\n  },\n  tagContainer: {\n  },\n  formControl: {\n    width: '100%'\n  },\n  actionButtons: {\n    textAlign: 'right'\n  },\n  noOptionsMessage: {\n    padding: `${theme.spacing.unit}px ${theme.spacing.unit * 2}px`\n  },\n  singleValue: {\n    fontSize: 16\n  },\n  placeholder: {\n    position: 'absolute',\n    left: 2,\n    fontSize: 16\n  },\n  input: {\n    display: 'flex',\n    padding: 0\n  },\n  valueContainer: {\n    display: 'flex',\n    flexWrap: 'wrap',\n    flex: 1,\n    alignItems: 'center',\n    overflow: 'hidden'\n  },\n  paper: {\n    position: 'absolute',\n    zIndex: 1,\n    marginTop: theme.spacing.unit,\n    left: 0,\n    right: 0\n  }\n})\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\nimport {\n  TextField,\n  Typography\n} from '@material-ui/core'\nimport useFormFieldState from './useFormFieldState'\nimport { withStyles } from '@material-ui/core/styles'\nimport { timestampToHTML5Input, HTML5InputToTimestamp } from '../../lib/datelib'\n\nconst style = theme => ({\n  root: {\n  },\n  rootEdit: {\n  },\n  formControl: {\n    width: '100%'\n  },\n  textBody: {\n    whiteSpace: 'pre-line'\n  },\n  actionButtons: {\n    textAlign: 'right'\n  }\n})\n\nconst DateControl = ({\n  classes,\n  label,\n  defaultValue,\n  permaEdit,\n  hint,\n  allowEdit,\n  onChange: onChangeExt,\n  className\n}) => {\n  const { editing, value, onChange, Header } = useFormFieldState(defaultValue, allowEdit, onChangeExt, permaEdit)\n  const disableField = !(editing || permaEdit)\n  return (\n    <div className={classNames(classes.root, editing && classes.rootEdit, className)}>\n      <Header>{label}</Header>\n      <TextField\n        type='datetime-local'\n        fullWidth\n        disabled={disableField}\n        value={timestampToHTML5Input(value)}\n        className={classes.textField}\n        onChange={(e) => onChange(HTML5InputToTimestamp(e.target.value))}\n      />\n      {hint && <Typography variant='caption' className={classes.hint}>{hint}</Typography>}\n    </div>\n  )\n}\n\nDateControl.propTypes = {\n  classes: PropTypes.object.isRequired,\n  className: PropTypes.string,\n  label: PropTypes.string.isRequired,\n  hint: PropTypes.string,\n  defaultValue: PropTypes.string,\n  allowEdit: PropTypes.bool,\n  permaEdit: PropTypes.bool,\n  onChange: PropTypes.func.isRequired\n}\n\nexport default withStyles(style)(DateControl)\n","import React, { useContext } from 'react'\nimport PropTypes from 'prop-types'\nimport {\n  Button,\n  Dialog,\n  IconButton,\n  DialogTitle,\n  DialogContent,\n  Typography,\n  DialogActions,\n  Divider,\n  List,\n  ListItem,\n  ListItemText\n} from '@material-ui/core'\nimport TagClass from '../../lib/Tags'\nimport { Close as CloseIcon } from '@material-ui/icons'\nimport { withStyles } from '@material-ui/core/styles'\nimport TagControl from '../controls/TagControl'\nimport TextAreaControl from '../controls/TextAreaControl'\nimport DateControl from '../controls/DateControl'\nimport style from './PhotoInfo.style'\nimport { SeriesConfig } from '../../contexts'\n\n// import DateControl from './controls/DateControl'\nconst PhotoInfo = ({ classes, allowEdit, photo, onClose, open, onChange }) => {\n  const seriesConfig = useContext(SeriesConfig)\n  const onChangeLocal = (fieldName) => (val) => {\n    onChange({ ...photo, [fieldName]: val })\n  }\n\n  const tagInst = new TagClass(seriesConfig, photo.tags)\n\n  return (\n    <Dialog\n      fullScreen\n      fullWidth\n      onClose={onClose}\n      aria-labelledby='customized-dialog-title'\n      open={open}\n    >\n\n      <DialogTitle disableTypography className={classes.dlgTitleContainer}>\n        <Typography variant='title' className={classes.dlgTitle}>\n          Photo Properties\n        </Typography>\n        <IconButton onClick={onClose}>\n          <CloseIcon />\n        </IconButton>\n      </DialogTitle>\n      <DialogContent>\n        <DateControl\n          className={classes.field}\n          label='Photo taken on'\n          defaultValue={photo.date}\n          onChange={onChangeLocal('date')}\n          allowEdit={allowEdit}\n        />\n\n        <TextAreaControl\n          label='Photo Note'\n          defaultValue={photo.note}\n          collapsed\n          collapsedHeight={50}\n          onChange={onChangeLocal('note')}\n          allowEdit={allowEdit}\n        />\n\n        <Typography variant='subtitle1'>Category tags</Typography>\n\n        {tagInst.seriesConfig.getNonXYTagTypes().map((tt, idx) => (\n          <TagControl\n            className={classes.field}\n            defaultValue={photo.tags}\n            tagConfig={tt}\n            group={tagInst.seriesConfig.getTagTypeIndex(tt.id)}\n            allowEdit={allowEdit}\n            onChange={onChangeLocal('tags')}\n            key={`tagtype-${idx}`}\n          />\n        ))}\n\n        <Typography className={classes.heading}>Metadata</Typography>\n        <Divider />\n        <List className={classes.list}>\n          {Object.keys(photo.meta).map((key, idx) => seriesConfig.meta[key] ? (\n            <ListItem key={`metadata${idx}`}>\n              <ListItemText\n                primary={seriesConfig.meta[key].label}\n                secondary={seriesConfig.meta[key].render(photo.meta[key])}\n              />\n            </ListItem>\n          ) : null\n          )}\n        </List>\n\n      </DialogContent>\n\n      <DialogActions>\n        <Button onClick={onClose} color='primary'>\n        Back\n        </Button>\n      </DialogActions>\n    </Dialog>\n  )\n}\n\nPhotoInfo.propTypes = {\n  classes: PropTypes.object.isRequired,\n  allowEdit: PropTypes.bool,\n  onClose: PropTypes.func.isRequired,\n  open: PropTypes.bool,\n  photo: PropTypes.object.isRequired,\n  // Now some action tags\n  onChange: PropTypes.func.isRequired\n}\n\nexport default withStyles(style)(PhotoInfo)\n","\nexport default theme => ({\n  root: {\n    height: '90%',\n    width: '85%'\n  },\n  dlgTitleContainer: {\n    display: 'flex',\n    padding: 0\n  },\n  dlgTitle: {\n    flexGrow: 1,\n    paddingTop: theme.spacing.unit * 2,\n    paddingBottom: theme.spacing.unit,\n    paddingLeft: theme.spacing.unit * 3\n  },\n  field: {\n    marginBottom: theme.spacing.unit * 2\n  }\n})\n","import React, { useState, useContext } from 'react'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\nimport { CssBaseline,\n  Button,\n  Typography,\n  AppBar,\n  Toolbar,\n  IconButton,\n  Badge,\n  Chip\n} from '@material-ui/core'\nimport {\n  ArrowBack as ArrowBackIcon,\n  Info as InfoIcon,\n  Label as LabelIcon\n} from '@material-ui/icons'\nimport { withStyles } from '@material-ui/core/styles'\nimport PhotoInfo from '../../components/PhotoInfo/PhotoInfo'\nimport style from './PhotoViewTool.style'\nimport { formatDate } from '../../lib/datelib'\nimport Photo from '../../components/Photo/Photo'\nimport { SeriesConfig } from '../../contexts'\nimport Tags from '../../lib/Tags'\n\nconst STATES = {\n  VIEWPIC: 0,\n  SHOWINFO: 1,\n  SHOWTAGS: 2,\n  EDITTAGS: 3,\n  FIRSTAGEDIT: 4\n}\n\nconst PhotoViewTool = ({ classes, photo, onMenuBack, onUpdatePhoto, allowEdit, newPhoto }) => {\n  const seriesConfig = useContext(SeriesConfig)\n  // This is a special copy of the photo so we can play around with the XY tags and undo\n  // if we need to\n  const [tempPhoto, setTempPhoto] = useState(photo)\n  const [mode, setMode] = useState({\n    current: newPhoto ? STATES.FIRSTAGEDIT : STATES.VIEWPIC,\n    last: null\n  })\n\n  const tagsClass = new Tags(seriesConfig, tempPhoto.tags)\n\n  const changeMode = (desired) => {\n    setMode({ current: desired, last: mode.current })\n  }\n\n  const onCommitTags = () => {\n    changeMode(STATES.SHOWTAGS)\n    onUpdatePhoto(tempPhoto)\n  }\n\n  const onCommitTagsFirst = () => {\n    onUpdatePhoto(tempPhoto)\n    onMenuBack()\n  }\n\n  const onCancelTagEdit = () => {\n    changeMode(STATES.SHOWTAGS)\n    setTempPhoto(photo)\n  }\n\n  const photoClick = (e) => {\n    if (mode.current === STATES.VIEWPIC) {\n      e.preventDefault()\n      e.stopPropagation()\n      changeMode(STATES.SHOWINFO)\n    }\n  }\n\n  return (\n    <div className={classes.root}>\n      <CssBaseline /> {/* You only need this in a root element. Don't put it anywhere else in the dom */}\n      <AppBar position='static' className={classes.appBar}>\n        <Toolbar>\n          {mode.current !== STATES.FIRSTAGEDIT && (\n            <IconButton\n              className={classes.menuButton}\n              color='inherit'\n              aria-label='Menu'\n              onClick={() => onMenuBack()}\n            >\n              <ArrowBackIcon />\n            </IconButton>\n          )}\n          <div className={classes.grow}>\n            <Typography variant='h6' color='inherit' >\n              {newPhoto ? 'Add Tags' : `Photo View`}\n            </Typography>\n            <Typography variant='subtitle2' color='inherit'>\n              {formatDate(photo.date, 'lll')}\n            </Typography>\n          </div>\n\n          { mode.current === STATES.EDITTAGS &&\n          <Button color='inherit' onClick={onCancelTagEdit}>\n            Cancel\n          </Button>\n          }\n\n          { mode.current === STATES.EDITTAGS &&\n          <Button color='inherit' onClick={onCommitTags}>\n            Save\n          </Button>\n          }\n          { mode.current === STATES.FIRSTAGEDIT &&\n          <Button color='inherit' onClick={onCommitTagsFirst}>\n            Next\n          </Button>\n          }\n\n          { allowEdit && mode.current === STATES.SHOWTAGS &&\n          <Button color='inherit' onClick={() => changeMode(STATES.EDITTAGS)}>\n            Edit\n          </Button>\n          }\n\n          { (mode.current !== STATES.EDITTAGS && mode.current !== STATES.FIRSTAGEDIT) &&\n          <IconButton color='inherit'\n            className={classNames(classes.tagButton, mode.current === STATES.SHOWTAGS && classes.activeButton)}\n            onClick={() => changeMode(mode.current === STATES.SHOWTAGS ? STATES.VIEWPIC : STATES.SHOWTAGS)}\n          >\n            <Badge className={classes.margin} badgeContent={tagsClass.getXYTags().length} color='secondary'>\n              <LabelIcon />\n            </Badge>\n          </IconButton>\n          }\n\n          { (mode.current !== STATES.EDITTAGS && mode.current !== STATES.FIRSTAGEDIT) &&\n          <IconButton color='inherit'\n            className={classNames(classes.infoButton, mode.current === STATES.SHOWINFO && classes.activeButton)}\n            onClick={() => changeMode(mode.current === STATES.SHOWINFO ? STATES.VIEWPIC : STATES.SHOWINFO)}\n          >\n            <InfoIcon />\n          </IconButton>\n          }\n\n        </Toolbar>\n      </AppBar>\n      <div className={classes.inner} onClick={photoClick}>\n        <Photo\n          showTags={mode.current === STATES.SHOWTAGS}\n          photo={tempPhoto}\n          edit={allowEdit && (mode.current === STATES.EDITTAGS || mode.current === STATES.FIRSTAGEDIT)}\n          onChange={setTempPhoto}\n          onCommitTags={onCommitTags}\n        />\n        {mode.current === STATES.SHOWINFO && (\n          <div className={classes.infoWindow}>\n            Esse nisi adipisicing nulla deserunt ut adipisicing officia fugiat culpa excepteur amet et mollit magna. Voluptate cupidatat deserunt est ea esse duis. Aute cillum pariatur pariatur magna consectetur excepteur. Sit pariatur nostrud labore ex mollit mollit nisi reprehenderit. Id in sint commodo commodo ipsum fugiat aliqua culpa velit ad sint ut. Magna ut nostrud non do minim. Consequat ex duis elit eu cillum pariatur in nostrud est reprehenderit.\n          </div>\n        )}\n      </div>\n      <PhotoInfo\n        open={mode.current === STATES.SHOWINFO}\n        photo={photo}\n        allowEdit={allowEdit}\n        onChange={onUpdatePhoto}\n        onClose={() => changeMode(mode.last)}\n      />\n      { (mode.current === STATES.EDITTAGS || mode.current === STATES.FIRSTAGEDIT) && (\n        <Chip\n          label='Tap to tag features...'\n          onClick={() => {}}\n          className={classes.tipChip}\n        />\n      )}\n\n    </div>\n  )\n}\n\nPhotoViewTool.propTypes = {\n  classes: PropTypes.object.isRequired,\n  photo: PropTypes.object.isRequired,\n  allowEdit: PropTypes.bool,\n  newPhoto: PropTypes.bool,\n  // Now some action functions\n  onMenuBack: PropTypes.func.isRequired,\n  onUpdatePhoto: PropTypes.func.isRequired\n}\n\nexport default withStyles(style)(PhotoViewTool)\n","export default theme => ({\n  root: {\n    display: 'flex',\n    height: '100%',\n    flexDirection: 'column',\n    overflow: 'hidden'\n  },\n  appBar: {\n    flexGrow: 0\n  },\n  grow: {\n    flexGrow: 1\n  },\n  inner: {\n    flex: '1 1',\n    position: 'relative'\n  },\n  tabMenu: {\n    marginTop: theme.spacing.unit * 7\n  },\n  tipChip: {\n    position: 'absolute',\n    zIndex: 11,\n    bottom: 20,\n    left: '50%',\n    opacity: 0.6,\n    transform: 'translateX(-50%)'\n  },\n  // tagButton: {\n  //   zIndex: 10,\n  //   color: 'white',\n  //   position: 'absolute',\n  //   fontSize: '2.5rem',\n  //   top: 10,\n  //   left: 10,\n  //   opacity: 0.8\n  // },\n  // infoButton: {\n  //   zIndex: 10,\n  //   color: 'white',\n  //   position: 'absolute',\n  //   top: 10,\n  //   right: 10,\n  //   opacity: 0.8\n  // },\n  activeButton: {\n    color: theme.palette.secondary.main,\n    opacity: 1\n  }\n})\n","import uuid from 'uuid/v4'\nimport { convertJSDatetoTimestamp } from './datelib'\nimport SeriesConfig from './SeriesConfig'\n\nclass Photo {\n  constructor (seriesConfig, photo) {\n    this.config = new SeriesConfig(seriesConfig)\n    if (photo) this.photo = photo\n    else {\n      this.photo = this.newPhoto()\n    }\n  }\n\n  setMeta = () => {\n    this.meta = this.config.getPhotoMeta()\n  }\n\n  newPhoto = () => ({\n    id: uuid(),\n    url: null,\n    base64: null,\n    featured: false,\n    date: convertJSDatetoTimestamp(new Date()),\n    rawData: { },\n    note: null,\n    meta: this.config.getPhotoMeta(),\n    tags: []\n  })\n}\n\nexport default Photo\n","import uuid from 'uuid/v4'\nimport SeriesConfig from './SeriesConfig'\n\nclass Series {\n  constructor (seriesConfig, series) {\n    this.config = new SeriesConfig(seriesConfig)\n    if (series) this.series = series\n    else {\n      this.series = this.newSeries()\n    }\n  }\n\n  setMeta = () => {\n    this.meta = this.config.getSeriesMeta()\n  }\n\n  newSeries = () => ({\n    id: uuid(),\n    featured: false,\n    name: null,\n    meta: this.config.getSeriesMeta(),\n    note: null,\n    location: [49.3050394, -123.1398254],\n    direction: null,\n    photos: []\n  })\n}\n\nexport default Series\n","import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\nimport { Typography } from '@material-ui/core'\nimport Slider from '@material-ui/lab/Slider'\n// import { Menu as MenuIcon } from '@material-ui/icons'\nimport { withStyles } from '@material-ui/core/styles'\n\nconst style = theme => ({\n  root: {\n    color: 'white',\n    zIndex: 10,\n    display: 'flex',\n    flexDirection: 'column',\n    position: 'absolute',\n    height: '50%',\n    top: '45%',\n    left: '0',\n    transform: 'translateY(-50%)'\n  },\n  sliderLabel: {\n    display: 'block',\n    flexGrow: 1,\n    textAlign: 'center',\n    padding: theme.spacing.unit\n  },\n  container: {\n    padding: '10px 36px'\n  },\n  track: {\n    width: `4px!important`,\n    background: 'white'\n  },\n  thumb: {\n    background: 'white',\n    width: 30,\n    height: 30\n\n  }\n})\n\nconst PhotoFadeSlider = ({ classes, defaultValue, onChange }) => {\n  // we control the state internally so we get a smooth experience\n  const [slider, setSlider] = useState(defaultValue)\n\n  const onSliderMove = (event, value) => {\n    setSlider(value)\n    // send it back if we need to\n    onChange(value)\n  }\n\n  return (\n    <div className={classes.root}>\n      <Typography className={classes.sliderLabel} color='inherit' variant='caption'>New</Typography>\n      <Slider\n        classes={{\n          container: classes.container,\n          track: classes.track,\n          thumb: classes.thumb\n        }}\n        value={slider}\n        aria-labelledby='label'\n        onChange={onSliderMove}\n        vertical\n      />\n      <Typography className={classes.sliderLabel} color='inherit' variant='caption'>Reference</Typography>\n    </div>\n  )\n}\n\nPhotoFadeSlider.propTypes = {\n  classes: PropTypes.object.isRequired,\n  defaultValue: PropTypes.number,\n  onChange: PropTypes.func\n}\n\nPhotoFadeSlider.defaultProps = {\n  defaultValue: 100,\n  onChange: () => {}\n}\n\nexport default withStyles(style)(PhotoFadeSlider)\n","import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\nimport {\n  CssBaseline,\n  Snackbar,\n  Button\n} from '@material-ui/core'\nimport Photo from '../../components/Photo/Photo'\nimport PhotoFadeSlider from '../../components/controls/PhotoFadeSlider'\nimport { withStyles } from '@material-ui/core/styles'\nimport style from './PhotoReviewTool.style'\n\nconst PhotoReviewTool = ({\n  classes, captured, defaultRefPhotoId, photos,\n  onConfirm, onCancel, onRetry\n}) => {\n  const newRefPhoto = defaultRefPhotoId\n    ? photos.find(p => p.id === defaultRefPhotoId)\n    : photos && photos.length > 0 ? photos[0] : null\n\n  const [refPhoto, setRefPhoto] = useState(newRefPhoto)\n  const [slider, setSlider] = useState(100)\n\n  return (\n    <div className={classes.root}>\n      <CssBaseline />\n      { Boolean(refPhoto) && (\n        <PhotoFadeSlider defaultValue={100} onChange={setSlider} />\n      )}\n\n      <div className={classes.captured}>\n        <Photo\n          opacity={slider / 100}\n          className={classes.capturedContainer}\n          photo={captured}\n        />\n      </div>\n      { Boolean(refPhoto) && (\n        <div className={classes.reference} >\n          <Photo\n            className={classes.referenceContainer}\n            photo={refPhoto}\n          />\n        </div>\n      )}\n      <Snackbar\n        open\n        autoHideDuration={null}\n        ContentProps={{\n          'aria-describedby': 'snackbar-fab-message-id',\n          className: classes.snackbarContent\n        }}\n        message={<span id='snackbar-fab-message-id'>Keep this photo?</span>}\n        action={<div>\n          <Button color='inherit' size='small' onClick={onCancel}>\n                Cancel\n          </Button>\n          {Boolean(onRetry) && (\n            <Button color='inherit' size='small' onClick={onRetry}>\n          Retry\n            </Button>\n          )}\n\n          <Button color='inherit' size='small' onClick={onConfirm}>\n                Keep\n          </Button>\n        </div>\n        }\n        className={classes.snackbar}\n      />\n    </div>\n  )\n}\n\nPhotoReviewTool.propTypes = {\n  classes: PropTypes.object.isRequired,\n  defaultRefPhotoId: PropTypes.string,\n  photos: PropTypes.array,\n  captured: PropTypes.object.isRequired,\n  // Now some functions\n  onConfirm: PropTypes.func.isRequired,\n  onCancel: PropTypes.func.isRequired,\n  onRetry: PropTypes.func // only for camera\n\n}\n\nexport default withStyles(style)(PhotoReviewTool)\n","export default theme => ({\n  root: {\n    background: 'rgb(150,150, 150)',\n    // border: '5px solid red',\n    height: '100%',\n    width: '100%'\n  },\n  capturedContainer: {\n    position: 'absolute',\n    zIndex: 1,\n    height: '100%',\n    width: '100%'\n  },\n  referenceContainer: {\n    position: 'absolute',\n    zIndex: 0,\n    height: '100%',\n    width: '100%'\n  },\n  captured: {\n\n  },\n  reference: {\n\n  },\n  referenceTextContainer: {\n    width: '100%',\n    display: 'flex',\n    color: 'white',\n    background: 'rgba(0,0,0,0.5)',\n    padding: theme.spacing.unit * 3,\n    position: 'absolute',\n    zIndex: 4,\n    top: 0\n  },\n  newText: {\n    flexGrow: 1,\n    color: 'white',\n    textShadow: '1 1 1 black',\n    textAlign: 'right'\n  },\n  refText: {\n    flexGrow: 1,\n    color: 'white',\n    textShadow: '1 1 1 black'\n  }\n})\n","import { useState, useEffect, useRef } from 'react'\n\nexport const useCamera = (onCapture) => {\n  const [webcam, setWebcam] = useState()\n  const [cameraError, setCameraError] = useState()\n\n  const initCamera = () => {\n    const webcam = new Webcam(\n      document.getElementById('webcam'),\n      document.createElement('canvas')\n    )\n    webcam.setup(\n      window.innerWidth, // width\n      window.innerHeight // height\n    )\n      .catch(() => {\n        setCameraError(true)\n        // alert('Error getting access to your camera')\n      })\n    setWebcam(webcam)\n  }\n\n  const captureImage = async () => {\n    const capturedData = webcam.takeBase64Photo({ type: 'png', quality: 1 })\n    // console.log(capturedData)\n    // alert(`Captured: ${capturedData.imageHeight} X ${capturedData.imageWidth}`)\n    onCapture(capturedData)\n  }\n\n  const delayedOrientationChange = () => {\n    window.setTimeout(initCamera, 1000)\n  }\n\n  useEffect(() => {\n    window.addEventListener('orientationchange', delayedOrientationChange)\n    if (!webcam && !cameraError) initCamera()\n    return () => {\n      window.removeEventListener('orientationchange', delayedOrientationChange)\n    }\n  })\n\n  return { cameraError, captureImage }\n}\n\nclass Webcam {\n  constructor (webcamElement, canvasElement) {\n    this.webcamElement = webcamElement\n    this.canvasElement = canvasElement\n\n    if (window.location.protocol !== 'https:' && window.location.hostname !== 'localhost') {\n      console.warn('getUserMedia() must be run from a secure origin: https or localhost.\\nChanging protocol to https.')\n    }\n\n    if (!navigator.mediaDevices && !navigator.getUserMedia) {\n      console.warn(`Your browser doesn't support navigator.mediaDevices.getUserMedia and navigator.getUserMedia.`)\n    }\n  }\n\n  adjustVideoSize (width, height) {\n    const aspectRatio = width / height\n    if (width >= height) {\n      this.webcamElement.width = aspectRatio * this.webcamElement.height\n    }\n    else if (width < height) {\n      this.webcamElement.height = this.webcamElement.width / aspectRatio\n    }\n  }\n\n  async setup (width, height) {\n    return new Promise((resolve, reject) => {\n      if (navigator.mediaDevices.getUserMedia !== undefined) {\n        navigator.mediaDevices.getUserMedia({ audio: false, video: { facingMode: 'environment', width, height } })\n          .then((mediaStream) => {\n            if ('srcObject' in this.webcamElement) {\n              this.webcamElement.srcObject = mediaStream\n            }\n            else {\n              // For older browsers withouth the srcObject.\n              this.webcamElement.src = window.URL.createObjectURL(mediaStream)\n            }\n            this.webcamElement.onloadedmetadata = (e) => {\n              this.webcamElement.play()\n            }\n          })\n          .catch(err => reject(err))\n      }\n      else {\n        reject(new Error('Error accessing camera'))\n      }\n    })\n  }\n\n  _drawImage () {\n    const imageWidth = this.webcamElement.videoWidth\n    const imageHeight = this.webcamElement.videoHeight\n\n    const context = this.canvasElement.getContext('2d')\n    this.canvasElement.width = imageWidth\n    this.canvasElement.height = imageHeight\n\n    context.drawImage(this.webcamElement, 0, 0, imageWidth, imageHeight)\n\n    return { imageHeight, imageWidth }\n  }\n\n  takeBlobPhoto () {\n    const { imageWidth, imageHeight } = this._drawImage()\n    return new Promise((resolve, reject) => {\n      this.canvasElement.toBlob((blob) => {\n        resolve({ blob, imageHeight, imageWidth })\n      })\n    })\n  }\n\n  takeBase64Photo ({ type, quality } = { type: 'png', quality: 1 }) {\n    const { imageHeight, imageWidth } = this._drawImage()\n    const base64 = this.canvasElement.toDataURL('image/' + type, quality)\n    return { base64, imageHeight, imageWidth }\n  }\n}\n","import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\nimport {\n  Fab,\n  SwipeableDrawer,\n  CssBaseline,\n  Typography\n} from '@material-ui/core'\nimport PhotoFadeSlider from '../../components/controls/PhotoFadeSlider'\nimport PhotoGrid from '../../components/PhotoGrid/PhotoGrid'\nimport {\n  Camera as CameraIcon,\n  Cancel as CancelIcon,\n  MyLocation as MyLocationIcon,\n  PhotoLibrary as PhotoLibraryIcon\n} from '@material-ui/icons'\nimport { withStyles } from '@material-ui/core/styles'\nimport style from './CameraTool.style'\nimport { useCamera } from '../../lib/useCamera'\nimport Photo from '../../components/Photo/Photo'\n\n// https://googlechrome.github.io/samples/image-capture/grab-frame-take-photo.html\nconst CameraTool = ({ classes, photos, onCancel, onShutter, defaultRefPhotoId }) => {\n  const [slider, setSlider] = useState(50)\n  const newRefPhoto = defaultRefPhotoId\n    ? photos.find(p => p.id === defaultRefPhotoId)\n    : photos && photos.length > 0 ? photos[0] : null\n\n  const [refPhoto, setRefPhoto] = useState(newRefPhoto)\n  const [drawerOpen, setDrawerOpen] = useState(false)\n  const { cameraError, captureImage } = useCamera((data) => onShutter(data, refPhoto ? refPhoto.id : null))\n\n  const handleTileClick = (id) => {\n    setRefPhoto(photos.find(p => p.id === id))\n    setDrawerOpen(false)\n  }\n\n  return (\n    <div className={classes.root}>\n      <CssBaseline />\n      { !cameraError && Boolean(refPhoto) && (\n        <PhotoFadeSlider defaultValue={slider} onChange={setSlider} />\n      )}\n\n      { cameraError && (\n        <div className={classes.cameraErrorText}>\n          <Typography variant='h3' color='inherit'>No Camera Access</Typography>\n          <Typography variant='body2' color='inherit'>Please enabled access in your settings.</Typography>\n        </div>\n      )}\n\n      <div className={classes.captured}>\n        { Boolean(refPhoto) && (\n          <div className={classes.reference} >\n            <Photo\n              className={classes.referenceContainer}\n              opacity={(100 - slider) / 100}\n              photo={refPhoto}\n            />\n          </div>\n        )}\n        { !cameraError && (\n          <video\n            autoPlay\n            playsInline\n            muted\n            id='webcam'\n            width={window.innerWidth}\n            height={window.innerHeight}\n            className={classes.video}\n          />\n        )}\n      </div>\n\n      <Fab\n        color='primary'\n        aria-label='Take Photo'\n        classes={{\n          disabled: classes.disabledFab\n        }}\n        disabled={cameraError}\n        className={classNames(classes.cameraFab, classes.buttonFab)}\n        onClick={captureImage}\n      >\n        <CameraIcon className={classes.cameraIcon} />\n      </Fab>\n\n      <Fab\n        color='secondary'\n        aria-label='cancel'\n        onClick={onCancel}\n        classes={{\n          disabled: classes.disabledFab\n        }}\n        className={classNames(classes.cancelFab, classes.buttonFab)}\n      >\n        <CancelIcon className={classes.cancelIcon} />\n      </Fab>\n\n      {/* <Fab\n        aria-label='locationHelper'\n        disabled={cameraError}\n        classes={{\n          disabled: classes.disabledFab\n        }}\n        className={classNames(classes.myLocationFab, classes.buttonFab)}\n      >\n        <MyLocationIcon className={classes.myLocationIcon} />\n      </Fab> */}\n\n      <Fab\n        aria-label='cancel'\n        className={classNames(classes.libraryFab, classes.buttonFab)}\n        classes={{\n          disabled: classes.disabledFab\n        }}\n        disabled={!photos || photos.length === 0}\n        onClick={() => setDrawerOpen(true)}\n      >\n        <PhotoLibraryIcon className={classes.libraryIcon} />\n      </Fab>\n\n      <SwipeableDrawer\n        anchor='left'\n        open={drawerOpen}\n        classes={{\n          paperAnchorLeft: classes.swipeDrawer\n        }}\n        onClose={() => setDrawerOpen(false)}\n        onOpen={() => setDrawerOpen(true)}\n      >\n        <div\n          tabIndex={0}\n          className={classes.swipeDrawerContainer}\n          role='button'\n          onClick={() => setDrawerOpen(false)}\n          onKeyDown={() => setDrawerOpen(false)}\n        >\n          <PhotoGrid\n            multiSelect={false}\n            columns={1}\n            photos={photos}\n            onTileClick={handleTileClick}\n          />\n        </div>\n      </SwipeableDrawer>\n\n    </div>\n  )\n}\n\nCameraTool.propTypes = {\n  classes: PropTypes.object.isRequired,\n  photos: PropTypes.array,\n  defaultRefPhotoId: PropTypes.string, // id of the reference photo\n  onCancel: PropTypes.func.isRequired,\n  onShutter: PropTypes.func.isRequired\n}\n\nexport default withStyles(style)(CameraTool)\n","export default theme => ({\n  root: {\n    background: 'black',\n    // border: '5px solid red',\n    height: '100%',\n    width: '100%'\n  },\n  cameraErrorText: {\n    color: 'white',\n    position: 'absolute',\n    top: '50%',\n    left: '50%',\n    width: '90%',\n    transform: 'translateY(-50%) translateX(-50%)',\n    textAlign: 'center'\n  },\n  disabledFab: {\n    color: '#AAAAA!important',\n    background: '#DDDDDD!important',\n    opacity: 0.2\n  },\n  cameraFab: {\n    position: 'absolute',\n    zIndex: 10,\n    '@media (orientation: landscape)': {\n      right: '20px',\n      top: '50%',\n      transform: 'translateY(-50%)',\n      height: '25vh',\n      width: '25vh'\n    },\n    '@media (orientation: portrait)': {\n      bottom: '20px',\n      left: '50%',\n      transform: 'translateX(-50%)',\n      height: '25vw',\n      width: '25vw'\n    }\n  },\n  cameraIcon: {\n    height: '100%',\n    width: '100%'\n  },\n  cancelFab: {\n    position: 'absolute',\n    zIndex: 10,\n    '@media (orientation: landscape)': {\n      right: '15px',\n      top: '15px',\n      height: '15vh',\n      width: '15vh'\n    },\n    '@media (orientation: portrait)': {\n      right: '15px',\n      bottom: '15px',\n      height: '15vw',\n      width: '15vw'\n    }\n  },\n  cancelIcon: {\n    height: '100%',\n    width: '100%'\n  },\n\n  swipeDrawer: {\n    width: '50%'\n  },\n\n  libraryFab: {\n    position: 'absolute',\n    zIndex: 10,\n    '@media (orientation: landscape)': {\n      left: '15px',\n      top: '15px',\n      height: '15vh',\n      width: '15vh'\n    },\n    '@media (orientation: portrait)': {\n      left: '15px',\n      top: '15px',\n      height: '15vw',\n      width: '15vw'\n    }\n  },\n\n  myLocationFab: {\n    position: 'absolute',\n    zIndex: 10,\n    '@media (orientation: landscape)': {\n      right: '15px',\n      bottom: '15px',\n      height: '15vh',\n      width: '15vh'\n    },\n    '@media (orientation: portrait)': {\n      left: '15px',\n      bottom: '15px',\n      height: '15vw',\n      width: '15vw'\n    }\n  },\n  myLocationIcon: {\n    height: '80%',\n    width: '80%'\n  },\n  capturedContainer: {\n    position: 'absolute',\n    zIndex: 1,\n    height: '100%',\n    width: '100%'\n  },\n  referenceContainer: {\n    position: 'absolute',\n    zIndex: 2,\n    height: '100%',\n    width: '100%'\n  },\n  captured: {\n\n  },\n  reference: {\n\n  },\n  video: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    height: '100vh',\n    width: '100vw',\n    zIndex: 1\n    // '@media (orientation: portrait)': {\n    //   transform: 'rotate(90)'\n    // }\n  }\n  // overlayImage: {\n  //   position: 'absolute',\n  //   top: 0,\n  //   left: 0,\n  //   zIndex: 3,\n  //   height: '100vh',\n  //   width: '100vw',\n  //   textAlign: 'center'\n  // },\n  // overlayImageInner: {\n  //   '@media (orientation: landscape)': {\n  //     height: '100%',\n  //     width: 'auto'\n  //   },\n  //   '@media (orientation: portrait)': {\n  //     width: '100%',\n  //     height: 'auto'\n  //   }\n  // },\n  // newImage: {\n  //   position: 'absolute',\n  //   top: 0,\n  //   left: 0,\n  //   zIndex: 2\n  // }\n})\n","import React, { useState, useContext } from 'react'\nimport PropTypes from 'prop-types'\nimport {\n  CssBaseline,\n  Dialog,\n  DialogTitle,\n  Typography,\n  DialogContent,\n  DialogActions,\n  Button\n} from '@material-ui/core'\n// import { Menu as MenuIcon } from '@material-ui/icons'\nimport TagControl from '../controls/TagControl'\nimport TextAreaControl from '../controls/TextAreaControl'\nimport TextFieldControl from '../controls/TextFieldControl'\nimport DateControl from '../controls/DateControl'\nimport TagClass from '../../lib/Tags'\nimport Slider from '@material-ui/lab/Slider'\nimport MapDot from '../../components/maps/MapDot/MapDot'\n\nimport { withStyles } from '@material-ui/core/styles'\nimport style from './NewPhotoInfo.style'\nimport { SeriesConfig } from '../../contexts'\n\nconst NewPhotoInfo = ({ classes, photo, series, onChange, isNewSeries, onCancel, onSave }) => {\n  const seriesConfig = useContext(SeriesConfig)\n  const [rotation, setRotation] = useState(series && series.direction ? series.direction : -1)\n\n  console.log('NewPhotoInfo', { photo, series, onChange, isNewSeries, onCancel, onSave })\n\n  const onRotationChange = (dir) => {\n    const newDir = dir >= 0 ? dir : null\n    onChangeLocalSeries('direction', newDir)\n    setRotation(newDir)\n  }\n\n  const onMapChange = ({ latitude, longitude }) => {\n    onChangeLocalSeries('location', [latitude, longitude])\n  }\n\n  const onChangeLocal = (fieldName, val) => {\n    console.log('onChangeLocal', fieldName, val)\n    if (isNewSeries) {\n      onChange({\n        ...series,\n        photos: [{ ...photo, [fieldName]: val }]\n      })\n    }\n    else onChange({ ...photo, [fieldName]: val })\n  }\n  const onChangeLocalSeries = (fieldName, val) => {\n    console.log('onChangeLocalSeries', fieldName, val)\n    onChange({ ...series, [fieldName]: val })\n  }\n\n  const tagInst = new TagClass(seriesConfig, photo.tags)\n\n  return (\n    <div className={classes.root}>\n      <CssBaseline /> {/* You only need this in a root element. Don't put it anywhere else in the dom */}\n      <Dialog\n        fullScreen\n        fullWidth\n        scroll='paper'\n        disableBackdropClick\n        disableEscapeKeyDown\n        onClose={onCancel}\n        aria-labelledby='customized-dialog-title'\n        open\n      >\n\n        <DialogTitle disableTypography className={classes.dlgTitleContainer}>\n          <Typography variant='title' className={classes.dlgTitle}>\n          New Photo Properties\n          </Typography>\n        </DialogTitle>\n        <DialogContent>\n\n          {isNewSeries && (\n            <div className={classes.series}>\n              <form className={classes.form} elevation={1} noValidate autoComplete='off'>\n                <TextFieldControl\n                  className={classes.field}\n                  label='Series Name'\n                  placeholder='New Series'\n                  permaEdit\n                  allowEdit\n                  hint='give this series a name'\n                  value={series.name}\n                  onChange={val => onChangeLocalSeries('name', val)}\n                />\n                <TextAreaControl\n                  className={classes.field}\n                  label='Notes'\n                  placeholder='Any instructions for the next person to add a picture to this series?'\n                  multiline\n                  rows='1'\n                  rowsMax='4'\n                  permaEdit\n                  allowEdit\n                  value={series.note}\n                  onChange={val => onChangeLocalSeries('note', val)}\n                />\n\n                <div className={classes.mapWrapper}>\n                  <Typography variant='overline' className={classes.formLabel}>Location</Typography>\n                  <div style={{ height: 200, marginBottom: 10 }}>\n                    <MapDot\n                      editable\n                      className={classes.map}\n                      direction={rotation > 0 ? rotation : null}\n                      latitude={series.location[0]}\n                      longitude={series.location[1]}\n                      onChange={onMapChange}\n                    />\n                  </div>\n                  <Typography variant='overline' className={classes.mapFormLabel}>Direction {rotation > 0 ? '' : '(off)'}</Typography>\n                  <Slider\n                    className={classes.field}\n                    classes={{ container: classes.slider }}\n                    value={rotation || -1}\n                    min={-1}\n                    max={360}\n                    step={1}\n                    onChange={(e, value) => onRotationChange(value)}\n                  />\n                </div>\n              </form>\n            </div>\n          )}\n\n          <DateControl\n            className={classes.field}\n            label='Photo taken on'\n            defaultValue={photo.date || null}\n            onChange={val => onChangeLocal('date', val)}\n            hint='Edit the date you took this picture'\n            allowEdit\n            permaEdit\n          />\n\n          <TextAreaControl\n            label='Photo Note'\n            className={classes.field}\n            defaultValue={photo.note}\n            placeholder='Anything special about this photo?....'\n            onChange={val => onChangeLocal('note', val)}\n            rows={1}\n            rowsMax={5}\n            allowEdit\n            permaEdit\n          />\n\n          <Typography variant='subtitle1'>Category tags</Typography>\n\n          {tagInst.seriesConfig.getNonXYTagTypes().map((tt, idx) => (\n            <TagControl\n              className={classes.field}\n              defaultValue={photo.tags}\n              tagConfig={tt}\n              group={tagInst.seriesConfig.getTagTypeIndex(tt.id)}\n              allowEdit\n              permaEdit\n              onChange={val => onChangeLocal('tags', val)}\n              key={`tagtype-${idx}`}\n            />\n          ))}\n\n        </DialogContent>\n\n        <DialogActions>\n          <Button onClick={onCancel} color='primary'>\n  Cancel\n          </Button>\n          <Button onClick={onSave} color='primary'>\n  Next\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  )\n}\n\nNewPhotoInfo.propTypes = {\n  classes: PropTypes.object.isRequired,\n  photo: PropTypes.object.isRequired,\n  series: PropTypes.object,\n  isNewSeries: PropTypes.bool,\n  // onChange serves double duty here. I'm not sure if that's a good idea\n  onChange: PropTypes.func.isRequired,\n  // Standard functions\n  onCancel: PropTypes.func.isRequired,\n  onSave: PropTypes.func\n}\n\nexport default withStyles(style)(NewPhotoInfo)\n","export default theme => ({\n  root: {\n\n  },\n  formLabel: {\n    color: theme.palette.text.secondary\n  },\n  mapFormLabel: {\n    marginTop: theme.spacing.unit * 2,\n    marginBottom: theme.spacing.unit,\n    color: theme.palette.text.secondary\n  },\n  map: {\n    marginBottom: theme.spacing.unit * 2\n  },\n  mapWrapper: {\n    marginBottom: theme.spacing.unit * 2\n  },\n  field: {\n    marginBottom: theme.spacing.unit * 2\n  }\n})\n","import { useEffect, useState } from 'react'\n\nconst useFileInput = (onChange = () => {}) => {\n  const [fileInput] = useState(() => {\n    const input = document.createElement('input')\n    input.type = 'file'\n    return input\n  })\n\n  useEffect(() => {\n    const handleChange = evt => {\n      const [file] = [...fileInput.files]\n      if (file) {\n        const reader = new FileReader()\n        reader.onload = e => {\n          onChange(e.target.result)\n        }\n        reader.readAsDataURL(file)\n      }\n      fileInput.value = null\n    }\n\n    fileInput.addEventListener('change', handleChange)\n    return () => fileInput.removeEventListener('change', handleChange)\n  }, [])\n\n  return () => {\n    fileInput.click()\n  }\n}\n\nexport default useFileInput\n","import React, { useState, useContext } from 'react'\nimport PropTypes from 'prop-types'\nimport exifParser from 'exif-parser'\nimport moment from 'moment'\nimport PhotoClass from './lib/Photo'\nimport { useDeviceOrientation, useGeolocation } from './lib/sensors'\nimport SeriesClass from './lib/Series'\nimport { SeriesConfig } from './contexts'\nimport PhotoReviewTool from './views/PhotoReviewTool/PhotoReviewTool'\nimport CameraTool from './views/CameraTool/CameraTool'\n// import PhotoViewTool from './views/PhotoViewTool/PhotoViewTool'\nimport NewPhotoInfo from './components/NewPhotoInfo/NewPhotoInfo'\nimport useFileInput from './lib/useFileInput'\n\nconst MODES = {\n  CAMERA: 'camera',\n  FILEPICKER: 'library',\n  PHOTOREVIEW: 'photoreview',\n  PHOTOINFOEDIT: 'photoinfoedit'\n}\n\nconst NewPhoto = ({ inputMethod, onCreate, onCancel, photos, isNewSeries }) => {\n  const seriesConfig = useContext(SeriesConfig)\n  const [newPhoto, setNewPhoto] = useState(null)\n  // If series isn't provided then this is a new series and we need to accomodate\n  // onSeriesCreate\n  const [newSeries, setNewSeries] = useState(photos ? null : new SeriesClass(seriesConfig).series)\n  const [photoRefId, setPhotoRefId] = useState(null)\n  const [mode, _changeMode] = useState({ current: inputMethod, history: [] })\n  const orientation = useDeviceOrientation()\n  const geo = useGeolocation()\n\n  const onLibraryAdd = (data) => {\n    console.log('onLibraryAdd Debug GOT DATA')\n    let exif = {}\n    // const regex = /^data:.+\\/(.+);base64,(.*)$/\n    // const matches = data.match(regex)\n\n    // const parser = exifParser.create(Buffer.from(matches[2], 'base64'))\n    // try {\n    //   exif = parser.parse()\n    //   console.log('got EXIF')\n    // }\n    // catch (err) {\n    // // got invalid data, handle error\n    //   console.error('EXIF ERROR', err)\n    // }\n    // Ok, now try to get the datetime off the EXIF\n    let date = moment().format('x')\n    try {\n      date = exif.tags.DateTimeOriginal\n    }\n    catch (err) {\n      console.error('ERROR GETTING TIMESTAMP', err)\n    }\n    const newPhoto = new PhotoClass(seriesConfig).photo\n\n    if (isNewSeries) {\n      let loc = newSeries.location\n      try {\n        const { latitude, longitude } = newPhoto.rawData.geolocate\n        loc = [latitude, longitude]\n      }\n      catch (e) {\n        console.error(`Couldn't get geolocation from sensors`)\n      }\n      setNewSeries({\n        ...newSeries,\n        location: loc\n      })\n    }\n\n    setNewPhoto({\n      ...newPhoto,\n      date: date,\n      rawData: {\n        exif\n      },\n      base64: data\n    })\n    changeMode(MODES.PHOTOREVIEW)\n    console.log('onLibraryAdd FINISHED')\n  }\n\n  const fileClick = useFileInput(onLibraryAdd)\n\n  const changeMode = (newModeName) => {\n    console.log('NEWPHOTO changeMode', mode, newModeName)\n    _changeMode({\n      current: newModeName,\n      history: [...mode.history, mode.current]\n    })\n  }\n  const lastMode = () => {\n    if (mode.history.length > 0) {\n      const oldHistory = [...mode.history]\n      const oldMode = oldHistory.pop()\n      _changeMode({\n        current: oldMode,\n        history: oldHistory\n      })\n    }\n    else {\n      onCancel()\n    }\n  }\n\n  const onShutter = (data, refId) => {\n    const newPhoto = new PhotoClass(seriesConfig).photo\n    if (isNewSeries) {\n      let loc = newSeries.location\n      try {\n        const { latitude, longitude } = newPhoto.rawData.geolocate\n        loc = [latitude, longitude]\n      }\n      catch (e) {\n        console.error(`Couldn't get geolocation from sensors`)\n      }\n      setNewSeries({\n        ...newSeries,\n        location: loc\n      })\n    }\n\n    setNewPhoto({\n      ...newPhoto,\n      rawData: {\n        orient: orientation,\n        geolocate: geo\n      },\n      base64: data.base64\n    })\n    setPhotoRefId(refId)\n    changeMode(MODES.PHOTOREVIEW)\n  }\n\n  const onSave = () => {\n    if (isNewSeries) {\n      onCreate({\n        ...newSeries,\n        photos: [newPhoto]\n      })\n    }\n    else {\n      onCreate(newPhoto)\n    }\n  }\n\n  let component = null\n  switch (mode.current) {\n    case MODES.CAMERA:\n      component = <CameraTool\n        photos={photos}\n        onShutter={onShutter}\n        onCancel={onCancel}\n      />\n      break\n    case MODES.FILEPICKER:\n      fileClick()\n      break\n    case MODES.PHOTOREVIEW:\n      component = <PhotoReviewTool\n        defaultRefPhotoId={photoRefId}\n        photos={photos}\n        captured={newPhoto}\n        onConfirm={() => changeMode(MODES.PHOTOINFOEDIT)}\n        onCancel={onCancel}\n        onRetry={lastMode}\n      />\n      break\n    case MODES.PHOTOINFOEDIT:\n      component = <NewPhotoInfo\n        photo={newPhoto}\n        series={newSeries}\n        isNewSeries={isNewSeries}\n        onChange={isNewSeries ? setNewSeries : setNewPhoto}\n        onCancel={onCancel}\n        onSave={onSave}\n      />\n      break\n    default:\n      console.log('NEWPHOTO: default state. you should NEVER see this', mode)\n      onCancel()\n  }\n\n  return component\n}\n\nNewPhoto.propTypes = {\n  inputMethod: PropTypes.oneOf(['camera', 'library']),\n  onCreate: PropTypes.func.isRequired,\n  onCancel: PropTypes.func.isRequired,\n  isNewSeries: PropTypes.bool,\n  // This might be a new series so we might have\n  // actions to work on that\n  // This will be provided EITHER photos or onSeriesCreate\n  photos: PropTypes.array\n}\n\nexport default NewPhoto\n","import { useState, useEffect } from 'react'\n\nexport const useGeolocation = () => {\n  const [state, setState] = useState({\n    accuracy: null,\n    altitude: null,\n    altitudeAccuracy: null,\n    heading: null,\n    latitude: null,\n    longitude: null,\n    speed: null,\n    timestamp: Date.now()\n  })\n  let mounted = true\n  let watchId\n\n  const onEvent = event => {\n    if (mounted) {\n      setState({\n        accuracy: event.coords.accuracy,\n        altitude: event.coords.altitude,\n        altitudeAccuracy: event.coords.altitudeAccuracy,\n        heading: event.coords.heading,\n        latitude: event.coords.latitude,\n        longitude: event.coords.longitude,\n        speed: event.coords.speed,\n        timestamp: event.timestamp\n      })\n    }\n  }\n\n  useEffect(\n    () => {\n      navigator.geolocation.getCurrentPosition(onEvent)\n      watchId = navigator.geolocation.watchPosition(onEvent)\n\n      return () => {\n        mounted = false\n        navigator.geolocation.clearWatch(watchId)\n      }\n    },\n    [0]\n  )\n\n  return state\n}\n\nexport function useDeviceOrientation () {\n  const [deviceOrientation, setDeviceOrientation] = useState({ absolute: false, alpha: null, beta: null, gamma: null })\n\n  function handleDeviceOrientation (event) {\n    setDeviceOrientation({\n      absolute: event.absolute,\n      alpha: event.alpha,\n      beta: event.beta,\n      gamma: event.gamma\n    })\n  }\n\n  useEffect(() => {\n    window.addEventListener('deviceorientation', handleDeviceOrientation, true)\n\n    return () => {\n      window.removeEventListener('deviceorientation', handleDeviceOrientation)\n    }\n  }, [])\n\n  return deviceOrientation\n}\n\nexport function playClickAudio (clickSound) {\n  let audio = new Audio('data:audio/mp3;base64,' + clickSound.base64)\n  audio.play()\n}\n","import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\nimport SeriesView from './views/SeriesView/SeriesView'\nimport SeriesEdit from './views/SeriesEdit/SeriesEdit'\nimport Slideshow from './views/Slideshow/Slideshow'\nimport PhotoViewTool from './views/PhotoViewTool/PhotoViewTool'\nimport { SeriesConfig } from './contexts'\nimport NewPhoto from './NewPhoto'\nimport SeriesClass from './lib/Series'\n\nconst MODES = {\n  SERIES_VIEW: 'series',\n  SERIES_EDIT: 'editseries',\n  NEWPHOTO: 'newphoto',\n  NEWSERIES: 'newseries',\n  REVIEW: 'review',\n  PHOTO_VIEW: 'photoviewer',\n  PHOTO_VIEW_NEW: 'newphotoviewer',\n  SLIDESHOW: 'slideshow'\n}\nconst VIEW_ONLY_MODES = [MODES.SERIES_VIEW, MODES.PHOTO_VIEW, MODES.SLIDESHOW]\nconst VALID_STARTMODES = [MODES.SERIES_VIEW, MODES.NEWPHOTO, MODES.NEWSERIES, MODES.PHOTO_REVIEW]\n\nconst RepeatablePhotos = ({\n  modeName, series, inputMethod: inputMethodINIT, seriesConfig, allowEdit,\n  onChange, onClose, onDelete, onNewSeries\n}) => {\n  // Manage view modes separately\n  const [mode, _changeMode] = useState({\n    current: {\n      name: modeName || MODES.SERIES_VIEW,\n      pid: null,\n      inputMethod: inputMethodINIT\n    },\n    history: []\n  })\n\n  // console.log('STATE', { mode, series, seriesConfig })\n\n  // When anything changes about a photo\n  const onUpdatePhoto = (photo) => onChange({\n    ...series,\n    photos: series.photos.map(sp => sp.id === photo.id ? photo : sp)\n  })\n\n  const onCreatePhoto = (photo) => {\n    onChange({\n      ...series,\n      photos: [...series.photos, photo]\n    })\n    changeMode(MODES.PHOTO_VIEW_NEW, photo.id)\n  }\n\n  // When a photo is removed\n  const onDeletePhotos = (photoIdArr) => onChange({\n    ...series,\n    photos: series.photos.filter(sp => photoIdArr.indexOf(sp.id) < 0)\n  })\n\n  // Here's our modeChanger. My guess it will get a lot more complicated\n  // once the reducers get in and working\n  const changeMode = (newModeName, newPid, newInputMethod) => {\n    if (mode === null) onClose()\n    if (!allowEdit && VIEW_ONLY_MODES.indexOf(newModeName) < 0) {\n      console.error('ILLEGAL MODE CHANGE!!!!!', { from: mode.current, to: newModeName, allowEdit })\n    }\n    else {\n      // console.log('CHANGING MODE TO', newModeName)\n      _changeMode({\n        current: {\n          name: newModeName,\n          pid: newPid,\n          inputMethod: newInputMethod\n        },\n        history: [...mode.history, mode.current]\n      })\n    }\n  }\n  const lastMode = () => {\n    // console.log('REPEATABLEPHOTOS lastMode', mode)\n    if (mode.history.length > 0) {\n      const oldHistory = [...mode.history]\n      const oldMode = oldHistory.pop()\n      _changeMode({\n        current: oldMode,\n        history: oldHistory\n      })\n    }\n    else {\n      onClose()\n    }\n  }\n\n  const onCreateSeries = (series) => {\n    onNewSeries(series)\n    onClose()\n  }\n\n  // The action to initiate the photo viewer\n  const viewPhoto = (pid) => {\n    // console.log('DEBUG', mode, series.photos.find(p => p.id === pid))\n    changeMode(MODES.PHOTO_VIEW, pid)\n  }\n\n  let component = null\n\n  switch (mode.current.name) {\n    case MODES.SERIES_VIEW:\n      component = (\n        <SeriesView\n          series={series}\n          onMenuBack={onClose}\n          allowEdit={allowEdit}\n          onSlideshowStart={() => changeMode(MODES.SLIDESHOW)}\n          onCameraAdd={() => changeMode(MODES.NEWPHOTO, null, 'camera')}\n          onLibraryAdd={() => changeMode(MODES.NEWPHOTO, null, 'library')}\n          onEditSeries={() => changeMode(MODES.SERIES_EDIT)}\n          onChange={onChange}\n          onDeletePhotos={onDeletePhotos}\n          onDeleteSeries={onDelete}\n          onTileClick={viewPhoto}\n        />\n      )\n      break\n    case MODES.SERIES_EDIT:\n      component = (\n        <SeriesEdit\n          series={series}\n          allowEdit={allowEdit}\n          onMenuBack={() => changeMode(MODES.SERIES_VIEW)}\n          onChange={onChange}\n          onDeleteSeries={onDelete}\n        />\n      )\n      break\n    case MODES.PHOTO_VIEW:\n      component = (\n        <PhotoViewTool\n          photo={series.photos.find(p => p.id === mode.current.pid)}\n          allowEdit={allowEdit}\n          onMenuBack={lastMode}\n          onUpdatePhoto={onUpdatePhoto}\n        />\n      )\n      break\n    case MODES.PHOTO_VIEW_NEW:\n      component = (\n        <PhotoViewTool\n          photo={series.photos.find(p => p.id === mode.current.pid)}\n          allowEdit={allowEdit}\n          onMenuBack={() => changeMode(MODES.SERIES_VIEW)}\n          newPhoto\n          onUpdatePhoto={onUpdatePhoto}\n        />\n      )\n      break\n    case MODES.SLIDESHOW:\n      component = (\n        <Slideshow photos={series.photos} onCancel={lastMode} />\n      )\n      break\n    case MODES.NEWPHOTO:\n      component = (\n        <NewPhoto\n          inputMethod={mode.current.inputMethod}\n          photos={series ? series.photos : null}\n          onCreate={onCreatePhoto}\n          onCancel={lastMode}\n        />\n      )\n      break\n    case MODES.NEWSERIES:\n      component = (\n        <NewPhoto\n          inputMethod={mode.current.inputMethod}\n          isNewSeries\n          onCreate={onCreateSeries}\n          onCancel={lastMode}\n        />\n      )\n      break\n    default:\n      console.log('REPEATABLEPHOTO: default state. you should NEVER see this', mode)\n      component = null\n  }\n\n  return (\n    <SeriesConfig.Provider value={seriesConfig}>\n      {component}\n    </SeriesConfig.Provider>\n  )\n}\n\nRepeatablePhotos.propTypes = {\n  modeName: PropTypes.oneOf(VALID_STARTMODES),\n  seriesConfig: PropTypes.object.isRequired,\n  inputMethod: PropTypes.oneOf(['camera', 'library']),\n  series: PropTypes.object,\n  allowEdit: PropTypes.bool,\n  // Now some functions to handle actions we might take\n  onChange: PropTypes.func.isRequired,\n  onNewSeries: PropTypes.func.isRequired,\n  onDelete: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired\n}\nRepeatablePhotos.defaultProps = {\n  mode: MODES.SERIES_VIEW,\n  canEdit: false\n}\n\nexport default RepeatablePhotos\n","export default {\n  'meta': {\n    'project': {\n      'type': 'SERIES',\n      'label': 'Project',\n      'default': '926ff265-e22b-400d-ae00-a817d69d5042',\n      render: (key) => `My Project: ${key}`// Some handler for rendering metadata\n    },\n    'reach': {\n      'type': 'SERIES',\n      'label': 'Reach',\n      'default': '4f310e81-e1f8-45e7-9341-859e7f4e2208',\n      render: (key) => `My Project: ${key}`// Some handler for rendering metadata\n    },\n    'user': {\n      'type': 'PHOTO',\n      'label': 'User',\n      'default': 'fa645ddf-9147-4372-934f-f3a219fc81f2',\n      render: (key) => `My Project: ${key}`// Some handler for rendering metadata\n    }\n  },\n  'tags': [\n    {\n      'id': 'structures',\n      'label': 'Structures',\n      'isXY': true,\n      'allowAdditions': false,\n      'values': [\n        {\n          'label': 'Structure-0',\n          'id': '4261a967-c01b-4795-ac04-604821d45074'\n        },\n        {\n          'label': 'Structure-1',\n          'id': '46a19e1a-53d3-4d66-88ba-789d93f33ab7'\n        },\n        {\n          'label': 'Structure-2',\n          'id': '1003b5f0-e874-4e30-86f8-cd6cf0bb341f'\n        },\n        {\n          'label': 'Structure-3',\n          'id': 'fe98b4f1-f3dd-4999-9e0f-ff01f07ab60f'\n        },\n        {\n          'label': 'Structure-4',\n          'id': 'c7385fd3-1c0d-4453-8571-fe09780a07c2'\n        },\n        {\n          'label': 'Structure-5',\n          'id': '5fb4df60-500a-487a-95b9-e785241e7ba9'\n        },\n        {\n          'label': 'Structure-6',\n          'id': 'e97c7c70-6752-4667-9774-b78b7cca817f'\n        },\n        {\n          'label': 'Structure-7',\n          'id': '353654fa-9bd0-4227-b67b-90d5537bd30d'\n        },\n        {\n          'label': 'Structure-8',\n          'id': '885defcb-2c10-4dad-a81a-ae1cf3cfda23'\n        },\n        {\n          'label': 'Structure-9',\n          'id': 'a314653d-ef5e-42dd-be06-8fa89e80698b'\n        },\n        {\n          'label': 'Structure-10',\n          'id': '985da9e9-505e-41c0-99b0-523a39094756'\n        },\n        {\n          'label': 'Structure-11',\n          'id': '9736da92-6276-46a6-af6a-edf7b446b393'\n        }\n      ]\n    },\n    {\n      'id': 'treetypes',\n      'label': 'Tree Types',\n      'isXY': true,\n      'allowAdditions': true,\n      'values': [\n        {\n          'label': 'Elm',\n          'id': 'f5378e05-66dc-440e-b707-1642fb1b2dad'\n        },\n        {\n          'label': 'Birch',\n          'id': 'b6a712ad-eca4-4e7f-8152-97f533e1dc0a'\n        },\n        {\n          'label': 'Palm',\n          'id': '02607266-6281-4e4e-bef1-37780fd3e1c3'\n        },\n        {\n          'label': 'Cottonwood',\n          'id': '56350721-fa07-4e93-bc5c-c68169483aed'\n        },\n        {\n          'label': 'Oak',\n          'id': '4917a009-6dfe-4bbf-9fac-cc4943f75238'\n        }\n      ]\n    },\n    {\n      'id': 'emotions',\n      'label': 'Emotions',\n      'isXY': false,\n      'allowAdditions': true,\n      'values': [\n        {\n          'label': 'Indignation',\n          'id': '6298aa20-c183-4415-bc77-caeed84451d8'\n        },\n        {\n          'label': 'Anger',\n          'id': '18dd2696-7ea7-4e6c-b51c-820ee88fe3d7'\n        },\n        {\n          'label': 'Confusion',\n          'id': '4aa2ee88-5c90-4a86-80f5-f349b9ed2fcb'\n        },\n        {\n          'label': 'Ambivalence',\n          'id': '846b93d0-a5f7-4f00-ae04-c7fbd6100239'\n        },\n        {\n          'label': 'Cautious',\n          'id': '0b5e1de2-e7f1-439a-90fc-d06bb29a93fd'\n        }\n      ]\n    },\n    {\n      'id': 'season',\n      'label': 'Season',\n      'isXY': false,\n      'allowAdditions': false,\n      'values': [\n        {\n          'label': 'Winter',\n          'id': '027d22a5-fd5d-4c89-8273-b6554d313314'\n        },\n        {\n          'label': 'Spring',\n          'id': '06db5fab-f606-446f-b9b7-e1b6e4e2f30f'\n        },\n        {\n          'label': 'Summer',\n          'id': 'e4c2d0f3-223c-462d-bb30-0820244afeb4'\n        },\n        {\n          'label': 'Fall',\n          'id': '8a66256f-a189-4bfa-aefe-5b5bfb4ad69c'\n        }\n      ]\n    }\n  ]\n}\n","import { openDb } from 'idb'\nimport seriesList from './seriesList.json'\n\nconst STORENAME = 'serieslist'\nconst dbPromise = openDb('serieslistDB', 1, upgradeDB => {\n  console.log('UPGRADE NEEDED', upgradeDB)\n  const store = upgradeDB.createObjectStore(STORENAME)\n  console.log('UPGRADE NEEDED STORE', store)\n  seriesList.forEach(async series => {\n    await store.put(series, series.id)\n  })\n}).catch(e => {\n  console.error('ERROR', e)\n})\n\nexport default {\n  async reload () {\n    const db = await dbPromise\n    const tx = db.transaction(STORENAME, 'readwrite')\n\n    seriesList.forEach(async series => {\n      await tx.objectStore(STORENAME).put(series, series.id)\n    })\n  },\n  async get (key) {\n    const db = await dbPromise\n    return db.transaction(STORENAME).objectStore(STORENAME).get(key)\n  },\n  async getAll () {\n    const db = await dbPromise\n    return db.transaction(STORENAME).objectStore(STORENAME).getAll()\n  },\n  async set (key, val) {\n    const db = await dbPromise\n    const tx = db.transaction(STORENAME, 'readwrite')\n    tx.objectStore(STORENAME).put(val, key)\n    return tx.complete\n  },\n  async delete (key) {\n    const db = await dbPromise\n    const tx = db.transaction(STORENAME, 'readwrite')\n    tx.objectStore(STORENAME).delete(key)\n    return tx.complete\n  },\n  async clear () {\n    const db = await dbPromise\n    const tx = db.transaction(STORENAME, 'readwrite')\n    tx.objectStore(STORENAME).clear()\n    return tx.complete\n  },\n  async keys () {\n    const db = await dbPromise\n    return db.transaction(STORENAME).objectStore(STORENAME).getAllKeys()\n  }\n}\n","import React, { useState, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport {\n  CssBaseline,\n  AppBar,\n  Button,\n  IconButton,\n  Toolbar,\n  Typography,\n  Dialog,\n  FormControlLabel,\n  Switch,\n  Divider,\n  DialogTitle,\n  DialogContent,\n  DialogActions\n} from '@material-ui/core'\nimport { withStyles } from '@material-ui/core/styles'\nimport SeriesList from '../views/SeriesList/SeriesList'\nimport RepeatablePhotos from '../RepeatablePhotos'\nimport seriesConfig from './seriesConfig'\n\nimport style from './TestApp.style'\nimport {\n  Info as InfoIcon,\n  Settings as SettingsIcon,\n  PlaylistAdd as PlaylistAddIcon\n  // Refresh as RefreshIcon\n} from '@material-ui/icons'\nimport db from './db'\nimport useNewImageMenu from '../components/controls/useNewImageMenu'\n\nconst TestApp = ({ classes }) => {\n  const [currSeriesList, setSeriesList] = useState([])\n  const [aboutOpen, setAboutOpen] = useState(false)\n  const [allowEdit, setAllowEdit] = useState(true)\n  const [settingsOpen, setSettingsOpen] = useState(false)\n\n  // {SERIES, MODE}\n  const [rpState, setStartState] = useState(null)\n\n  const onChange = (newSeries) => {\n    // console.log('TestApp:: db.put', newSeries)\n    setSeriesList(currSeriesList.map(s => {\n      if (s.id !== newSeries.id) return s\n      else return newSeries\n    }))\n    setStartState({\n      ...rpState,\n      series: newSeries\n    })\n    db.set(newSeries.id, newSeries).then(fetchData)\n  }\n\n  const onDelete = (id) => {\n    db.delete(id).then(fetchData)\n    fetchData()\n    setStartState(null)\n  }\n\n  // Now some functions for the series list\n  const tileClick = (selectedSeries) => setStartState({ series: selectedSeries, modeName: 'series' })\n  const cameraClick = (selectedSeries) => {\n    setStartState({ series: selectedSeries, modeName: 'newphoto', inputMethod: 'camera' })\n  }\n\n  // When you click the library chooser you get this\n  const libraryClick = (selectedSeries) => {\n    // console.log('libraryClick debug', selectedSeries)\n    setStartState({ series: selectedSeries, modeName: 'newphoto', inputMethod: 'library' })\n  }\n\n  const seriesCameraClick = () => {\n    setStartState({ series: null, modeName: 'newseries', inputMethod: 'camera' })\n  }\n\n  // When you click the library chooser you get this\n  const seriesLibraryClick = () => {\n    // console.log('libraryClick debug', selectedSeries)\n    setStartState({ series: null, modeName: 'newseries', inputMethod: 'library' })\n  }\n\n  const { onDownThunk, onUpThunk, onBlock, menu } = useNewImageMenu(\n    seriesCameraClick,\n    seriesLibraryClick\n  )\n\n  const onNewSeries = async (series) => {\n    console.log('TESTApp onNewSeries', series)\n    await db.set(series.id, series)\n    setSeriesList([...currSeriesList, series])\n    setStartState({ series, modeName: 'series' })\n  }\n\n  // This is just for reloading test data in case the users delete it\n  const reloadData = () => {\n    db.reload()\n    fetchData()\n    setSettingsOpen(false)\n  }\n\n  const dumpData = async () => {\n    await db.getAll().then(data => {\n      console.log('DUMP\\n\\n\\n', JSON.stringify(data))\n    })\n  }\n\n  // Can't use async inside a hook so this is a workaround:\n  const fetchData = async () => {\n    await db.getAll().then(setSeriesList)\n  }\n\n  useEffect(() => {\n    fetchData()\n  }, [])\n\n  if (rpState) {\n    return (\n      <RepeatablePhotos\n        allowEdit={allowEdit}\n        seriesConfig={seriesConfig}\n        series={rpState.series}\n        inputMethod={rpState.inputMethod}\n        modeName={rpState.modeName}\n        onChange={onChange}\n        onDelete={onDelete}\n        onNewSeries={onNewSeries}\n        onClose={() => setStartState(null)}\n      />\n    )\n  }\n\n  return (\n    <div className={classes.root}>\n      <CssBaseline />\n      <AppBar position='static' className={classes.appBar}>\n        <Toolbar>\n          <Typography variant='h6' color='inherit' className={classes.grow}>\n           Photos Demo\n          </Typography>\n          <IconButton color='inherit' onClick={() => setSettingsOpen(true)}>\n            <SettingsIcon />\n          </IconButton>\n          <IconButton color='inherit' onClick={() => setAboutOpen(true)}>\n            <InfoIcon />\n          </IconButton>\n        </Toolbar>\n      </AppBar>\n      <div className={classes.inner}>\n        <div className={classes.projMockup}>\n\n          <Typography variant='h5'>My Awesome Project</Typography>\n          <Typography paragraph variant='body1'>\n        Imagine that this page is a project or other item you'd want to attach repeatable photos to\n          </Typography>\n        </div>\n\n        <AppBar position='static' color='default' className={classes.photoBar}>\n          <Toolbar>\n            <Typography variant='subtitle1' color='inherit' className={classes.grow}>\n              Repeatable Photo Series:\n            </Typography>\n            {allowEdit && (\n              <IconButton\n                color='inherit'\n                onClick={onBlock}\n                onMouseDown={onDownThunk()}\n                onMouseUp={onUpThunk()}\n                onTouchStart={onDownThunk()}\n                onTouchEnd={onUpThunk()}\n              >\n                <PlaylistAddIcon />\n              </IconButton>\n            )}\n\n          </Toolbar>\n          {menu}\n        </AppBar>\n        <SeriesList\n          columns={1}\n          allowEdit={allowEdit}\n          seriesList={currSeriesList}\n          tileClick={tileClick}\n          cameraClick={cameraClick}\n          libraryClick={libraryClick}\n        />\n\n        {/*\n\n                SETTINGS DIALOG\n\n        */}\n        <Dialog\n          open={settingsOpen}\n          onClose={() => setSettingsOpen(false)}\n          aria-labelledby='form-dialog-title'\n        >\n          <DialogTitle id='form-dialog-title'>Settings</DialogTitle>\n          <DialogContent>\n\n            <FormControlLabel\n              fullWidth\n              control={\n                <Switch\n                  checked={allowEdit}\n                  onChange={() => setAllowEdit(!allowEdit)}\n                  color='primary'\n                />\n              }\n              labelPlacement='start'\n              label='Allow Edits?'\n            />\n            <Typography paragraph variant='caption'>\n             Turn this off to simulate what a view-only experience is like.\n            </Typography>\n\n            <Button fullWidth variant='contained' color='secondary' className={classes.button} onClick={reloadData}>\n                RELOAD DATA\n            </Button>\n\n            <Typography paragraph variant='caption'>\n              If you have deleted the stock test series click this button to bring them back.\n            </Typography>\n\n            <Button fullWidth variant='contained' color='primary' className={classes.button} onClick={dumpData}>\n                Dump DB to console\n            </Button>\n\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={() => setSettingsOpen(false)} color='primary'>\n              Ok\n            </Button>\n          </DialogActions>\n        </Dialog>\n\n        {/*\n\n                ABOUT DIALOG\n\n        */}\n        <Dialog\n          open={aboutOpen}\n          fullScreen\n          onClose={() => setAboutOpen(false)}\n          aria-labelledby='form-dialog-title'\n        >\n          <DialogTitle id='form-dialog-title'>About</DialogTitle>\n          <DialogContent>\n            <Typography paragraph variant='body1'>\n              This is a proof of concept app showing how repeatable photos can work as a plugin in an\n              existing app\n            </Typography>\n            <Divider />\n            <Typography paragraph variant='subtitle1'>Photo Series</Typography>\n            <Typography paragraph variant='body1'>\n              A Photo series is a set of photos taken from the same geographic position and facing the same direction\n            </Typography>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={() => setAboutOpen(false)} color='primary'>\n              Ok\n            </Button>\n          </DialogActions>\n        </Dialog>\n      </div>\n    </div>\n  )\n}\n\nTestApp.propTypes = {\n  classes: PropTypes.object.isRequired\n}\n\nexport default withStyles(style)(TestApp)\n","export default theme => ({\n  root: {\n    display: 'flex',\n    flexDirection: 'column',\n    background: theme.palette.background.paper,\n    height: '100%'\n  },\n  appBar: {\n    flexGrow: 0\n  },\n  photoBar: {\n\n  },\n  grow: {\n    flexGrow: 1\n  },\n  projMockup: {\n    padding: theme.spacing.unit * 2\n  },\n  inner: {\n    position: 'relative',\n    flexGrow: 1,\n    overflowY: 'scroll',\n    overflowX: 'hidden',\n    '-webkit-overflow-scrolling': 'touch'\n  }\n})\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n)\n\nexport function register (config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href)\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config)\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          )\n        })\n      }\n      else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config)\n      }\n    })\n  }\n}\n\nfunction registerValidSW (swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing\n        if (installingWorker == null) {\n          return\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              )\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration)\n              }\n            }\n            else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.')\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration)\n              }\n            }\n          }\n        }\n      }\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error)\n    })\n}\n\nfunction checkValidServiceWorker (swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type')\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload()\n          })\n        })\n      }\n      else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config)\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      )\n    })\n}\n\nexport function unregister () {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister()\n    })\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport TestApp from './TestApp/TestApp'\nimport * as serviceWorker from './serviceWorker'\nimport './index.css'\nrequire('typeface-roboto')\n\nReactDOM.render(<TestApp />, document.getElementById('root'))\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.register()\n\nfunction addToHomeScreen () {\n  const a2hsBtn = document.querySelector('.ad2hs-prompt') // hide our user interface that shows our A2HS button\n  a2hsBtn.style.display = 'none' // Show the prompt\n  deferredPrompt.prompt() // Wait for the user to respond to the prompt\n  deferredPrompt.userChoice\n    .then(choiceResult => {\n      if (choiceResult.outcome === 'accepted') console.log('User accepted the A2HS prompt')\n      else console.log('User dismissed the A2HS prompt')\n\n      deferredPrompt = null\n    })\n}\n\nfunction showAddToHomeScreen () {\n  const a2hsBtn = document.querySelector('.ad2hs-prompt')\n  a2hsBtn.style.display = 'block'\n  a2hsBtn.addEventListener('click', addToHomeScreen)\n}\n\nlet deferredPrompt\nwindow.addEventListener('beforeinstallprompt', e => {\n  // Prevent Chrome 67 and earlier from automatically showing the prompt\n  e.preventDefault()\n  // Stash the event so it can be triggered later.\n  deferredPrompt = e\n\n  showAddToHomeScreen()\n})\n\n// Detects if device is on iOS\nconst isIos = () => {\n  const userAgent = window.navigator.userAgent.toLowerCase()\n  return /iphone|ipad|ipod/.test(userAgent)\n}\n// Detects if device is in standalone mode\nconst isInStandaloneMode = () => ('standalone' in window.navigator) && (window.navigator.standalone)\n\n// Checks if should display install popup notification:\nif (isIos() && !isInStandaloneMode()) {\n  console.log('I AM on IOS and I am NOT in standalone mode.')\n  // this.setState({ showInstallMessage: true })\n}\n"],"sourceRoot":""}