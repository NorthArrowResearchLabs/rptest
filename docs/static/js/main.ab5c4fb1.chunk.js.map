{"version":3,"sources":["components/controls/useNewImageMenu.jsx","lib/datelib.js","views/SeriesList/SeriesList.jsx","views/SeriesList/SeriesList.style.js","components/ContextMenu.jsx","lib/useComponentSize.js","components/maps/styles/index.js","components/maps/styles/StyleButtons.jsx","config.js","components/maps/BaseMap.jsx","components/maps/MapDot/MapDot.jsx","components/maps/MapDot/MapDot.style.js","components/controls/ExpandNote.jsx","components/TagChip.jsx","lib/SeriesConfig.js","contexts.js","components/SeriesInfo/SeriesInfo.jsx","components/SeriesInfo/SeriesInfo.style.js","components/Photo/PhotoTags/PhotoTagChip.style.js","components/Photo/PhotoTags/XYTagChip.jsx","components/Photo/PhotoTags/XYTagSelect.jsx","components/Photo/PhotoTags/XYTagSelect.style.js","components/Photo/PhotoTags/XYTagChooser.jsx","components/Photo/PhotoTags/XYTagChooser.style.js","lib/Tags.js","components/Photo/PhotoTags/useTags.js","components/Photo/Photo.jsx","components/Photo/Photo.style.js","components/SwipeShow/SwipeShow.jsx","components/SwipeShow/SwipeShow.style.js","components/dialogs/DeleteDialog.jsx","components/PhotoGrid/PhotoGrid.jsx","components/PhotoGrid/PhotoGrid.style.js","views/SeriesView/SeriesView.jsx","views/SeriesView/SeriesView.style.js","components/controls/useFormFieldState.jsx","components/controls/TextAreaControl.jsx","components/controls/TextFieldControl.jsx","views/SeriesEdit/SeriesEdit.jsx","views/SeriesEdit/SeriesEdit.style.js","views/Slideshow/Slideshow.jsx","views/Slideshow/Slideshow.style.js","components/controls/TagControl.jsx","components/controls/TagControl.style.js","components/controls/DateControl.jsx","components/PhotoInfo/PhotoInfo.jsx","components/PhotoInfo/PhotoInfo.style.js","views/PhotoViewTool/PhotoViewTool.jsx","views/PhotoViewTool/PhotoViewTool.style.js","lib/Photo.js","lib/Series.js","components/controls/PhotoFadeSlider.jsx","views/PhotoReviewTool/PhotoReviewTool.jsx","views/PhotoReviewTool/PhotoReviewTool.style.js","lib/useCamera.js","views/CameraTool/CameraTool.jsx","views/CameraTool/CameraTool.style.js","components/NewPhotoInfo/NewPhotoInfo.jsx","components/NewPhotoInfo/NewPhotoInfo.style.js","lib/useFileInput.js","NewPhoto.jsx","lib/sensors.js","RepeatablePhotos.jsx","TestApp/seriesConfig.js","TestApp/db.js","TestApp/TestApp.jsx","TestApp/TestApp.style.js","serviceWorker.js","index.js"],"names":["useNewImageMenu","cameraClick","libraryClick","_useState","useState","_useState2","Object","slicedToArray","menuEl","setMenuEl","_useState3","_useState4","series","setSeries","_useState5","_useState6","down","setDown","downRef","useRef","current","onDownThunk","e","el","currentTarget","setTimeout","onUpThunk","onBlock","stopPropagation","preventDefault","menu","react_default","a","createElement","CameraPopup","onCamera","onLibrary","onClose","withStyles","theme","root","_ref","classes","index_es","id","anchorEl","open","Boolean","className","onMouseUp","onTouchEnd","icons_index_es","formatDate","utctimestamp","format","arguments","length","undefined","moment","display","flexWrap","justifyContent","overflow","backgroundColor","palette","background","paper","fab","position","top","right","height","spacing","unit","width","fab2","left","seriesList","allowEdit","tileClick","columns","_useNewImageMenu","cols","cellHeight","map","seriesItem","idx","sortedPhotos","toConsumableArray","photos","sort","b","parseInt","date","photo","key","concat","onClick","src","url","base64","alt","name","onMouseDown","onTouchStart","color","title","subtitle","ContextMenu","menuItems","item","action","text","require","useCallback","useLayoutEffect","getSize","offsetWidth","offsetHeight","useComponentSize","ref","ComponentSize","setComponentSize","handleResize","ResizeObserver","resizeObserver","observe","disconnect","window","addEventListener","removeEventListener","maps_styles","toolTip","Icon","SatelliteOutlined","ActiveIcon","SatIcon","style","Satellite","TerrainOutlined","Terrain","TopoMap","DirectionsCarOutlined","DirectionsCar","BasicMap","zIndex","iconButton","margin","padding","border","borderRadius","fontSize","active","secondary","dark","icon","currStyle","mapStyles","setCurrStyle","_ref2","classNames","activeIcon","config","mapBoxToken","process","tagColors","BaseMap","props","_useMap","useMap","_useMap2","viewport","onViewportChange","mapRef","size","children","onMapDataEvent","stylechooser","esm","assign","mapStyle","onData","objectSpread","mapboxApiAccessToken","styles_StyleButtons","hideNavControls","showZoom","lockZoom","showCompass","lockRotation","Array","isArray","c","handleChild","child","defaultProps","zoom","latitude","longitude","maxZoom","minZoom","MapStyles","lockToBounds","lockPan","maxBounds","incomingOnViewportChange","zoomBounds","pitch","minPitch","maxPitch","bearing","setViewport","useEffect","newViewport","mapWrapper","svgDot","transformOrigin","transform","svgArc","editable","onChange","direction","objectWithoutProperties","components_maps_BaseMap","version","viewBox","cx","cy","r","stroke","strokeWidth","fill","d","fillOpacity","strokeOpacity","ExpandNote","expandNote","setExpandNote","variant","maxHeight","minHeight","expanded","whiteSpace","paddingBottom","transition","transitions","create","easing","easeInOut","duration","complex","&::before","content","bottom","opacity","tagChips","marginRight","marginTop","deleteIcon","chipAvatar","reduce","acc","tagCol","defineProperty","getContrastText","edit","tag","group","onDelete","label","data","TYPES","SeriesConfig","seriesConfig","_this","this","classCallCheck","getTagType","typeId","tags","find","tt","getTagTypeIndex","console","log","findIndex","getXYTagTypes","filter","isXY","getNonXYTagTypes","getSeriesMeta","keys","meta","type","default","getPhotoMeta","React","createContext","heading","textField","marginBottom","note","marginLeft","chip","useContext","seriesConfigInst","SeriesConfigClass","newTags","forEach","existing","count","controls_ExpandNote","list","primary","tagKey","idtk","values","components_TagChip","render","xyTagChip","cursor","editing","reversedChip","flexDirection","chipAvatarIcon","reversedDelete","chipBucket","reversedChipBucket","newSize","onTagDragOver","onTagDragStop","onNewTag","onTagDelete","isReversed","relCoords","x","newWidth","stopBadness","react_draggable_default","disabled","bounds","newHeight","y","onDrag","onStop","avatar","noOptionsMessage","singleValue","placeholder","input","valueContainer","flex","alignItems","tagConfig","options","tc","value","allowAdditions","react_select_esm","components","Control","Menu","NoOptionsMessage","Option","Placeholder","ValueContainer","isClearable","isSearchable","Creatable_default","fullWidth","InputProps","inputComponent","inputProps","selectProps","inputRef","innerRef","innerProps","textFieldProps","_ref3","square","_ref4","_ref5","isFocused","isSelected","buttonRef","selected","component","fontWeight","_ref6","header","listItem","dlgBody","paddingLeft","paddingRight","coords","xyTags","t","scroll","paperScrollPaper","aria-labelledby","tagType","PhotoTags_XYTagSelect","Tags","findTagById","tagId","getXYTags","xyTagIds","indexOf","getNonXYTags","NonXYTagIds","createNewTagObj","uuid","createExistingTagObj","createNewXYTagObj","createExistingXYTagObj","getRelXYTags","multiplier","useTags","isDragging","setIsDragging","newTagDialog","setNewTagDialog","tagClass","addTag","__isNew__","updateTagLocation","oldTag","newX","newY","onAddTagTrigger","pageX","innerWidth","pageY","innerHeight","TagChooser","PhotoTags_XYTagChooser","inner","img","formControl","showTags","refImgWrap","setNewSize","_useComponentSize","_useTags","PhotoTags_XYTagChip","onLoad","event","_event$target","target","naturalHeight","naturalWidth","Math","min","SwipeShow","onImageSelect","activePhoto","setActivePhoto","setShowTags","singular","lib_default","axis","index","onChangeIndex","enableMouseEvents","photoWrapper","components_Photo_Photo","manualBack","manualForward","actionIcon","Fragment","tagButton","badgeContent","steps","activeStep","mobileStepper","dots","isFullScreen","slides","dateCaption","textAlign","withTheme","message","onConfirm","disableBackdropClick","disableEscapeKeyDown","maxWidth","PhotoGrid","multiSelect","onTileClick","selectMode","setSelectMode","selectedItems","setSelectedItems","deleteConfirm","setDeleteConfirm","handleCancelSelection","toggleListItem","remaining","arrId","handlePhotoTap","tile","unSelectedTile","selectedTile","aria-label","addFab","handleAddToSelection","autoHideDuration","ContentProps","aria-describedby","snackbarContent","snackbar","dialogs_DeleteDialog","confirmation","& img","appBar","flexGrow","overflowY","-webkit-overflow-scrolling","tabMenu","mapWrap","grow","gridList","titleBar","titleText","menuButton","onSlideshowStart","onEditSeries","onDeletePhotos","onCameraAdd","onDeleteSeries","onLibraryAdd","onMenuBack","contextEl","setContextEl","listTypeTab","setListTypeTab","addPhotoButton","startSlideshowButton","aria-haspopup","components_ContextMenu","components_SwipeShow_SwipeShow","components_SeriesInfo_SeriesInfo","components_PhotoGrid_PhotoGrid","maps_MapDot_MapDot","location","headerStyle","fieldTitle","& svg","editButton","grey","cancelButton","error","main","useFormFieldState","defaultValue","onChangeExt","permaEdit","setEditing","_onChange","val","onSave","onReset","onCancel","Header","checkButton","PropTypes","oneOfType","arrayOf","node","isRequired","TextAreaControl","collapsed","hint","collapsedHeight","_useFormFieldState","textRender","rootEdit","multiline","rows","rowsMax","textBody","& textarea","overflowX","form","field","slider","formLabel","minWidth","chips","rotation","setRotation","onChangeFormState","elevation","noValidate","autoComplete","controls_TextFieldControl","controls_TextAreaControl","mapFormLabel","Slider_default","container","max","step","dir","newDir","onRotationChange","Slideshow","_useStepper","useStepper","lastStep","handleForward","handleBack","paused","pause","play","showXYTags","setShowXYTags","slideContainer","slide","last","labelBadge","titlePosition","dotActive","nextButton","backButton","swipeAble","tagContainer","tagChip","num","interval","setActiveStep","setPaused","_useState7","_useState8","timer","setTimer","_useState9","_useState10","setLastStep","createTimer","newTimer","setInterval","oldStep","destroyTimer","clearInterval","actionButtons","onSelectChange","inputValue","removedValue","option","newVal","tcv","newCreateVal","v","SingleValue","removeProps","MultiValue","tagValues","selectOptions","remainingTags","isMulti","_ref7","_ref8","_ref9","disableField","isoStr","Date","dlgTitleContainer","dlgTitle","paddingTop","onChangeLocal","fieldName","tagInst","TagClass","fullScreen","disableTypography","controls_DateControl","controls_TagControl","STATES","tipChip","activeButton","onUpdatePhoto","newPhoto","tempPhoto","setTempPhoto","mode","setMode","tagsClass","changeMode","desired","onCommitTags","infoButton","infoWindow","components_PhotoInfo_PhotoInfo","Photo","setMeta","featured","jsDate","utc","rawData","Series","newSeries","PhotoFadeSlider","setSlider","sliderLabel","track","thumb","vertical","capturedContainer","referenceContainer","captured","reference","referenceTextContainer","newText","textShadow","refText","defaultRefPhotoId","onRetry","newRefPhoto","p","refPhoto","controls_PhotoFadeSlider","useCamera","onCapture","webcam","setWebcam","cameraError","setCameraError","captureImage","asyncToGenerator","regenerator_default","mark","_callee","capturedData","wrap","_context","prev","next","takeBase64Photo","quality","stop","apply","Webcam","document","getElementById","setup","catch","initCamera","webcamElement","canvasElement","protocol","hostname","warn","navigator","mediaDevices","getUserMedia","aspectRatio","Promise","resolve","reject","audio","video","facingMode","then","mediaStream","srcObject","URL","createObjectURL","onloadedmetadata","err","Error","imageWidth","videoWidth","imageHeight","videoHeight","context","getContext","drawImage","_this2","_this$_drawImage","_drawImage","toBlob","blob","_this$_drawImage2","toDataURL","cameraErrorText","disabledFab","cameraFab","@media (orientation: landscape)","@media (orientation: portrait)","cameraIcon","cancelFab","cancelIcon","swipeDrawer","libraryFab","myLocationFab","myLocationIcon","onShutter","setRefPhoto","drawerOpen","setDrawerOpen","_useCamera","autoPlay","playsInline","muted","buttonFab","libraryIcon","anchor","paperAnchorLeft","onOpen","tabIndex","swipeDrawerContainer","role","onKeyDown","isNewSeries","onChangeLocalSeries","useFileInput","fileInput","handleChange","evt","file","files","reader","FileReader","onload","result","readAsDataURL","click","MODES","NewPhoto","inputMethod","onCreate","setNewPhoto","SeriesClass","setNewSeries","photoRefId","setPhotoRefId","history","_changeMode","orientation","absolute","alpha","beta","gamma","deviceOrientation","setDeviceOrientation","handleDeviceOrientation","useDeviceOrientation","geo","watchId","accuracy","altitude","altitudeAccuracy","speed","timestamp","now","state","setState","mounted","onEvent","geolocation","getCurrentPosition","watchPosition","clearWatch","useGeolocation","fileClick","exif","DateTimeOriginal","PhotoClass","loc","_newPhoto$rawData$geo","geolocate","newModeName","views_CameraTool_CameraTool","refId","_newPhoto$rawData$geo2","orient","views_PhotoReviewTool_PhotoReviewTool","oldHistory","oldMode","pop","components_NewPhotoInfo_NewPhotoInfo","VIEW_ONLY_MODES","RepeatablePhotos","modeName","inputMethodINIT","onNewSeries","pid","sp","newPid","newInputMethod","from","to","lastMode","views_SeriesView_SeriesView","photoIdArr","views_SeriesEdit_SeriesEdit","views_PhotoViewTool_PhotoViewTool","views_Slideshow_Slideshow","src_NewPhoto","contexts_SeriesConfig","Provider","canEdit","TestApp_seriesConfig","project","reach","user","STORENAME","dbPromise","openDb","upgradeDB","store","createObjectStore","put","_x","TestApp_db","reload","_reload","_callee3","db","tx","_context3","sent","transaction","_callee2","_context2","objectStore","_x2","get","_get","_callee4","_context4","abrupt","_x3","getAll","_getAll","_callee5","_context5","set","_set","_callee6","_context6","complete","_x4","_x5","delete","_delete2","_callee7","_context7","_x6","clear","_clear","_callee8","_context8","_keys","_callee9","_context9","getAllKeys","photoBar","projMockup","currSeriesList","setSeriesList","aboutOpen","setAboutOpen","setAllowEdit","settingsOpen","setSettingsOpen","rpState","setStartState","dumpData","JSON","stringify","fetchData","src_RepeatablePhotos","s","paragraph","views_SeriesList_SeriesList","selectedSeries","control","checked","labelPlacement","button","isLocalhost","match","registerValidSW","swUrl","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","ReactDOM","src_TestApp_TestApp","href","origin","fetch","response","contentType","headers","status","ready","unregister","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.ab5c4fb1.chunk.js","sourcesContent":["import React, { useState, useRef } from 'react'\nimport PropTypes from 'prop-types'\nimport {\n  Menu,\n  MenuItem\n} from '@material-ui/core'\nimport {\n  AddAPhoto as AddCameraIcon,\n  PhotoLibrary as PhotoLibraryIcon\n} from '@material-ui/icons'\nimport { withStyles } from '@material-ui/core/styles'\n\nconst useNewImageMenu = (cameraClick, libraryClick) => {\n  const [menuEl, setMenuEl] = useState(null)\n  const [series, setSeries] = useState(null)\n  const [down, setDown] = useState(false)\n  const downRef = useRef(down)\n  downRef.current = down\n\n  const startTimer = (el) => {\n    setDown(true)\n    setTimeout(() => {\n      if (downRef && downRef.current) setMenuEl(el)\n    }, 300)\n  }\n\n  const onDownThunk = series => (e) => {\n    // console.log('onDown', e.currentTarget)\n    setSeries(series)\n    startTimer(e.currentTarget)\n  }\n\n  const onUpThunk = series => (e) => {\n    // console.log('onUp', e.currentTarget)\n    setSeries(series)\n    setDown(false)\n    cameraClick(series)\n  }\n\n  const onCamera = (e) => {\n    // console.log('onCamera', e.currentTarget)\n    e.stopPropagation()\n    e.preventDefault()\n    cameraClick(series)\n    setMenuEl(null)\n  }\n\n  const onLibrary = (e) => {\n    // console.log('onLibrary', e.currentTarget)\n    e.stopPropagation()\n    e.preventDefault()\n    libraryClick(series)\n    setMenuEl(null)\n  }\n\n  const onClose = (e) => {\n    // console.log('Close Menu', e.currentTarget)\n    e.stopPropagation()\n    e.preventDefault()\n    setMenuEl(null)\n  }\n\n  const onBlock = (e) => {\n    // console.log('Block', e.currentTarget)\n    e.stopPropagation()\n    e.preventDefault()\n  }\n\n  return {\n    onDownThunk,\n    onUpThunk,\n    onBlock,\n    menu: (\n      <CameraPopup {...{ menuEl, onCamera, onLibrary, onClose }} />\n    )\n  }\n}\n\nexport default useNewImageMenu\n\nconst CameraPopupUnstyled = ({ classes, menuEl, onCamera, onLibrary, onClose }) => (\n  <Menu\n    id='simple-menu'\n    anchorEl={menuEl}\n    open={Boolean(menuEl)}\n    className={classes.root}\n    onClose={onClose}\n  >\n    <MenuItem onMouseUp={onCamera} onTouchEnd={onCamera}>\n      <AddCameraIcon />Add from camera\n    </MenuItem>\n    <MenuItem onMouseUp={onLibrary} onTouchEnd={onLibrary}>\n      <PhotoLibraryIcon /> Add from Library\n    </MenuItem>\n  </Menu>\n)\n\nCameraPopupUnstyled.propTypes = {\n  classes: PropTypes.object.isRequired,\n  menuEl: PropTypes.object,\n  onCamera: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired,\n  onLibrary: PropTypes.func.isRequired\n}\n\nconst style = theme => ({\n  root: {\n\n  }\n})\n\nexport const CameraPopup = withStyles(style)(CameraPopupUnstyled)\n","import Faker from 'faker'\nimport moment from 'moment'\n\n/**\n * get a fake past date as a unix millisecond utc timestamp\n */\nexport const fakePastDate = () => {\n  return moment.utc(Faker.date.past()).format('x')\n}\n\n/**\n * Takes a UTC unix timestamp integer or string (milliseconds)\n * and a valid moment format string and returns a formatted\n * date string\n * @param {*} utctimestamp\n * @param {*} format\n */\nexport const formatDate = (utctimestamp, format = 'LLLL') => {\n  return moment(utctimestamp, 'x')\n    .format(format)\n}\n\n/**\n * Takes a UTC timestamp and returns a moment object in LOCAL mode\n * @param {*} utctimestamp\n */\nexport const parseDate = (utctimestamp) => {\n  return moment(utctimestamp, 'x')\n}\n\n/**\n * This returns the object in LOCAL mode\n * @param {*} jsDate\n */\nexport const convertJSDatetoTimestamp = (jsDate) => {\n  return moment\n    .utc(jsDate)\n    .format('x')\n}\n\nexport function timestampToHTML5Input (utctimestamp) {\n  // // trim the Z and milliseconds + seconds\n  return moment(utctimestamp, 'x').format('YYYY-MM-DDTkk:mm')\n}\n\nexport function HTML5InputToTimestamp (isoStr) {\n  return moment(new Date(isoStr), 'YYYY-MM-DDTkk:mm').format('x')\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport {\n  GridList,\n  GridListTile,\n  GridListTileBar,\n  Fab\n} from '@material-ui/core'\nimport {\n  AddAPhoto as AddCameraIcon\n} from '@material-ui/icons'\nimport { withStyles } from '@material-ui/core/styles'\nimport useNewImageMenu from '../../components/controls/useNewImageMenu'\nimport style from './SeriesList.style'\nimport { formatDate } from '../../lib/datelib'\n\nconst SeriesList = ({ classes, seriesList, allowEdit, tileClick, cameraClick, columns, libraryClick }) => {\n  const { onDownThunk, onUpThunk, onBlock, menu } = useNewImageMenu(\n    cameraClick,\n    libraryClick\n  )\n\n  return (\n    <GridList cols={columns || 1} cellHeight={200} className={classes.root}>\n      {seriesList.map((seriesItem, idx) => {\n        // const photo = seriesItem.photos.find(photo => photo.featured === true)\n        const sortedPhotos = [...seriesItem.photos]\n        sortedPhotos.sort((a, b) => parseInt(b.date, 10) - parseInt(a.date, 10))\n        const photo = sortedPhotos[0]\n        return (\n          <GridListTile key={`gridTile${idx}`} onClick={() => tileClick(seriesItem)}>\n            {photo && (\n              <img\n                src={photo.url || photo.base64}\n                alt={seriesItem.name}\n              />\n            )}\n            {allowEdit && (\n              <Fab\n                onClick={onBlock}\n                onMouseDown={onDownThunk(seriesItem)}\n                onMouseUp={onUpThunk(seriesItem)}\n                onTouchStart={onDownThunk(seriesItem)}\n                onTouchEnd={onUpThunk(seriesItem)}\n                color='secondary'\n                className={classes.fab}\n              >\n                <AddCameraIcon />\n              </Fab>\n            )}\n            {menu}\n            <GridListTileBar\n              title={seriesItem.name}\n              subtitle={<span>{seriesItem.photos.length} photos <strong>Last Photo</strong>: {formatDate(seriesItem.photos[0].date, 'llll')}</span>}\n            />\n          </GridListTile>\n        )\n      })}\n    </GridList>\n  )\n}\n\nSeriesList.propTypes = {\n  classes: PropTypes.object.isRequired,\n  seriesList: PropTypes.array.isRequired,\n  columns: PropTypes.number,\n  allowEdit: PropTypes.bool,\n  tileClick: PropTypes.func.isRequired,\n  cameraClick: PropTypes.func.isRequired,\n  libraryClick: PropTypes.func.isRequired\n}\n\nexport default withStyles(style)(SeriesList)\n","export default theme => ({\n  root: {\n    display: 'flex',\n    flexWrap: 'wrap',\n    justifyContent: 'space-around',\n    overflow: 'hidden',\n    backgroundColor: theme.palette.background.paper\n  },\n  fab: {\n    position: 'absolute',\n    top: 10,\n    right: 10,\n    height: theme.spacing.unit * 5,\n    width: theme.spacing.unit * 5\n    // color: 'rgba(255, 255, 255, 1.0)'\n  },\n  fab2: {\n    position: 'absolute',\n    top: 10,\n    left: 10,\n    height: theme.spacing.unit * 5,\n    width: theme.spacing.unit * 5\n    // color: 'rgba(255, 255, 255, 1.0)'\n  }\n})\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Menu, MenuItem } from '@material-ui/core'\n// import { Menu as MenuIcon } from '@material-ui/icons'\n\nconst ContextMenu = ({ anchorEl, onClose, menuItems }) => (\n  <Menu\n    anchorEl={anchorEl}\n    open={!!anchorEl}\n    onClose={onClose}\n  >\n    {menuItems.map((item, idx) => (\n      <MenuItem\n        key={`contextMenu-${idx}`}\n        onClick={() => {\n          onClose()\n          item.action()\n        }}>\n        {item.text}\n      </MenuItem>\n    ))}\n  </Menu>\n)\n\nContextMenu.propTypes = {\n  anchorEl: PropTypes.object,\n  onClose: PropTypes.func,\n  menuItems: PropTypes.array\n}\n\nexport default ContextMenu\n","let { useCallback, useState, useLayoutEffect } = require('react')\n\nconst getSize = el => ({\n  width: !el ? 0 : el.offsetWidth,\n  height: !el ? 0 : el.offsetHeight\n})\n\nconst useComponentSize = ref => {\n  let [ComponentSize, setComponentSize] = useState(\n    getSize(ref ? ref.current : {})\n  )\n\n  const handleResize = useCallback(() => {\n    if (ref.current) setComponentSize(getSize(ref.current))\n  }, [ref])\n\n  useLayoutEffect(() => {\n    if (!ref.current) return\n\n    handleResize()\n\n    if (typeof ResizeObserver === 'function') {\n      let resizeObserver = new ResizeObserver(() => handleResize())\n      resizeObserver.observe(ref.current)\n\n      return () => {\n        resizeObserver.disconnect(ref.current)\n        resizeObserver = null\n      }\n    }\n    else {\n      window.addEventListener('resize', handleResize)\n\n      return () => {\n        window.removeEventListener('resize', handleResize)\n      }\n    }\n  },\n  [ref.current])\n\n  return ComponentSize\n}\n\nexport default useComponentSize\n","import Satellite from './Satellite.json'\nimport BasicMap from './BasicMap.json'\nimport TopoMap from './TopoMap.json'\nimport {\n  Satellite as SatIcon,\n  SatelliteOutlined,\n  DirectionsCar,\n  DirectionsCarOutlined,\n  Terrain,\n  TerrainOutlined\n} from '@material-ui/icons'\n\nexport default [\n  {\n    toolTip: 'Aerial Map',\n    Icon: SatelliteOutlined,\n    ActiveIcon: SatIcon,\n    color: 'green',\n    style: Satellite\n  },\n  {\n    toolTip: 'Topo Map',\n    Icon: TerrainOutlined,\n    ActiveIcon: Terrain,\n    color: 'blue',\n    style: TopoMap\n  },\n  {\n    toolTip: 'Road Map',\n    Icon: DirectionsCarOutlined,\n    ActiveIcon: DirectionsCar,\n    color: 'blue',\n    style: BasicMap\n  }\n]\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\nimport { IconButton } from '@material-ui/core'\nimport { withStyles } from '@material-ui/core/styles'\n\nconst style = theme => ({\n  root: {\n    zIndex: 10,\n    top: theme.spacing.unit,\n    right: theme.spacing.unit,\n    position: 'absolute'\n  },\n  iconButton: {\n    // background: theme.palette.primary.dark,\n    // color: theme.palette.primary.light,\n    margin: theme.spacing.unit / 2,\n    padding: theme.spacing.unit / 2,\n    border: '2px solid',\n    borderRadius: theme.spacing.unit,\n    fontSize: 20\n  },\n  active: {\n    background: theme.palette.secondary.dark,\n    color: 'white'\n  },\n  icon: {\n\n  }\n})\n\nconst StyleButtons = ({ classes, currStyle, mapStyles, setCurrStyle }) => (\n  <div className={classes.root}>\n    {\n      mapStyles.map(({ Icon, ActiveIcon }, idx) => {\n        return <IconButton key={`stylebutton${idx}`}\n          className={classNames(classes.iconButton, idx === currStyle && classes.active)}\n          onClick={() => setCurrStyle(idx)}>\n          {idx === currStyle\n            ? <ActiveIcon className={classes.icon} />\n            : <Icon className={classes.activeIcon} />\n          }\n        </IconButton>\n      })\n    }\n\n  </div>\n)\n\nStyleButtons.propTypes = {\n  classes: PropTypes.object.isRequired,\n  currStyle: PropTypes.number,\n  mapStyles: PropTypes.array,\n  setCurrStyle: PropTypes.func\n}\n\nexport default withStyles(style)(StyleButtons)\n","export default {\n  mapBoxToken: process.env.REACT_APP_MAPBOX_TOKEN,\n  // Bright Pastel\n  tagColors: [\n    '#418CF0', '#FCB441', '#E0400A', '#056492', '#BFBFBF', '#1A3B69', '#FFE382', '#129CDD', '#CA6B4B',\n    '#005CDB', '#F3D288', '#506381', '#F1B9A8', '#E0830A', '#7893BE'\n  ]\n}\n","import React, { useState, useEffect, useRef } from 'react'\nimport ReactMapGL, { NavigationControl } from 'react-map-gl'\nimport PropTypes from 'prop-types'\n// import WebMercatorViewport from 'viewport-mercator-project'\nimport useComponentSize from '../../lib/useComponentSize'\nimport MapStyles from './styles'\nimport StyleButtons from './styles/StyleButtons'\nimport config from '../../config'\nimport classNames from 'classnames'\nimport 'mapbox-gl/dist/mapbox-gl.css'\nimport './BaseMap.css'\n\n/**\n * Note that this component technically has state but it is designed to be functionally stateless\n */\nconst BaseMap = (props) => {\n  const [viewport, currStyle, setCurrStyle, onViewportChange] = useMap(props)\n  const mapRef = useRef(null)\n  const size = useComponentSize(mapRef)\n  const {\n    children, mapStyles,\n    onMapDataEvent,\n    stylechooser\n  } = props\n\n  return (\n    <div className={classNames('BaseMap', props.className)} ref={mapRef} style={{ height: '100%', width: '100%' }}>\n      <ReactMapGL\n        {...viewport}\n        height={size.height}\n        width={size.width}\n        mapStyle={mapStyles[currStyle].style}\n        onData={onMapDataEvent}\n        onViewportChange={viewport => onViewportChange({ ...viewport, ...size })}\n        mapboxApiAccessToken={config.mapBoxToken} >\n        { stylechooser ? <StyleButtons currStyle={currStyle} mapStyles={mapStyles} setCurrStyle={setCurrStyle} /> : null }\n        {/* Augment children with some props they need to survive in this harsh world */}\n        { !props.hideNavControls && <NavigationControl onViewportChange={viewport => onViewportChange({ ...viewport, ...size })} showZoom={!props.lockZoom} showCompass={!props.lockRotation} /> }\n        {\n          children && Array.isArray(children)\n            ? children.map(c => handleChild(c, viewport, size.height, size.width))\n            : handleChild(children, viewport, size.height, size.width)\n        }\n      </ReactMapGL>\n    </div>\n  )\n}\n\nfunction handleChild (child, viewport, height, width) {\n  return typeof child === 'function'\n    ? child(viewport, height, width)\n    : child\n}\n\nBaseMap.propTypes = {\n  // Anything else we want to add to the map\n  children: PropTypes.any,\n  deckelements: PropTypes.array,\n  data: PropTypes.array,\n\n  // Some switches to make things easier\n  stylechooser: PropTypes.bool,\n  lockPan: PropTypes.bool,\n  lockRotation: PropTypes.bool,\n  lockZoom: PropTypes.bool,\n  lockToBounds: PropTypes.bool,\n  hideNavControls: PropTypes.bool,\n\n  minPitch: PropTypes.number,\n  maxPitch: PropTypes.number,\n  pitch: PropTypes.number,\n\n  maxBounds: PropTypes.array,\n  zoomBounds: PropTypes.array,\n  InnerBounds: PropTypes.array,\n\n  mapStyles: PropTypes.array,\n\n  // Just some default props we probably won't set.\n  latitude: PropTypes.number,\n  longitude: PropTypes.number,\n  zoom: PropTypes.number,\n\n  onMapDataEvent: PropTypes.func,\n  onViewportChange: PropTypes.func\n\n  // We get these props from calculating the window size at a higher level\n  // size: PropTypes.shape({\n  //   width: PropTypes.number.isRequired,\n  //   height: PropTypes.number.isRequired\n  // })\n}\nBaseMap.defaultProps = {\n  stylechooser: true,\n  zoom: 12,\n  latitude: 49.3050394,\n  longitude: -123.1398254,\n  maxZoom: 18,\n  minZoom: 1,\n  mapStyles: MapStyles,\n  lockToBounds: true\n}\n\nexport default BaseMap\n\nconst useMap = ({\n  lockToBounds, lockPan, lockZoom, lockRotation, maxBounds, latitude, longitude, zoomBounds,\n  onViewportChange: incomingOnViewportChange,\n  zoom, pitch, minPitch, maxPitch, bearing, size\n}) => {\n  const [currStyle, setCurrStyle] = useState(0)\n  const [viewport, setViewport] = useState({\n    latitude: maxBounds ? (maxBounds[1] + maxBounds[3]) / 2 : latitude,\n    longitude: maxBounds ? (maxBounds[0] + maxBounds[2]) / 2 : longitude,\n    zoom: zoom,\n    minPitch: minPitch,\n    maxPitch: maxPitch,\n    bearing: bearing || 0,\n    pitch: pitch || 0\n  })\n\n  // const recalcZoomBounds = () => {\n  //   // On the first run we're going to try to center the bounds.\n  //   const { width, height } = size\n  //   const [minlng, minlat, maxlng, maxlat] = maxBounds\n\n  //   try {\n  //     const wmview = new WebMercatorViewport({ width: width > 0 ? width : size.width, height: height > 0 ? height : size.height })\n  //     console.log('before boundschange', { wmview, bds: [ [minlng, minlat], [maxlng, maxlat] ] })\n  //     const fittedBounds = wmview.fitBounds(\n  //       [ [minlng, minlat], [maxlng, maxlat] ],\n  //       { padding: 20, offset: [0, -40] }\n  //     )\n  //     const newLat = fittedBounds.latitude\n  //     const newLong = fittedBounds.longitude\n  //     zoom = fittedBounds.zoom\n\n  //     return [\n  //       viewport.zoom + 6,\n  //       viewport.zoom - 6\n  //     ]\n  //   }\n  //   catch (e) {\n  //     // Sometimes we don't have a valid bound. Don't make a big deal out of it.\n  //     console.error(e)\n  //   }\n  // }\n\n  // const zoomBounds = useMemo(() => recalcZoomBounds(), [maxBounds, size])\n\n  const onViewportChange = newViewport => {\n    // Here we set/reset the bounds\n    if (lockPan) {\n      newViewport.longitude = viewport.longitude\n      newViewport.latitude = viewport.latitude\n    }\n    else if (maxBounds && lockToBounds) {\n      if (newViewport.longitude < maxBounds[0]) newViewport.longitude = maxBounds[0]\n      else if (newViewport.longitude > maxBounds[2]) newViewport.longitude = maxBounds[2]\n\n      if (newViewport.latitude < maxBounds[1]) newViewport.latitude = maxBounds[1]\n      else if (newViewport.latitude > maxBounds[3]) newViewport.latitude = maxBounds[3]\n    }\n    // Here we set the max and min zoom bounds.\n    if (lockZoom) {\n      newViewport.zoom = viewport.zoom\n    }\n    if (lockRotation) {\n      newViewport.pitch = viewport.pitch\n      newViewport.bearing = viewport.bearing\n    }\n    // else if (zoomBounds) {\n    //   if (newViewport.zoom < zoomBounds.min) newViewport.zoom = zoomBounds.min\n    //   else if (newViewport.zoom > zoomBounds.max) newViewport.zoom = zoomBounds.max\n    // }\n    // console.log('onViewportChange', newViewport)\n    if (typeof incomingOnViewportChange === 'function') incomingOnViewportChange(newViewport)\n    setViewport(newViewport)\n  }\n\n  useEffect(() => {\n    // onViewportChange(viewport)\n  })\n\n  return [viewport, currStyle, setCurrStyle, onViewportChange]\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { withStyles } from '@material-ui/core/styles'\nimport BaseMap from '../BaseMap'\nimport style from './MapDot.style'\n\nconst MapDot = ({ classes, longitude, latitude, editable, onChange, direction, ...props }) => {\n  return (\n    <BaseMap\n      {...props}\n      lockPan={!editable}\n      lockRotation\n      longitude={longitude}\n      onViewportChange={onChange}\n      latitude={latitude}\n    >\n      <svg className={classes.svgDot}\n        version='1.1'\n        viewBox='0, 0, 10, 10'\n      >\n        <circle cx='5' cy='5' r='4'\n          stroke='#CCCCFF'\n          strokeWidth='1'\n          fill='#4444FF'\n        />\n      </svg>\n      {direction !== null ? (\n        <svg className={classes.svgArc}\n          version='1.1'\n          width='100'\n          height='100'\n          viewBox='0, 0, 100, 100'\n          style={{ transform: `translateY(-50%) translateX(-50%) rotateZ(${direction}deg)` }}>\n          <path d='M50,0 C60.946,0.151 72.136,3.514 80.675,10.56 L50,50 L19.325,10.56 C27.938,3.461 39,0.278 50,0 z'\n            fill='#009DC1'\n            fillOpacity='0.444'\n            strokeWidth='0.5'\n            strokeOpacity='0.6'\n            stroke='#FFFFFF'\n          />\n        </svg>\n      ) : null}\n    </BaseMap>\n  )\n}\n\nMapDot.propTypes = {\n  classes: PropTypes.object.isRequired,\n  longitude: PropTypes.number.isRequired,\n  latitude: PropTypes.number.isRequired,\n  direction: PropTypes.number,\n  editable: PropTypes.bool,\n  onChange: PropTypes.func\n}\n\nexport default withStyles(style)(MapDot)\n","export default theme => ({\n  mapWrapper: {\n    width: '100%'\n  },\n  svgDot: {\n    zIndex: 2,\n    position: 'absolute',\n    width: '5%',\n    height: '5%',\n    top: '50%',\n    left: '50%',\n    transformOrigin: '50% 50%',\n    transform: 'translateY(-50%) translateX(-50%)'\n  },\n  svgArc: {\n    zIndex: 1,\n    position: 'absolute',\n    width: '85%',\n    height: '85%',\n    top: '50%',\n    left: '50%',\n    transformOrigin: '50% 50%'\n  }\n})\n","import React, { useState } from 'react'\nimport classNames from 'classnames'\nimport PropTypes from 'prop-types'\nimport { Typography } from '@material-ui/core'\nimport { withStyles } from '@material-ui/core/styles'\n\nconst style = theme => ({\n  root: {\n    position: 'relative',\n    display: 'block',\n    overflow: 'hidden',\n    whiteSpace: 'pre-line',\n    paddingBottom: theme.spacing.unit,\n    transition: theme.transitions.create(['all'], {\n      easing: theme.transitions.easing.easeInOut,\n      duration: theme.transitions.duration.complex\n    }),\n    '&::before': {\n      content: '\"  \"',\n      display: 'block',\n      position: 'absolute',\n      bottom: 0,\n      width: '100%',\n      height: 100,\n      background: `linear-gradient(180deg, rgba(255,255,255,0) 0%, ${theme.palette.background.paper} 100%)`\n    }\n  },\n  expanded: {\n    '&::before': {\n      opacity: 0\n    }\n  }\n})\n\nconst ExpandNote = ({ classes, text, height }) => {\n  const [expandNote, setExpandNote] = useState(false)\n  return (\n    <Typography\n      onClick={() => setExpandNote(!expandNote)}\n      variant='body1'\n      color='inherit'\n      style={{ maxHeight: expandNote ? 5000 : height, minHeight: height }}\n      className={classNames(classes.root, expandNote && classes.expanded)}\n    >\n      {text}\n    </Typography>\n  )\n}\n\nExpandNote.propTypes = {\n  classes: PropTypes.object.isRequired,\n  text: PropTypes.string,\n  height: PropTypes.number\n}\nExpandNote.defaultProps = {\n  height: 100\n}\n\nexport default withStyles(style)(ExpandNote)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\nimport {\n  Chip\n} from '@material-ui/core'\nimport {\n  Cancel as CancelIcon\n} from '@material-ui/icons'\nimport { withStyles } from '@material-ui/core/styles'\nimport config from '../config'\nexport const tagChips = {\n  height: 20\n}\n\nconst style = theme => ({\n  root: {\n    fontSize: '0.6em',\n    height: tagChips.height,\n    marginRight: theme.spacing.unit / 2,\n    marginTop: theme.spacing.unit / 2\n  },\n  deleteIcon: {\n    width: tagChips.height - 1,\n    height: tagChips.height - 1\n  },\n  chipAvatar: {\n    width: tagChips.height,\n    height: tagChips.height\n  },\n  ...config.tagColors.reduce((acc, tagCol, idx) => ({\n    ...acc,\n    [`tag-${idx}`]: {\n      background: `${tagCol}!important`,\n      color: `${theme.palette.getContrastText(tagCol)}!important`\n    }\n  }), {})\n})\n\nconst TagChip = ({ classes, edit, tag, group, onDelete, ...props }) => {\n  return (\n    <Chip\n      label={tag.label}\n      data={tag.id}\n      onDelete={edit ? () => onDelete(tag) : null}\n      deleteIcon={<CancelIcon className={classes.deleteIcon} />}\n      className={classNames(classes.root, classes[`tag-${group}`])}\n      {...props}\n    />\n  )\n}\n\nTagChip.propTypes = {\n  classes: PropTypes.object.isRequired,\n  edit: PropTypes.bool,\n  tag: PropTypes.object.isRequired,\n  onDelete: PropTypes.func,\n  group: PropTypes.number.isRequired\n}\n\nexport default withStyles(style)(TagChip)\n","const TYPES = {\n  // Series meta gets appended automatically to the seriees\n  SERIES: 'SERIES',\n  // Same but now only gets appended to the photo\n  PHOTO: 'PHOTO'\n}\nclass SeriesConfig {\n  constructor (seriesConfig) {\n    this.config = seriesConfig\n  }\n\n  getTagType = (typeId) => this.config.tags.find(tt => tt.id === typeId)\n  // getTagTypeIndex = (typeId) => this.config.tags.findIndex(tt => tt.id === typeId)\n  getTagTypeIndex = (typeId) => {\n    console.log('HERE', typeId)\n    return this.config.tags.findIndex(tt => tt.id === typeId)\n  }\n\n  getXYTagTypes = () => this.config.tags.filter(tt => tt.isXY)\n  getNonXYTagTypes = () => this.config.tags.filter(tt => !tt.isXY)\n\n  getSeriesMeta = () => Object.keys(this.config.meta)\n    .filter(key => this.config.meta[key].type === TYPES.SERIES)\n    .reduce((acc, key) => ({\n      ...acc,\n      [key]: this.config.meta[key].default\n    }), {})\n\n  getPhotoMeta = () => Object.keys(this.config.meta)\n    .filter(key => this.config.meta[key].type === TYPES.PHOTO)\n    .reduce((acc, key) => ({\n      ...acc,\n      [key]: this.config.meta[key].default\n    }), {})\n}\n\nexport default SeriesConfig\n","import React from 'react'\n\nexport const SeriesConfig = React.createContext({})\n","import React, { useContext } from 'react'\nimport classNames from 'classnames'\nimport PropTypes from 'prop-types'\nimport {\n  Divider,\n  List,\n  ListItem,\n  ListItemText,\n  Typography\n} from '@material-ui/core'\nimport { formatDate } from '../../lib/datelib'\nimport { withStyles } from '@material-ui/core/styles'\nimport ExpandNote from '../controls/ExpandNote'\nimport TagChip from '../TagChip'\nimport style from './SeriesInfo.style'\nimport SeriesConfigClass from '../../lib/SeriesConfig'\nimport { SeriesConfig } from '../../contexts'\n\nconst SeriesInfo = ({ classes, series }) => {\n  const seriesConfig = useContext(SeriesConfig)\n  const seriesConfigInst = new SeriesConfigClass(seriesConfig)\n  const newTags = series.photos.reduce((acc, { tags }) => {\n    tags.forEach(tag => {\n      if (!acc[tag.typeId]) {\n        acc[tag.typeId] = {\n          [tag.label]: { ...tag, count: 1 }\n        }\n      }\n      else if (acc[tag.typeId][tag.label]) {\n        const existing = acc[tag.typeId][tag.label]\n        acc[tag.typeId][tag.label] = { ...existing, count: existing.count + 1 }\n      }\n      else acc[tag.typeId][tag.label] = { ...tag, count: 1 }\n    })\n    return acc\n  }, {})\n\n  return (\n    <div className={classes.root}>\n      <Typography className={classes.heading}>Series Name</Typography>\n      <Divider />\n      <Typography variant='body1' color='inherit' className={classNames(classes.title, classes.textField)}>\n        {series.name}\n      </Typography>\n\n      <Typography className={classes.heading}>Note</Typography>\n      <Divider />\n      <ExpandNote className={classNames(classes.textField, classes.note)} text={series.note} />\n\n      <Typography className={classes.heading}>Series Summary</Typography>\n      <Divider />\n      <List className={classes.list}>\n        <ListItem>\n          <ListItemText\n            primary={`Photos: ${series.photos.length}`}\n            secondary={series.photos.length > 0 && (\n              <span>\n             First: {formatDate(series.photos[series.photos.length - 1].date)}\n                <br />\n             Latest: {formatDate(series.photos[0].date)}\n              </span>\n            )}\n          />\n        </ListItem>\n        <ListItem>\n          <ListItemText>\n            <Typography>Tags in use (across all photos)</Typography>\n            {Object.keys(newTags).map((tagKey, idtk) => (\n              <div key={`tagchipkey${idtk}`}>\n                <Typography className={classes.heading} variant='overline'>{tagKey}</Typography>\n                <Divider />\n                {\n                  Object.values(newTags[tagKey]).map((tag, idx) => (\n                    <TagChip key={`tagchip-${idtk}-${idx}`} tag={tag} group={seriesConfigInst.getTagTypeIndex(tagKey)} />\n                  ))\n                }\n              </div>\n            ))}\n          </ListItemText>\n        </ListItem>\n      </List>\n\n      <Typography className={classes.heading}>Metadata</Typography>\n      <Divider />\n      <List className={classes.list}>\n        {Object.keys(series.meta).map((key, idx) => seriesConfig.meta[key] ? (\n          <ListItem key={`metadata${idx}`}>\n            <ListItemText\n              primary={seriesConfig.meta[key].label}\n              secondary={seriesConfig.meta[key].render(series.meta[key])}\n            />\n          </ListItem>\n        ) : null\n        )}\n      </List>\n\n    </div>\n  )\n}\n\nSeriesInfo.propTypes = {\n  classes: PropTypes.object.isRequired,\n  series: PropTypes.object.isRequired\n}\n\nexport default withStyles(style)(SeriesInfo)\n","export default theme => ({\n  root: {\n    margin: theme.spacing.unit\n  },\n  heading: {\n  },\n  textField: {\n    marginTop: theme.spacing.unit,\n    marginBottom: theme.spacing.unit * 2\n  },\n  note: {\n    marginLeft: theme.spacing.unit * 2,\n    marginRight: theme.spacing.unit * 2\n  },\n  chip: {\n    margin: theme.spacing.unit / 2\n  }\n})\n","import config from '../../../config'\n\nconst tagChips = {\n  height: 20\n}\n\nexport default theme => ({\n  xyTagChip: {\n    cursor: 'pointer',\n    color: 'white',\n    fontSize: '0.6em',\n    background: '#444444',\n    height: tagChips.height,\n    position: 'absolute',\n    left: -tagChips.height / 2,\n    top: -tagChips.height / 2\n  },\n  editing: {\n    // color: 'white',\n    // background: theme.palette.secondary.main\n  },\n  // The tag is flipped on the right side of the screen\n  reversedChip: {\n    flexDirection: 'row-reverse',\n    left: 'unset',\n    right: -tagChips.height / 2\n  },\n  deleteIcon: {\n    // color: 'white',\n    width: tagChips.height - 1,\n    height: tagChips.height - 1\n  },\n  chipAvatarIcon: {\n    color: 'white',\n    width: tagChips.height - 4,\n    height: tagChips.height - 4\n  },\n  chipAvatar: {\n    background: 'inherit',\n    width: tagChips.height,\n    height: tagChips.height\n  },\n  reversedDelete: {\n    margin: `0 -${tagChips.height / 8}px 0 ${tagChips.height / 8}px`\n  },\n  // The chip bucket is the container div for the chip and represents the\n  // Actual XY coordinates. The chip itself is offset to make the\n  chipBucket: {\n    width: 1,\n    height: 1,\n    display: 'flex',\n    flexDirection: 'row',\n    position: 'absolute'\n  },\n  reversedChipBucket: {\n    flexDirection: 'row-reverse'\n  },\n  ...config.tagColors.reduce((acc, tagCol, idx) => ({\n    ...acc,\n    [`tag-${idx}`]: {\n      background: `${tagCol}!important`,\n      color: `${theme.palette.getContrastText(tagCol)}!important`\n    }\n  }), {})\n})\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\nimport Draggable from 'react-draggable'\nimport {\n  Chip,\n  Avatar\n} from '@material-ui/core'\nimport {\n  Cancel as CancelIcon,\n  MyLocation\n} from '@material-ui/icons'\nimport { withStyles } from '@material-ui/core/styles'\nimport style from './PhotoTagChip.style'\n\nconst XYTagChip = ({ classes, edit, tag, newSize, onTagDragOver, onTagDragStop, onNewTag, group, onTagDelete, ...props }) => {\n  const isReversed = tag.relCoords.x > newSize.newWidth / 2\n\n  const stopBadness = (e) => {\n    e.preventDefault()\n    e.stopPropagation()\n  }\n\n  const handleDrag = (e, data) => {\n    stopBadness(e)\n    onTagDragOver(data, tag)\n  }\n  const handleStopDrag = (e, data) => {\n    stopBadness(e)\n    onTagDragStop(data, tag)\n  }\n\n  // Draggable chip if it is editable\n  return (\n    <Draggable\n      disabled={!edit}\n      bounds={{ left: 10, top: 10, right: newSize.newWidth - 10, bottom: newSize.newHeight - 10 }}\n      position={{ x: tag.relCoords.x, y: tag.relCoords.y }}\n      onDrag={handleDrag}\n      onStop={handleStopDrag}\n      onClick={stopBadness}\n    >\n      <div className={classNames(classes.chipBucket, isReversed && classes.reversedChipBucket)}>\n        <Chip\n          color={edit ? 'secondary' : 'default'}\n          label={tag.label}\n          data={tag.id}\n          onClick={stopBadness}\n          onDelete={edit ? onTagDelete(tag) : null}\n          deleteIcon={edit ? <CancelIcon className={classNames(classes.deleteIcon, isReversed && classes.reversedDelete)} /> : <div />}\n          className={classNames(\n            classes.xyTagChip,\n            isReversed && classes.reversedChip,\n            edit && classes.editing,\n            classes[`tag-${group}`]\n          )}\n          {...props}\n          avatar={<Avatar className={classNames(classes.chipAvatar, edit && classes.editing)}>\n            <MyLocation className={classNames(classes.chipAvatarIcon, edit && classes.editing)} />\n          </Avatar>}\n        />\n      </div>\n    </Draggable>\n  )\n}\n\nXYTagChip.propTypes = {\n  classes: PropTypes.object.isRequired,\n  edit: PropTypes.bool,\n  tag: PropTypes.object.isRequired,\n  group: PropTypes.number.isRequired,\n  newSize: PropTypes.object,\n  onTagDragOver: PropTypes.func,\n  onTagDragStop: PropTypes.func,\n  onNewTag: PropTypes.func,\n  onTagDelete: PropTypes.func\n}\n\nexport default withStyles(style)(XYTagChip)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport {\n  Paper,\n  Typography,\n  TextField,\n  MenuItem\n} from '@material-ui/core'\n\n// import { Menu as MenuIcon } from '@material-ui/icons'\nimport { withStyles } from '@material-ui/core/styles'\nimport Select from 'react-select'\nimport CreatableSelect from 'react-select/lib/Creatable'\nimport style from './XYTagSelect.style'\n\nconst XYTagSelect = ({ classes, tagConfig, onChange }) => {\n  const options = tagConfig.values.map(tc => ({ label: tc.label, value: tc.id }))\n\n  return (\n    <div className={classes.root}>\n      {!tagConfig.allowAdditions && (\n        <Select\n          options={options}\n          classes={classes}\n          components={{\n            Control,\n            Menu,\n            NoOptionsMessage,\n            Option,\n            Placeholder,\n            ValueContainer\n          }}\n          value={null}\n          isClearable={false}\n          onChange={onChange}\n          placeholder={tagConfig.label}\n          isSearchable\n        />\n      ) }\n      { tagConfig.allowAdditions && (\n        <CreatableSelect\n          options={options}\n          classes={classes}\n          components={{\n            Control,\n            Menu,\n            NoOptionsMessage,\n            Option,\n            Placeholder,\n            ValueContainer\n          }}\n          value={null}\n          isClearable={false}\n          onChange={onChange}\n          placeholder={tagConfig.label}\n          isSearchable\n        />\n      )}\n    </div>\n  )\n}\nXYTagSelect.propTypes = {\n  classes: PropTypes.object.isRequired,\n  tagConfig: PropTypes.object.isRequired,\n  onChange: PropTypes.func.isRequired\n}\n\nexport default withStyles(style)(XYTagSelect)\n\nfunction Control (props) {\n  return (\n    <TextField\n      fullWidth\n      InputProps={{\n        inputComponent,\n        inputProps: {\n          className: props.selectProps.classes.input,\n          inputRef: props.innerRef,\n          children: props.children,\n          ...props.innerProps\n        }\n      }}\n      {...props.selectProps.textFieldProps}\n    />\n  )\n}\n\nconst NoOptionsMessage = ({ innerProps, selectProps, children }) => (\n  <Typography\n    color='textSecondary'\n    className={selectProps.classes.noOptionsMessage}\n    {...innerProps}\n  >\n    {children}\n  </Typography>\n)\n\nconst Menu = ({ selectProps, innerProps, children }) => (\n  <Paper square className={selectProps.classes.paper} {...innerProps}>\n    {children}\n  </Paper>\n)\n\nconst inputComponent = ({ inputRef, ...props }) => <div ref={inputRef} {...props} />\n\nconst Placeholder = (props) => (\n  <Typography\n    color='textSecondary'\n    className={props.selectProps.classes.placeholder}\n    {...props.innerProps}\n  >\n    {props.children}\n  </Typography>\n)\n\nconst Option = ({ innerRef, isFocused, isSelected, innerProps, children }) => (\n  <MenuItem\n    buttonRef={innerRef}\n    selected={isFocused}\n    component='div'\n    style={{ fontWeight: isSelected ? 500 : 400 }}\n    {...innerProps}\n  >\n    {children}\n  </MenuItem>\n)\n\nconst ValueContainer = ({ selectProps, children }) => (\n  <div className={selectProps.classes.valueContainer}>{children}</div>\n)\n","export default theme => ({\n  root: {\n    width: '100%'\n  },\n  noOptionsMessage: {\n    padding: `${theme.spacing.unit}px ${theme.spacing.unit * 2}px`\n  },\n  singleValue: {\n    fontSize: 16\n  },\n  placeholder: {\n    position: 'absolute',\n    left: 2,\n    fontSize: 16\n  },\n  input: {\n    display: 'flex',\n    padding: 0\n  },\n  valueContainer: {\n    display: 'flex',\n    flexWrap: 'wrap',\n    flex: 1,\n    alignItems: 'center',\n    overflow: 'hidden'\n  },\n  paper: {\n    position: 'absolute',\n    zIndex: 100,\n    marginTop: theme.spacing.unit,\n    left: 0,\n    right: 0\n  }\n})\n","import React, { useContext } from 'react'\nimport PropTypes from 'prop-types'\nimport {\n  Dialog,\n  DialogTitle,\n  Typography\n} from '@material-ui/core'\nimport { withStyles } from '@material-ui/core/styles'\nimport XYTagSelect from './XYTagSelect'\nimport style from './XYTagChooser.style'\nimport { SeriesConfig } from '../../../contexts'\n\nconst XYTagChooser = ({ classes, coords, open, onNewTag, onClose }) => {\n  const seriesConfig = useContext(SeriesConfig)\n  const xyTags = seriesConfig.tags.filter(t => t.isXY)\n  if (!coords) return null\n  return (\n    <Dialog\n      open={open}\n      scroll='paper'\n      classes={{ paperScrollPaper: classes.root }}\n      onClose={() => onClose()}\n      aria-labelledby='simple-dialog-title'\n    >\n      <DialogTitle id='simple-dialog-title' className={classes.header}>New Tag:</DialogTitle>\n      <div className={classes.dlgBody}>\n        {xyTags.length > 1 && (\n          <Typography variant='caption'>What kind of tag would you like to create?</Typography>\n        )}\n\n        {xyTags.map((tagType, idx) => (\n          <div className={classes.listItem} key={`tagSelect${idx}`}>\n            <XYTagSelect tagConfig={tagType} onChange={onNewTag(coords, tagType)} />\n          </div>\n        ))}\n      </div>\n    </Dialog>\n  )\n}\n\nXYTagChooser.propTypes = {\n  classes: PropTypes.object.isRequired,\n  open: PropTypes.bool.isRequired,\n  coords: PropTypes.object,\n  onClose: PropTypes.func.isRequired,\n  onNewTag: PropTypes.func.isRequired\n}\n\nexport default withStyles(style)(XYTagChooser)\n","export default theme => ({\n  root: {\n    overflow: 'visible'\n  },\n  header: {\n    padding: theme.spacing.unit * 2\n  },\n  listItem: {\n    flexDirection: 'column'\n  },\n  dlgBody: {\n    paddingLeft: theme.spacing.unit * 2,\n    paddingRight: theme.spacing.unit * 2,\n    paddingBottom: theme.spacing.unit * 2\n  }\n})\n","import uuid from 'uuid/v4'\nimport SeriesConfig from './SeriesConfig'\n\nclass Tags {\n  constructor (seriesConfig, tags) {\n    this.tags = tags\n    this.seriesConfig = new SeriesConfig(seriesConfig)\n  }\n\n  findTagById = (typeId, tagId) => {\n    return this.seriesConfig.getTagType(typeId).values\n      .find(tt => tt.id === tagId)\n  }\n\n  // Filter the list of tags to those that are XY tags\n  getXYTags = () => {\n    const xyTagIds = this.seriesConfig.getXYTagTypes().map(tt => tt.id)\n    return this.tags.filter(tag => xyTagIds.indexOf(tag.typeId) > -1)\n  }\n\n  getNonXYTags = () => {\n    const NonXYTagIds = this.seriesConfig.getNonXYTagTypes().map(tt => tt.id)\n    return this.tags.filter(tag => NonXYTagIds.indexOf(tag.typeId) > -1)\n  }\n\n  createNewTagObj = (label, typeId) => (\n    { id: uuid(), label, typeId }\n  )\n\n  createExistingTagObj = (id, typeId) => ({\n    ...this.findTagById(typeId, id),\n    typeId\n  })\n\n  createNewXYTagObj = (label, typeId, coords) => ({\n    id: uuid(),\n    label,\n    typeId,\n    coords\n  })\n\n  createExistingXYTagObj = (id, typeId, coords) => ({\n    ...this.findTagById(typeId, id),\n    typeId,\n    coords\n  })\n\n  // Get tags in a way that's easy to render them\n  // We augment these tags with relative positions\n  // and a group number for coloring.\n  getRelXYTags = (multiplier) => this.getXYTags().map(tag => ({\n    ...tag,\n    group: this.seriesConfig.getTagTypeIndex(tag.typeId),\n    relCoords: {\n      x: tag.coords.x * multiplier,\n      y: tag.coords.y * multiplier\n    }\n  }))\n}\n\nexport default Tags\n","import React, { useState, useContext } from 'react'\nimport { SeriesConfig } from '../../../contexts'\nimport XYTagChooser from './XYTagChooser'\nimport Tags from '../../../lib/Tags'\n\nconst useTags = (photo, newSize, onChange) => {\n  const seriesConfig = useContext(SeriesConfig)\n\n  // we hold the tags in state so that every little drag motion\n  // doesn't cause an updated state until you let go\n  const [isDragging, setIsDragging] = useState(false)\n  const [newTagDialog, setNewTagDialog] = useState(null)\n\n  const tagClass = new Tags(seriesConfig, photo.tags)\n\n  const onNewTag = (coords, tagType) => ({ value, __isNew__: isNew }) => {\n    let addTag = isNew\n      ? tagClass.createNewXYTagObj(value, tagType.id, coords)\n      : tagClass.createExistingXYTagObj(value, tagType.id, coords)\n\n    setNewTagDialog(null)\n    onChange({ ...photo, tags: [...photo.tags, addTag] })\n  }\n\n  const onTagDelete = (tag) => () => {\n    const tags = photo.tags.filter(oldTag => oldTag.id !== tag.id)\n    onChange({\n      ...photo,\n      tags\n    })\n  }\n\n  // When the photo is tapped, send the x,y coords of that tap\n  // to a dialog we will open\n  const onAddTagTrigger = (e) => {\n    setNewTagDialog({\n      x: e.pageX - (window.innerWidth - newSize.newWidth) / 2 * newSize.multiplier,\n      y: e.pageY - (window.innerHeight - newSize.newHeight) / 2 * newSize.multiplier\n    })\n  }\n\n  // This gets used by the drag AND the stop\n  const updateTagLocation = ({ x, y }, tag) => {\n    const newTags = photo.tags.map(oldTag => {\n      if (oldTag.id !== tag.id) return oldTag\n      else {\n        let newX = x / newSize.multiplier\n        let newY = y / newSize.multiplier\n\n        return {\n          ...oldTag,\n          coords: { x: newX, y: newY }\n        }\n      }\n    })\n    return newTags\n  }\n\n  const onTagDragStop = (coords, tag) => {\n    const tags = updateTagLocation(coords, tag)\n    setIsDragging(false)\n    onChange({\n      ...photo,\n      tags\n    })\n  }\n\n  const onTagDragOver = (coords, tag) => {\n    updateTagLocation(coords, tag)\n    setIsDragging(true)\n  }\n  const TagChooser = () => (\n    <XYTagChooser\n      open={!isDragging && Boolean(newTagDialog)}\n      coords={newTagDialog}\n      seriesConfig={seriesConfig}\n      onNewTag={onNewTag}\n      onClose={() => setNewTagDialog(null)}\n    />\n  )\n\n  return {\n    onNewTag,\n    onTagDelete,\n    onAddTagTrigger,\n    onTagDragOver,\n    onTagDragStop,\n    TagChooser,\n    getRelXYTags: tagClass.getRelXYTags\n  }\n}\n\nexport default useTags\n","import React, { useState, useRef } from 'react'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\nimport { withStyles } from '@material-ui/core/styles'\nimport useComponentSize from '../../lib/useComponentSize'\nimport XYTagChip from './PhotoTags/XYTagChip'\nimport style from './Photo.style'\nimport useTags from './PhotoTags/useTags'\n\nconst Photo = ({ classes, photo, opacity, edit, showTags, transition, onChange, className }) => {\n  const refImgWrap = useRef(null)\n  const [newSize, setNewSize] = useState({ multiplier: 1 })\n  const { height, width } = useComponentSize(refImgWrap)\n\n  // All tag-related info is put in its own hook\n  const { onAddTagTrigger, TagChooser, getRelXYTags, onTagDragOver, onTagDragStop, onTagDelete } = useTags(photo, newSize, onChange)\n\n  const handleImageLoaded = event => {\n    if (refImgWrap.current) {\n      const { naturalHeight, naturalWidth } = event.target\n\n      // 4 different cases of orientation:\n      const multiplier = Math.min(\n        height / naturalHeight,\n        width / naturalWidth\n      )\n\n      const newWidth = multiplier * naturalWidth\n      const newHeight = multiplier * naturalHeight\n\n      setNewSize({ newWidth, newHeight, naturalWidth, naturalHeight, multiplier })\n    }\n  }\n\n  return (\n    <div\n      className={classNames(classes.root, className)}\n      style={{ opacity: opacity !== null ? opacity : 1 }}\n      ref={refImgWrap}\n    >\n      <div\n        className={classes.inner}\n        style={{\n          height: newSize ? newSize.newHeight : 1,\n          width: newSize ? newSize.newWidth : 1\n        }}\n        onClick={onAddTagTrigger}\n      >\n        { showTags || edit\n          ? (\n            <div className={className}>\n              { getRelXYTags(newSize.multiplier).map((tag, idx) => (\n                <XYTagChip\n                  key={`xytag-${idx}`}\n                  group={tag.group}\n                  {...{ edit, newSize, tag, onTagDragOver, onTagDragStop, onTagDelete }} />\n              ))}\n            </div>\n          ) : null\n        }\n        <img\n          className={classes.img}\n          alt={photo.url}\n          src={photo.url || photo.base64}\n          onLoad={handleImageLoaded}\n          style={{ height: newSize.newHeight, width: newSize.newWidth }}\n        />\n      </div>\n      {edit && <TagChooser />}\n    </div>\n  )\n}\n\nPhoto.propTypes = {\n  classes: PropTypes.object.isRequired,\n  className: PropTypes.string,\n  opacity: PropTypes.number,\n  photo: PropTypes.object.isRequired,\n  edit: PropTypes.bool,\n  showTags: PropTypes.bool,\n  transition: PropTypes.string,\n  onChange: PropTypes.func\n}\n\nexport default withStyles(style)(Photo)\n","// import { fade } from '@material-ui/core/styles/colorManipulator'\nexport default theme => ({\n  root: {\n    // maxWidth: 400,\n    display: 'block',\n    position: 'relative',\n    width: '100%',\n    height: '100%',\n    background: 'black',\n    overflow: 'hidden'\n  },\n  inner: {\n    position: 'absolute',\n    top: '50%',\n    left: '50%',\n    transform: 'translateY(-50%) translateX(-50%)',\n    overflow: 'hidden'\n  },\n  xyTags: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    // opacity: 0.8,\n    // border: '4px solid red',\n    height: '100%',\n    width: '100%'\n    // background: 'rgba(150, 150, 150, 0.5)'\n  },\n  img: {\n    display: 'block'\n  },\n  formControl: {\n    width: '100%'\n  }\n})\n","import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\nimport {\n  MobileStepper,\n  IconButton,\n  GridListTileBar,\n  Badge\n} from '@material-ui/core'\nimport {\n  Label as LabelIcon,\n  RemoveRedEye,\n  KeyboardArrowLeft,\n  KeyboardArrowRight\n} from '@material-ui/icons'\nimport SwipeableViews from 'react-swipeable-views'\nimport Photo from '../Photo/Photo'\nimport { formatDate } from '../../lib/datelib'\nimport { withStyles } from '@material-ui/core/styles'\nimport style from './SwipeShow.style'\n\nconst SwipeShow = ({ classes, theme, photos, onImageSelect }) => {\n  const [activePhoto, setActivePhoto] = useState(0)\n  const [showTags, setShowTags] = useState(false)\n  const singular = photos.length < 2\n\n  const sortedPhotos = [...photos]\n  sortedPhotos.sort((a, b) => parseInt(b.date, 10) - parseInt(a.date, 10))\n\n  const handleForward = () => setActivePhoto(activePhoto >= sortedPhotos.length ? 0 : activePhoto + 1)\n  const handleBack = () => setActivePhoto(activePhoto <= 0 ? sortedPhotos.length - 1 : activePhoto - 1)\n\n  return (\n    <div className={classes.root}>\n      <div className={classes.inner}>\n        <SwipeableViews\n          axis={theme.direction === 'rtl' ? 'x-reverse' : 'x'}\n          index={activePhoto}\n          onChangeIndex={setActivePhoto}\n          enableMouseEvents\n        >\n          {sortedPhotos.map((photo, idx) => (\n            <div className={classes.photoWrapper} key={`swipeshowpic-${idx}`}>\n              <Photo photo={photo} className={classes.photo} showTags={showTags} />\n            </div>\n          ))}\n        </SwipeableViews>\n        <IconButton size='small' className={classes.manualBack} onClick={handleBack} color='inherit' disabled={activePhoto === 0}>\n          {theme.direction === 'rtl' ? <KeyboardArrowRight /> : <KeyboardArrowLeft />}\n        </IconButton>\n        <IconButton size='small' className={classes.manualForward} onClick={handleForward} color='inherit' disabled={activePhoto === photos.length - 1}>\n          {theme.direction === 'rtl' ? <KeyboardArrowLeft /> : <KeyboardArrowRight />}\n        </IconButton>\n        <GridListTileBar\n          title={singular ? 'Photo' : `Photo (${activePhoto + 1}/${sortedPhotos.length})`}\n          subtitle={sortedPhotos.length > 0 && (\n            <span>{formatDate(sortedPhotos[activePhoto].date)}</span>\n          )}\n          actionIcon={\n            <React.Fragment>\n              <IconButton className={classes.tagButton} onClick={() => setShowTags(!showTags)}>\n                <Badge color={showTags ? 'primary' : 'secondary'} badgeContent={sortedPhotos[activePhoto].tags.filter(tag => tag.coords).length}>\n                  <LabelIcon />\n                </Badge>\n              </IconButton>\n              <IconButton className={classes.tagButton} onClick={() => onImageSelect(sortedPhotos[activePhoto].id)}>\n                <RemoveRedEye />\n              </IconButton>\n            </React.Fragment>\n          }\n        />\n      </div>\n      {!singular &&\n      <MobileStepper\n        steps={sortedPhotos.length}\n        position='static'\n        activeStep={activePhoto}\n        classes={{\n          root: classes.mobileStepper,\n          dots: classes.dots\n        }}\n      />\n      }\n    </div>\n  )\n}\n\nSwipeShow.propTypes = {\n  // These two come from Material UI\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  // This is just the basic shape of the photo object\n  photos: PropTypes.arrayOf(PropTypes.shape({\n    img: PropTypes.string,\n    tags: PropTypes.array,\n    date: PropTypes.date\n  })),\n  transition: PropTypes.number,\n  onImageSelect: PropTypes.func.isRequired\n}\n\nSwipeShow.defaultProps = {\n  transition: 5000,\n  isFullScreen: false,\n  slides: []\n}\n\nexport default withStyles(style, { withTheme: true })(SwipeShow)\n","export default theme => ({\n  root: {\n    position: 'relative'\n  },\n  inner: {\n    position: 'relative'\n  },\n  photoWrapper: {\n    minHeight: 250,\n    height: 250\n  },\n  dateCaption: {\n    padding: theme.spacing.unit,\n    background: 'black',\n    color: 'white',\n    textAlign: 'center'\n  },\n  mobileStepper: {\n    // position: 'absolute',\n    // bottom: theme.spacing.unit,\n    // right: theme.spacing.unit\n  },\n  manualBack: {\n    color: 'white',\n    zIndex: 10,\n    position: 'absolute',\n    transform: 'translateY(-50%)',\n    left: 0,\n    top: '50%'\n  },\n  manualForward: {\n    color: 'white',\n    zIndex: 10,\n    position: 'absolute',\n    transform: 'translateY(-50%)',\n    right: 0,\n    top: '50%'\n  },\n  tagButton: {\n    color: 'rgba(255, 255, 255, 0.54)'\n  },\n  dots: {\n    margin: '0 auto'\n  }\n})\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  Button,\n  Typography,\n  DialogActions\n} from '@material-ui/core'\n// import { Menu as MenuIcon } from '@material-ui/icons'\nimport { withStyles } from '@material-ui/core/styles'\n\nconst style = theme => ({\n\n})\n\nconst DeleteDialog = ({ classes, title, message, onConfirm, open }) => (\n  <Dialog\n    className={classes.root}\n    disableBackdropClick\n    open={open}\n    disableEscapeKeyDown\n    maxWidth='xl'\n    aria-labelledby='confirmation-dialog-title'\n  >\n    <DialogTitle id='confirmation-dialog-title'>{title}</DialogTitle>\n    <DialogContent>\n      <Typography>\n        {message}\n      </Typography>\n\n    </DialogContent>\n    <DialogActions>\n      <Button onClick={() => onConfirm(false)} color='primary'>\n      No\n      </Button>\n      <Button onClick={() => onConfirm(true)} color='primary'>\n      Yes\n      </Button>\n    </DialogActions>\n  </Dialog>\n)\n\nDeleteDialog.propTypes = {\n  classes: PropTypes.object.isRequired,\n  open: PropTypes.bool,\n  title: PropTypes.string.isRequired,\n  message: PropTypes.string.isRequired,\n  onConfirm: PropTypes.func.isRequired\n}\n\nexport default withStyles(style)(DeleteDialog)\n","import React, { useState } from 'react'\nimport classNames from 'classnames'\nimport PropTypes from 'prop-types'\nimport {\n  GridList,\n  GridListTile,\n  GridListTileBar,\n  Snackbar,\n  Button,\n  Fab\n} from '@material-ui/core'\nimport {\n  Add as AddIcon,\n  Remove as RemoveIcon\n} from '@material-ui/icons'\nimport { withStyles } from '@material-ui/core/styles'\nimport style from './PhotoGrid.style'\nimport DeleteDialog from '../../components/dialogs/DeleteDialog'\nimport { formatDate } from '../../lib/datelib'\n\nconst PhotoGrid = ({ classes, photos, columns, multiSelect, onDelete, onTileClick, allowEdit }) => {\n  const [selectMode, setSelectMode] = useState(false)\n  const [selectedItems, setSelectedItems] = useState([])\n  const [deleteConfirm, setDeleteConfirm] = useState(false)\n\n  const handleAddToSelection = (e, id) => {\n    e.preventDefault()\n    e.stopPropagation()\n\n    setSelectMode(true)\n    toggleListItem(id)\n  }\n\n  const handleCancelSelection = () => {\n    setSelectMode(false)\n    setSelectedItems([])\n  }\n\n  const onDeleteConfirm = (confirmation) => {\n    setDeleteConfirm(false)\n    if (confirmation === true && selectedItems.length < photos.length) onDelete(selectedItems)\n    handleCancelSelection()\n  }\n\n  const toggleListItem = (id) => {\n    const index = selectedItems.indexOf(id)\n    if (index < 0) setSelectedItems([...selectedItems, id])\n    else {\n      const remaining = selectedItems.filter(arrId => arrId !== id)\n      if (remaining.length === 0) handleCancelSelection()\n      setSelectedItems(remaining)\n    }\n  }\n\n  const handlePhotoTap = (e, photo) => {\n    e.preventDefault()\n    e.stopPropagation()\n    // Select / deselect the item in edit mode\n    if (selectMode) toggleListItem(photo.id)\n    // navigate if tileClick selected\n    else onTileClick(photo.id)\n  }\n\n  const sortedPhotos = [...photos]\n  sortedPhotos.sort((a, b) => parseInt(b.date, 10) - parseInt(a.date, 10))\n\n  return (\n    <div>\n      <GridList cols={columns} cellHeight={200} className={classes.root}>\n        {sortedPhotos.map((photo, idx) => {\n          const selected = selectedItems.indexOf(photo.id) > -1\n          return (\n            <GridListTile\n              key={`gridTile${idx}`}\n              onClick={(e) => handlePhotoTap(e, photo)}\n              className={classNames(\n                classes.tile,\n                selectMode && !selected && classes.unSelectedTile,\n                selectMode && selected && classes.selectedTile\n              )}\n            >\n              <img src={photo.url || photo.base64} alt={photo.url} className={classes.img} />\n              {allowEdit && multiSelect && (\n                <Fab size='small' aria-label='Add' className={classes.addFab} onClick={(e) => handleAddToSelection(e, photo.id)}>\n                  {!selectMode || !selected ? <AddIcon /> : <RemoveIcon />}\n                </Fab>\n              )}\n              <GridListTileBar\n                title={<span>{formatDate(photo.date)}</span>}\n              />\n            </GridListTile>\n          )\n        })}\n      </GridList>\n      <Snackbar\n        open={selectMode}\n        autoHideDuration={null}\n        ContentProps={{\n          'aria-describedby': 'snackbar-fab-message-id',\n          className: classes.snackbarContent\n        }}\n        message={<span id='snackbar-fab-message-id'>{selectedItems.length} Photos selected</span>}\n        action={<div>\n          <Button color='inherit' size='small' onClick={() => setDeleteConfirm(true)}>\n                Delete\n          </Button>\n          <Button color='inherit' size='small' onClick={() => handleCancelSelection()}>\n                Cancel\n          </Button>\n        </div>\n        }\n        className={classes.snackbar}\n      />\n\n      <DeleteDialog\n        open={deleteConfirm}\n        onConfirm={onDeleteConfirm}\n        title={`Delete ${selectedItems.length} Photos`}\n        message='Are you sure you want to delete these photos?'\n      />\n    </div>\n\n  )\n}\n\nPhotoGrid.propTypes = {\n  classes: PropTypes.object.isRequired,\n  photos: PropTypes.array.isRequired,\n  columns: PropTypes.number,\n  allowEdit: PropTypes.bool,\n  multiSelect: PropTypes.bool,\n  onDelete: PropTypes.func,\n  onTileClick: PropTypes.func.isRequired\n}\nPhotoGrid.defaultProps = {\n  multiSelect: true,\n  columns: 2\n}\n\nexport default withStyles(style)(PhotoGrid)\n","\nexport default theme => ({\n  root: {\n\n  },\n  tile: {\n\n  },\n  addFab: {\n    position: 'absolute',\n    zIndex: 10,\n    top: theme.spacing.unit,\n    left: theme.spacing.unit,\n    opacity: 0.3\n  },\n  unSelectedTile: {\n    '& img': {\n      opacity: 0.3\n    }\n  },\n  selectedTile: {\n    padding: `${theme.spacing.unit * 2}px!important`,\n    '& img': {\n      opacity: 1\n    }\n  },\n  img: {\n\n  }\n})\n","import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\n// import classNames from 'classnames'\nimport {\n  CssBaseline,\n  AppBar,\n  Toolbar,\n  IconButton,\n  Typography,\n  Tabs,\n  Tab\n} from '@material-ui/core'\nimport {\n  ArrowBack as ArrowBackIcon,\n  Slideshow as SlideshowIcon,\n  AddAPhoto as AddCameraIcon,\n  MoreVert as MoreIcon\n} from '@material-ui/icons'\nimport { withStyles } from '@material-ui/core/styles'\nimport ContextMenu from '../../components/ContextMenu'\nimport MapDot from '../../components/maps/MapDot/MapDot'\nimport useNewImageMenu from '../../components/controls/useNewImageMenu'\n\nimport SeriesInfo from '../../components/SeriesInfo/SeriesInfo'\nimport SwipeShow from '../../components/SwipeShow/SwipeShow'\nimport PhotoGrid from '../../components/PhotoGrid/PhotoGrid'\nimport DeleteDialog from '../../components/dialogs/DeleteDialog'\nimport style from './SeriesView.style'\n\nconst SeriesView = ({\n  classes, series, onSlideshowStart, onChange, allowEdit,\n  onEditSeries, onDeletePhotos, onCameraAdd,\n  onDeleteSeries, onLibraryAdd, onTileClick, onMenuBack\n}) => {\n  const [contextEl, setContextEl] = useState()\n  const [deleteConfirm, setDeleteConfirm] = useState(false)\n\n  const { onDownThunk, onUpThunk, onBlock, menu } = useNewImageMenu(\n    () => onCameraAdd(series),\n    onLibraryAdd\n  )\n\n  const onDeleteConfirm = (confirmation) => {\n    setDeleteConfirm(false)\n    if (confirmation === true) onDeleteSeries(series.id)\n  }\n\n  const [listTypeTab, setListTypeTab] = useState(0)\n  return (\n    <div className={classes.root}>\n      <CssBaseline />\n      <AppBar position='static' className={classes.appBar}>\n        <Toolbar>\n          <IconButton className={classes.menuButton} color='inherit' onClick={onMenuBack} aria-label='Menu'>\n            <ArrowBackIcon />\n          </IconButton>\n          <Typography variant='h6' color='inherit' className={classes.grow}>\n           Series\n          </Typography>\n          {allowEdit && (\n            <IconButton\n              onClick={onBlock}\n              onMouseDown={onDownThunk(series)}\n              onMouseUp={onUpThunk(series)}\n              onTouchStart={onDownThunk(series)}\n              onTouchEnd={onUpThunk(series)}\n              className={classes.addPhotoButton}\n              color='inherit'\n              aria-label='Menu'\n            >\n              <AddCameraIcon />\n            </IconButton>\n          )}\n          <IconButton\n            className={classes.startSlideshowButton}\n            disabled={series.photos.length === 0}\n            color='inherit'\n            aria-label='Menu'\n            onClick={onSlideshowStart}\n          >\n            <SlideshowIcon />\n          </IconButton>\n          { allowEdit && (\n            <IconButton\n              aria-haspopup='true'\n              color='inherit'\n              onClick={event => setContextEl(event.currentTarget)}\n            >\n              <MoreIcon />\n            </IconButton>\n          )}\n\n          <ContextMenu anchorEl={contextEl} onClose={() => setContextEl(null)} menuItems={[\n            { text: 'Edit Series', action: onEditSeries },\n            { text: 'Delete Series', action: () => setDeleteConfirm(true) }\n          ]} />\n          {menu}\n        </Toolbar>\n        <Tabs variant='fullWidth'\n          value={listTypeTab}\n          onChange={(e, value) => setListTypeTab(value)}\n        >\n          <Tab label='Info' />\n          <Tab label='Map' />\n          <Tab label='Photos' />\n        </Tabs>\n      </AppBar>\n\n      <div className={classes.inner}>\n        {listTypeTab === 0 && (\n          <React.Fragment>\n            {series.photos.length > 0 && (\n              <SwipeShow\n                photos={series.photos}\n                onImageSelect={onTileClick}\n              />\n            )}\n            <SeriesInfo series={series} onChange={onChange} />\n          </React.Fragment>\n        )}\n        {listTypeTab === 2 && (\n          <PhotoGrid\n            photos={series.photos}\n            allowEdit={allowEdit}\n            onTileClick={onTileClick}\n            onDelete={onDeletePhotos}\n          />\n        )}\n      </div>\n\n      {listTypeTab === 1 && (\n        <MapDot\n          zoom={18}\n          longitude={series.location[1]}\n          latitude={series.location[0]}\n          direction={series.direction}\n        />\n      )}\n      <DeleteDialog\n        open={deleteConfirm}\n        onConfirm={onDeleteConfirm}\n        title='Delete Series'\n        message='Are you sure you want to delete this series? The record and all images associated with it will be gone forever.'\n      />\n    </div>\n  )\n}\n\nSeriesView.propTypes = {\n  classes: PropTypes.object.isRequired,\n  series: PropTypes.object,\n  allowEdit: PropTypes.bool,\n  // Action functions\n  onSlideshowStart: PropTypes.func.isRequired,\n  onChange: PropTypes.func.isRequired,\n  onDeletePhotos: PropTypes.func.isRequired,\n  onDeleteSeries: PropTypes.func.isRequired,\n  onCameraAdd: PropTypes.func.isRequired,\n  onEditSeries: PropTypes.func.isRequired,\n  onLibraryAdd: PropTypes.func.isRequired,\n  onTileClick: PropTypes.func.isRequired,\n  onMenuBack: PropTypes.func.isRequired\n}\n\nexport default withStyles(style)(SeriesView)\n","export default theme => ({\n  root: {\n    display: 'flex',\n    height: '100%',\n    flexDirection: 'column',\n    overflow: 'hidden'\n  },\n  appBar: {\n    flexGrow: 0\n  },\n  inner: {\n    position: 'relative',\n    flexGrow: 1,\n    overflowY: 'scroll',\n    '-webkit-overflow-scrolling': 'touch'\n  },\n  tabMenu: {\n    marginTop: theme.spacing.unit * 7\n  },\n  mapWrap: {\n    position: 'absolute',\n    height: '100%',\n    width: '100%',\n    top: 0,\n    left: 0\n  },\n  grow: {\n    flexGrow: 1\n  },\n  gridList: {\n    flexWrap: 'nowrap',\n    // Promote the list into his own layer on Chrome. This cost memory but helps keeping high FPS.\n    transform: 'translateZ(0)'\n  },\n  titleBar: {\n    display: 'flex',\n    padding: theme.spacing.unit\n  },\n  titleText: {\n    flexGrow: 1\n  },\n  menuButton: {\n    marginLeft: -12,\n    marginRight: 20\n  }\n})\n","import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\nimport {\n  IconButton,\n  Typography\n} from '@material-ui/core'\nimport {\n  Edit as EditIcon,\n  Close as CloseIcon,\n  Check as CheckIcon\n  // Refresh as RefreshIcon\n} from '@material-ui/icons'\nimport { withStyles } from '@material-ui/core/styles'\n\nconst headerStyle = theme => ({\n  root: {\n    display: 'flex'\n    // borderBottom: `1px solid ${theme.palette.grey['A200']}`\n  },\n  fieldTitle: {\n    flexGrow: 1,\n    display: 'block',\n    color: theme.palette.text.secondary\n  },\n  iconButton: {\n    padding: theme.spacing.unit * 0.75,\n    '& svg': {\n      fontSize: theme.spacing.unit * 2\n    }\n  },\n  editButton: {\n    color: theme.palette.grey['500']\n  },\n  cancelButton: {\n    color: theme.palette.error.main,\n    marginLeft: theme.spacing.unit\n  }\n})\n\nconst useFormFieldState = (defaultValue, allowEdit, onChangeExt, permaEdit) => {\n  const [editing, setEditing] = useState(false)\n  const [value, _onChange] = useState(defaultValue)\n\n  const onChange = (val) => {\n    if (permaEdit) onChangeExt(val)\n    _onChange(val)\n  }\n\n  // Save drops out of edit mode and returns the saved state value\n  // NOTE: THIS DOESN'T SET THE STATE. USE ONCHANGE FOR THAT.\n  const onSave = () => {\n    setEditing(false)\n    onChangeExt(value)\n  }\n  // Reset just resets the form element to its previous state\n  const onReset = () => {\n    onChange(defaultValue)\n    if (permaEdit) onChangeExt(defaultValue)\n  }\n  // Cancel resets the form AND returns to view mode\n  const onCancel = () => {\n    setEditing(false)\n    onReset()\n  }\n\n  /**\n   * HOC for the form control header\n   */\n  const Header = withStyles(headerStyle)(({ classes, children }) => (\n    <div className={classes.root}>\n      <Typography variant='overline' className={classes.fieldTitle}>\n        {children}\n      </Typography>\n      {allowEdit && !editing && !permaEdit && (\n        <IconButton\n          className={classNames(classes.editButton, classes.iconButton)}\n          onClick={() => setEditing(true)}\n        >\n          <EditIcon className={classes.icon} />\n        </IconButton>\n      )}\n      {allowEdit && editing && !permaEdit && (\n        <div>\n          <IconButton\n            className={classNames(classes.checkButton, classes.iconButton)}\n            onClick={onSave}\n          >\n            <CheckIcon className={classes.icon} />\n          </IconButton>\n          <IconButton\n            className={classNames(classes.cancelButton, classes.iconButton)}\n            onClick={onCancel}\n          >\n            <CloseIcon className={classes.icon} />\n          </IconButton>\n        </div>\n      )}\n    </div>\n  ))\n  Header.PropTypes = {\n    children: PropTypes.oneOfType([\n      PropTypes.arrayOf(PropTypes.node),\n      PropTypes.node\n    ]).isRequired\n  }\n\n  return { editing, value, onChange, onSave, onReset, onCancel, Header }\n}\n\nexport default useFormFieldState\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\nimport {\n  Typography,\n  TextField\n} from '@material-ui/core'\nimport useFormFieldState from './useFormFieldState'\nimport ExpandNote from './ExpandNote'\nimport { withStyles } from '@material-ui/core/styles'\n\nconst style = theme => ({\n  root: {\n  },\n  rootEdit: {\n  },\n  textBody: {\n    whiteSpace: 'pre-line',\n    padding: theme.spacing.unit\n  },\n  hint: {\n    // marginTop: theme.spacing.unit,\n    // marginBottom: theme.spacing.unit\n  },\n  textField: {\n    color: theme.palette.grey['900'],\n    background: theme.palette.grey['200'],\n    '& textarea': {\n      color: theme.palette.grey['900'],\n      background: theme.palette.grey['200']\n      // padding: theme.spacing.unit\n    }\n  }\n})\n\nconst TextAreaControl = ({ classes, defaultValue, permaEdit,\n  collapsed, className,\n  hint,\n  collapsedHeight, label,\n  allowEdit,\n  onChange: onChangeExt, ...props }) => {\n  const { editing, value, onChange, Header } = useFormFieldState(defaultValue, allowEdit, onChangeExt, permaEdit)\n\n  const textRender = collapsed\n    ? <ExpandNote text={value} height={collapsedHeight} />\n    : <Typography variant='body2'>{value}</Typography>\n\n  return (\n    <div className={classNames(classes.root, editing && classes.rootEdit, className)}>\n      <Header>{label}</Header>\n      {!editing && !permaEdit\n        ? <div className={classes.textBody}>{textRender}</div>\n        : <TextField\n          multiline\n          fullWidth\n          rows={5}\n          rowsMax={10}\n          value={value || ''}\n          className={classes.textField}\n          {...props}\n          onChange={(e) => onChange(e.target.value)}\n        />\n      }\n      {hint && <Typography variant='caption' className={classes.hint}>{hint}</Typography>}\n    </div>\n\n  )\n}\n\nTextAreaControl.propTypes = {\n  classes: PropTypes.object.isRequired,\n  className: PropTypes.string,\n  label: PropTypes.string.isRequired,\n  defaultValue: PropTypes.string,\n  hint: PropTypes.string,\n  collapsed: PropTypes.bool,\n  collapsedHeight: PropTypes.number,\n  allowEdit: PropTypes.bool,\n  permaEdit: PropTypes.bool,\n  // These come in from the HOC\n  onChange: PropTypes.func.isRequired\n}\n\nTextAreaControl.defaultProps = {\n  collapsed: false,\n  allowEdit: false\n}\n\nexport default withStyles(style)(TextAreaControl)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\nimport {\n  Typography,\n  TextField\n} from '@material-ui/core'\nimport useFormFieldState from './useFormFieldState'\n// import ExpandNote from './ExpandNote'\nimport { withStyles } from '@material-ui/core/styles'\n\nconst style = theme => ({\n  root: {\n  },\n  rootEdit: {\n  },\n  textBody: {\n    whiteSpace: 'pre-line',\n    padding: theme.spacing.unit\n  },\n  textField: {\n    '& textarea': {\n      color: theme.palette.grey['900'],\n      background: theme.palette.grey['200'],\n      padding: theme.spacing.unit\n    }\n\n  }\n})\n\nconst TextFieldControl = ({\n  classes, defaultValue,\n  className, label,\n  hint, permaEdit,\n  placeholder,\n  allowEdit,\n  onChange: onChangeExt\n}) => {\n  const { editing, value, onChange, Header } = useFormFieldState(defaultValue, allowEdit, onChangeExt, permaEdit)\n\n  return (\n    <div className={classNames(classes.root, editing && classes.rootEdit, className)}>\n      <Header>{label}</Header>\n      {!editing && !permaEdit\n        ? <div className={classes.textBody}>\n          <Typography variant='body2'>{value}</Typography>\n        </div>\n        : <TextField\n          fullWidth\n          placeholder={placeholder}\n          value={value || ''}\n          className={classes.textField}\n          onChange={(e) => onChange(e.target.value)}\n        />\n      }\n      {hint && <Typography variant='caption' className={classes.hint}>{hint}</Typography>}\n    </div>\n\n  )\n}\n\nTextFieldControl.propTypes = {\n  classes: PropTypes.object.isRequired,\n  className: PropTypes.string,\n  placeholder: PropTypes.string,\n  label: PropTypes.string.isRequired,\n  defaultValue: PropTypes.string,\n  hint: PropTypes.string,\n  allowEdit: PropTypes.bool,\n  permaEdit: PropTypes.bool,\n  // These come in from the HOC\n  onChange: PropTypes.func.isRequired\n}\n\nexport default withStyles(style)(TextFieldControl)\n","\nimport React, { useState } from 'react'\nimport PropTypes from 'prop-types'\nimport {\n  CssBaseline,\n  AppBar,\n  Toolbar,\n  Button,\n  Typography,\n  FormLabel\n} from '@material-ui/core'\nimport {\n  Delete as DeleteIcon,\n  ArrowBack as ArrowBackIcon\n} from '@material-ui/icons'\nimport { withStyles } from '@material-ui/core/styles'\nimport Slider from '@material-ui/lab/Slider'\nimport TextAreaControl from '../../components/controls/TextAreaControl'\nimport TextFieldControl from '../../components/controls/TextFieldControl'\nimport MapDot from '../../components/maps/MapDot/MapDot'\nimport DeleteDialog from '../../components/dialogs/DeleteDialog'\nimport style from './SeriesEdit.style'\n\nconst SeriesEdit = ({ classes, series, onMenuBack, onChange, onDeleteSeries }) => {\n  const [rotation, setRotation] = useState(series.direction || -1)\n  const [deleteConfirm, setDeleteConfirm] = useState(false)\n\n  const onChangeFormState = (name, value) => {\n    onChange({\n      ...series,\n      [name]: value\n    })\n  }\n\n  const onRotationChange = (dir) => {\n    const newDir = dir >= 0 ? dir : null\n    onChangeFormState('direction', newDir)\n    setRotation(newDir)\n  }\n\n  const onMapChange = ({ latitude, longitude }) => {\n    onChangeFormState('location', [latitude, longitude])\n  }\n\n  const onDeleteConfirm = (confirmation) => {\n    setDeleteConfirm(false)\n    if (confirmation === true) onDeleteSeries(series.id)\n  }\n\n  return (\n    <div className={classes.root}>\n      <CssBaseline />\n      <AppBar position='static' className={classes.appBar}>\n        <Toolbar>\n          <Typography variant='h6' color='inherit' className={classes.grow}>\n           Edit Series Details\n          </Typography>\n          <Button className={classes.menuButton} color='inherit' onClick={onMenuBack} aria-label='Menu'>\n            Ok\n          </Button>\n        </Toolbar>\n      </AppBar>\n      <div className={classes.inner}>\n        <form className={classes.form} elevation={1} noValidate autoComplete='off'>\n          <TextFieldControl\n            className={classes.field}\n            label='Series Name'\n            placeholder='New Series'\n            permaEdit\n            allowEdit\n            defaultValue={series.name}\n            onChange={val => onChangeFormState('name', val)}\n          />\n          <TextAreaControl\n            className={classes.field}\n            label='Notes'\n            placeholder='Any instructions for the next person to add a picture to this series?'\n            multiline\n            rows={1}\n            rowsMax={4}\n            permaEdit\n            allowEdit\n            defaultValue={series.note}\n            onChange={val => onChangeFormState('note', val)}\n          />\n\n          <div className={classes.mapWrapper}>\n            <FormLabel className={classes.formLabel}>Location</FormLabel>\n            <div style={{ height: 200, marginBottom: 10 }}>\n              <MapDot\n                editable\n                className={classes.map}\n                direction={rotation > 0 ? rotation : null}\n                latitude={series.location[0]}\n                longitude={series.location[1]}\n                onChange={onMapChange}\n              />\n            </div>\n            <FormLabel className={classes.mapFormLabel}>Direction {rotation > 0 ? '' : '(off)'}</FormLabel>\n            <Slider\n              classes={{ container: classes.slider }}\n              value={rotation || -1}\n              min={-1}\n              max={360}\n              step={1}\n              onChange={(e, value) => onRotationChange(value)}\n            />\n          </div>\n          {/* <TextField\n            id='standard-name'\n            label='Name'\n            className={classes.textField}\n            value={series.name}\n            permaEdit\n            onChange={e => onChangeFormState('name', e.target.value)}\n            margin='dense'\n          />\n          <TextField\n            id='standard-multiline-flexible'\n            label='Notes'\n            multiline\n            placeholder='This photo is cool because...'\n            rows='4'\n            rowsMax='7'\n            value={series.note}\n            onChange={e => onChangeFormState('note', e.target.value)}\n            className={classes.textField}\n            margin='dense'\n          />\n\n          <div className={classes.mapWrapper}>\n            <FormLabel className={classes.formLabel}>Location</FormLabel>\n            <div style={{ height: 200 }}>\n              <MapDot\n                editable\n                className={classes.map}\n                direction={rotation > 0 ? rotation : null}\n                latitude={series.location[0]}\n                longitude={series.location[1]}\n                onChange={onMapChange}\n              />\n            </div>\n            <FormLabel className={classes.formLabel}>Direction {rotation > 0 ? '' : '(off)'}</FormLabel>\n            <Slider\n              classes={{ container: classes.slider }}\n              value={rotation}\n              min={-1}\n              max={360}\n              step={1}\n              onChange={(e, value) => onRotationChange(value)}\n            />\n          </div> */}\n        </form>\n      </div>\n      <DeleteDialog\n        open={deleteConfirm}\n        onConfirm={onDeleteConfirm}\n        title='Delete Series'\n        message='Are you sure you want to delete this series? The record and all images associated with it will be gone forever.'\n      />\n    </div>\n  )\n}\n\nSeriesEdit.propTypes = {\n  classes: PropTypes.object.isRequired,\n  series: PropTypes.object.isRequired,\n  // now some functions\n  onMenuBack: PropTypes.func.isRequired,\n  onChange: PropTypes.func.isRequired,\n  onDeleteSeries: PropTypes.func.isRequired\n}\n\nexport default withStyles(style)(SeriesEdit)\n","export default theme => ({\n  root: {\n\n  },\n  inner: {\n    position: 'relative',\n    flexGrow: 1,\n    overflowY: 'scroll',\n    '-webkit-overflow-scrolling': 'touch',\n    overflowX: 'hidden'\n  },\n  grow: {\n    flexGrow: 1\n  },\n  form: {\n    position: 'relative',\n    padding: theme.spacing.unit\n  },\n  field: {\n    marginBottom: theme.spacing.unit * 2\n  },\n  slider: {\n    paddingLeft: theme.spacing.unit,\n    paddingRight: theme.spacing.unit\n  },\n  textField: {\n    marginLeft: theme.spacing.unit,\n    marginRight: theme.spacing.unit,\n    width: '100%'\n  },\n  formLabel: {\n    display: 'block',\n    marginTop: theme.spacing.unit,\n    marginBottom: theme.spacing.unit\n  },\n  map: {\n  },\n  mapWrapper: {\n    margin: theme.spacing.unit\n  },\n  formControl: {\n    margin: theme.spacing.unit,\n    minWidth: 120\n  },\n  chips: {\n    display: 'flex',\n    flexWrap: 'wrap'\n  }\n})\n","import React, { useState, useEffect, useRef } from 'react'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\nimport {\n  Badge,\n  Typography,\n  IconButton,\n  CssBaseline,\n  GridListTile,\n  GridListTileBar,\n  MobileStepper,\n  Button\n} from '@material-ui/core'\nimport {\n  ArrowBack as ArrowBackIcon,\n  Label as LabelIcon,\n  PauseCircleFilled as PauseIcon,\n  PlayCircleFilled as PlayIcon,\n  KeyboardArrowLeft,\n  KeyboardArrowRight\n} from '@material-ui/icons'\nimport { withStyles } from '@material-ui/core/styles'\n\nimport Photo from '../../components/Photo/Photo'\nimport { formatDate } from '../../lib/datelib'\nimport style from './Slideshow.style'\nimport useComponentSize from '../../lib/useComponentSize'\n\nconst Slideshow = ({ classes, theme, onCancel, photos, transition }) => {\n  const { activeStep, lastStep, handleForward, handleBack, paused, pause, play } = useStepper(photos.length, transition)\n  const [showXYTags, setShowXYTags] = useState(false)\n\n  const refImgWrap = useRef(null)\n  const { height, width } = useComponentSize(refImgWrap)\n\n  return (\n    <div className={classes.root}>\n      <CssBaseline />\n      <div ref={refImgWrap} className={classes.slideContainer}>\n        {photos.map((slide, idx) => (\n          <GridListTile\n            key={`slide-${idx}`}\n            className={classNames(\n              classes.slide,\n              activeStep === idx && classes.active,\n              lastStep === idx && classes.last\n            )}\n            onClick={() => setShowXYTags(!showXYTags)}\n            style={{\n              height,\n              width,\n              transition: theme.transitions.create(['opacity'], { duration: 1 / 4 * transition })\n            }}\n          >\n            <Photo photo={slide} className={classes.photo} showTags={showXYTags} />\n            <Typography className={classes.labelBadge} >\n            Tags: {showXYTags ? 'On ' : 'Off '}\n              <Badge color='secondary' badgeContent={photos[activeStep].tags.filter(tag => tag.coords).length}>\n                <LabelIcon color='inherit' />\n              </Badge>\n            </Typography>\n\n            <GridListTileBar\n              titlePosition='top'\n              title={(\n                <Typography color='inherit' variant='caption'>\n                  <IconButton className={classes.iconButton} onClick={(e) => onCancel()}>\n                    <ArrowBackIcon />\n                  </IconButton>\n                  {formatDate(slide.date)}\n                </Typography>\n              )}\n              subtitle={<em>{paused ? 'Paused' : '    '}</em>}\n              actionIcon={paused ? (\n                <IconButton className={classes.iconButton} onClick={(e) => {\n                  e.preventDefault()\n                  e.stopPropagation()\n                  play()\n                }}>\n                  <PlayIcon />\n                </IconButton>\n              ) : (\n                <IconButton className={classes.iconButton} onClick={(e) => {\n                  e.preventDefault()\n                  e.stopPropagation()\n                  pause()\n                }}>\n                  <PauseIcon />\n                </IconButton>\n              )}\n            />\n          </GridListTile>\n        ))}\n        <IconButton size='small' className={classes.manualBack} onClick={handleBack} color='inherit'>\n          {theme.direction === 'rtl' ? <KeyboardArrowRight /> : <KeyboardArrowLeft />}\n        </IconButton>\n        <IconButton size='small' className={classes.manualForward} onClick={handleForward} color='inherit'>\n          {theme.direction === 'rtl' ? <KeyboardArrowLeft /> : <KeyboardArrowRight />}\n        </IconButton>\n      </div>\n\n      <MobileStepper\n        steps={photos.length}\n        position='static'\n        activeStep={activeStep}\n        classes={{\n          root: classes.mobileStepper,\n          dotActive: classes.dotActive\n        }}\n        nextButton={\n          <Button color='inherit' size='small' onClick={handleForward} disabled={activeStep === photos.length - 1}>\n            Next\n            {theme.direction === 'rtl' ? <KeyboardArrowLeft /> : <KeyboardArrowRight />}\n          </Button>\n        }\n        backButton={\n          <Button color='inherit' size='small' onClick={handleBack} disabled={activeStep === 0}>\n            {theme.direction === 'rtl' ? <KeyboardArrowRight /> : <KeyboardArrowLeft />}\n            Back\n          </Button>\n        }\n      />\n    </div>\n  )\n}\n\nSlideshow.propTypes = {\n  // These two come from Material UI\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  // We might want to go full screen\n  isFullScreen: PropTypes.bool,\n  // This is just the basic shape of the photo object\n  photos: PropTypes.arrayOf(PropTypes.shape({\n    img: PropTypes.string,\n    tags: PropTypes.array,\n    date: PropTypes.date\n  })),\n  transition: PropTypes.number,\n  onCancel: PropTypes.func.isRequired\n}\n\nSlideshow.defaultProps = {\n  transition: 5000,\n  isFullScreen: false,\n  slides: []\n}\n\nexport default withStyles(style, { withTheme: true })(Slideshow)\n\n/**\n * Custom React Hook for all our timer handling\n */\nconst useStepper = (num, interval) => {\n  const [activeStep, setActiveStep] = useState(0)\n  const [paused, setPaused] = useState(false)\n  const [timer, setTimer] = useState(null)\n  const [lastStep, setLastStep] = useState(0)\n\n  const handleForward = () => {\n    setLastStep(activeStep)\n    if (activeStep + 1 >= num) setActiveStep(0)\n    else setActiveStep(activeStep + 1)\n    if (!paused) {\n      destroyTimer()\n      createTimer()\n    }\n  }\n  const handleBack = () => {\n    setLastStep(activeStep)\n    if (activeStep - 1 < 0) setActiveStep(num)\n    else setActiveStep(activeStep - 1)\n    if (!paused) {\n      destroyTimer()\n      createTimer()\n    }\n  }\n\n  const pause = () => {\n    destroyTimer()\n    setPaused(true)\n  }\n  const play = () => {\n    setPaused(false)\n    destroyTimer()\n    createTimer()\n  }\n\n  const createTimer = () => {\n    const newTimer = window.setInterval(\n      // We need to use the alternate notation for the useState function\n      // because setInterval will only have access to the activeStep it was\n      // initialized with\n      () => setActiveStep(oldStep => {\n        setLastStep(oldStep)\n        return (oldStep + 1 >= num) ? 0 : oldStep + 1\n      })\n      , interval\n    )\n    setTimer(newTimer)\n  }\n  const destroyTimer = () => {\n    window.clearInterval(timer)\n    setTimer(null)\n  }\n\n  useEffect(() => {\n    createTimer()\n    return () => {\n      destroyTimer()\n    }\n  }, []) // Pass in empty array to run useEffect only on mount.\n\n  return { activeStep, lastStep, handleForward, handleBack, setActiveStep, paused, pause, play }\n}\n","// import { fade } from '@material-ui/core/styles/colorManipulator'\n\nexport default theme => ({\n  root: {\n    // maxWidth: 400,\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column'\n  },\n  swipeAble: {\n    height: '100%'\n  },\n  slideContainer: {\n    flexGrow: 1\n  },\n  mobileStepper: {\n    flexGrow: 0,\n    background: theme.palette.grey[800],\n    color: theme.palette.getContrastText(theme.palette.grey[800])\n  },\n  slide: {\n    top: 0,\n    zIndex: 0,\n    opacity: 0,\n    position: 'absolute',\n    display: 'block',\n    overflow: 'hidden',\n    width: '100%',\n    height: '100%',\n    minHeight: 300\n  },\n  dotActive: {\n    background: 'white'\n  },\n  iconButton: {\n    color: 'white'\n  },\n  active: {\n    zIndex: 5,\n    opacity: 1\n  },\n  last: {\n    opacity: 1,\n    zIndex: 4\n  },\n  tagContainer: {\n\n  },\n  labelBadge: {\n    color: 'white',\n    zIndex: 10,\n    position: 'absolute',\n    right: theme.spacing.unit * 2,\n    bottom: theme.spacing.unit,\n    opacity: 0.8\n  },\n  tagChip: {\n    // height: theme.spacing.unit * 3,\n    marginRight: theme.spacing.unit,\n    fontSize: 10,\n    height: theme.spacing.unit * 2,\n    padding: theme.spacing.unit / 2\n  },\n  xyTagChip: {\n    position: 'absolute',\n    fontSize: theme.spacing.unit,\n    height: theme.spacing.unit * 2\n  },\n  manualBack: {\n    color: 'white',\n    zIndex: 10,\n    position: 'absolute',\n    transform: 'translateY(-50%)',\n    left: 0,\n    top: '50%'\n  },\n  manualForward: {\n    color: 'white',\n    zIndex: 10,\n    position: 'absolute',\n    transform: 'translateY(-50%)',\n    right: 0,\n    top: '50%'\n  }\n})\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\nimport uuid from 'uuid/v4'\nimport {\n  Paper,\n  TextField,\n  Typography,\n  MenuItem\n} from '@material-ui/core'\nimport Select from 'react-select'\nimport CreatableSelect from 'react-select/lib/Creatable'\nimport { withStyles } from '@material-ui/core/styles'\nimport TagChip from '../TagChip'\nimport useFormFieldState from './useFormFieldState'\nimport style from './TagControl.style'\n\n/**\n * Just to be clear: the state here is being stored as []\n */\nconst TagControl = ({ classes, defaultValue, allowEdit, onChange: onChangeExt, permaEdit, hint, tagConfig, group, className }) => {\n  const {\n    editing, value, onChange, Header\n  } = useFormFieldState(defaultValue, allowEdit, onChangeExt, permaEdit)\n\n  const onSelectChange = (inputValue, { action, removedValue, option, ...other }) => {\n    // If this was the last tag then close the menu\n    switch (action) {\n      case 'clear':\n        onChange([])\n        break\n      case 'remove-value':\n        // Remember we need to potentially remove it from the old AND the new\n        onChange(value.filter(val => val.id !== removedValue.value))\n        break\n      case 'select-option':\n        const newVal = {\n          ...tagConfig.values.find(tcv => tcv.id === option.value),\n          typeId: tagConfig.id\n        }\n        onChange([...value, newVal])\n        break\n      case 'create-option':\n        const newLabel = inputValue.find(v => v.__isNew__).value\n        const newCreateVal = {\n          label: newLabel,\n          id: uuid(),\n          typeId: tagConfig.id\n        }\n        onChange([...value, newCreateVal])\n        break\n      default:\n        break\n    }\n  }\n\n  const SingleValue = ({ removeProps, data }) => (\n    <TagChip tag={data} onDelete={removeProps.onClick} group={group} edit />\n  )\n  SingleValue.propTypes = {\n    removeProps: PropTypes.any,\n    data: PropTypes.any\n  }\n\n  const MultiValue = ({ removeProps, data }) => (\n    <TagChip tag={data} onDelete={removeProps.onClick} group={group} edit />\n  )\n  MultiValue.propTypes = {\n    removeProps: PropTypes.any,\n    data: PropTypes.any\n  }\n\n  // Filter to just this tag type\n  const tagValues = value.filter(tag => tag.typeId === tagConfig.id)\n  // Now format it as {label, value: id} for react-select\n  const selectOptions = tagValues.map(val => ({ label: val.label, value: val.id }))\n\n  // Filter out things we haven't chosen yet\n  // Also transform the options into a label/value pair for react-select\n  const remainingTags = tagConfig.values\n    .filter(val => tagValues.map(t => t.id).indexOf(val.id) === -1)\n    .map(val => ({ label: val.label, value: val.id }))\n\n  // console.log('TAG DEBUG', { value, tagValues, tagConfig })\n\n  return (\n    <div className={classNames(classes.root, editing && classes.rootEdit, className)}>\n      <Header>{tagConfig.label}</Header>\n      {!(editing || permaEdit)\n        ? <div className={classes.tagContainer}>\n          {tagValues.map((tag, idx) => (\n            <TagChip tag={tag} key={`tagchip${idx}`} group={group} edit={editing} />\n          ))}\n        </div>\n        : null\n      }\n      { (editing || permaEdit) && !tagConfig.allowAdditions && (\n        <Select\n          options={remainingTags}\n          classes={classes}\n          components={{\n            Control,\n            Menu,\n            MultiValue,\n            NoOptionsMessage,\n            Option,\n            Placeholder,\n            SingleValue,\n            ValueContainer\n          }}\n          value={selectOptions}\n          isClearable={false}\n          onChange={onSelectChange}\n          placeholder='Select Tags'\n          isMulti\n          isSearchable\n        />\n      ) }\n      { (editing || permaEdit) && tagConfig.allowAdditions && (\n        <CreatableSelect\n          options={remainingTags}\n          classes={classes}\n          components={{\n            Control,\n            Menu,\n            MultiValue,\n            NoOptionsMessage,\n            Option,\n            Placeholder,\n            SingleValue,\n            ValueContainer\n          }}\n          value={selectOptions}\n          isClearable={false}\n          onChange={onSelectChange}\n          placeholder='Select Tags'\n          isMulti\n          isSearchable\n        />\n      )}\n      {hint && <Typography variant='caption' className={classes.hint}>{hint}</Typography>}\n    </div>\n  )\n}\n\nTagControl.propTypes = {\n  classes: PropTypes.object.isRequired,\n  className: PropTypes.string,\n  hint: PropTypes.string,\n  defaultValue: PropTypes.array,\n  allowEdit: PropTypes.bool,\n  permaEdit: PropTypes.bool,\n  onChange: PropTypes.func.isRequired,\n  tagConfig: PropTypes.object,\n  group: PropTypes.number\n}\n\nexport default withStyles(style)(TagControl)\n\nfunction Control (props) {\n  return (\n    <TextField\n      fullWidth\n      InputProps={{\n        inputComponent,\n        inputProps: {\n          className: props.selectProps.classes.input,\n          inputRef: props.innerRef,\n          children: props.children,\n          ...props.innerProps\n        }\n      }}\n      {...props.selectProps.textFieldProps}\n    />\n  )\n}\n\nconst NoOptionsMessage = ({ innerProps, selectProps, children }) => (\n  <Typography\n    color='textSecondary'\n    className={selectProps.classes.noOptionsMessage}\n    {...innerProps}\n  >\n    {children}\n  </Typography>\n)\n\nconst Menu = ({ selectProps, innerProps, children }) => (\n  <Paper square className={selectProps.classes.paper} {...innerProps}>\n    {children}\n  </Paper>\n)\n\nconst inputComponent = ({ inputRef, ...props }) => <div ref={inputRef} {...props} />\n\nconst Placeholder = (props) => (\n  <Typography\n    color='textSecondary'\n    className={props.selectProps.classes.placeholder}\n    {...props.innerProps}\n  >\n    {props.children}\n  </Typography>\n)\n\nconst Option = ({ innerRef, isFocused, isSelected, innerProps, children }) => (\n  <MenuItem\n    buttonRef={innerRef}\n    selected={isFocused}\n    component='div'\n    style={{ fontWeight: isSelected ? 500 : 400 }}\n    {...innerProps}\n  >\n    {children}\n  </MenuItem>\n)\n\nconst ValueContainer = ({ selectProps, children }) => (\n  <div className={selectProps.classes.valueContainer}>{children}</div>\n)\nValueContainer.propTypes = {\n  selectProps: PropTypes.any,\n  children: PropTypes.any\n}\n","export default theme => ({\n  root: {\n  },\n  tagContainer: {\n  },\n  formControl: {\n    width: '100%'\n  },\n  actionButtons: {\n    textAlign: 'right'\n  },\n  noOptionsMessage: {\n    padding: `${theme.spacing.unit}px ${theme.spacing.unit * 2}px`\n  },\n  singleValue: {\n    fontSize: 16\n  },\n  placeholder: {\n    position: 'absolute',\n    left: 2,\n    fontSize: 16\n  },\n  input: {\n    display: 'flex',\n    padding: 0\n  },\n  valueContainer: {\n    display: 'flex',\n    flexWrap: 'wrap',\n    flex: 1,\n    alignItems: 'center',\n    overflow: 'hidden'\n  },\n  paper: {\n    position: 'absolute',\n    zIndex: 1,\n    marginTop: theme.spacing.unit,\n    left: 0,\n    right: 0\n  }\n})\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\nimport {\n  TextField,\n  Typography\n} from '@material-ui/core'\nimport useFormFieldState from './useFormFieldState'\nimport { withStyles } from '@material-ui/core/styles'\nimport { timestampToHTML5Input, HTML5InputToTimestamp } from '../../lib/datelib'\n\nconst style = theme => ({\n  root: {\n  },\n  rootEdit: {\n  },\n  formControl: {\n    width: '100%'\n  },\n  textBody: {\n    whiteSpace: 'pre-line'\n  },\n  actionButtons: {\n    textAlign: 'right'\n  }\n})\n\nconst DateControl = ({\n  classes,\n  label,\n  defaultValue,\n  permaEdit,\n  hint,\n  allowEdit,\n  onChange: onChangeExt,\n  className\n}) => {\n  const { editing, value, onChange, Header } = useFormFieldState(defaultValue, allowEdit, onChangeExt, permaEdit)\n  const disableField = !(editing || permaEdit)\n  return (\n    <div className={classNames(classes.root, editing && classes.rootEdit, className)}>\n      <Header>{label}</Header>\n      <TextField\n        type='datetime-local'\n        fullWidth\n        disabled={disableField}\n        value={timestampToHTML5Input(value)}\n        className={classes.textField}\n        onChange={(e) => onChange(HTML5InputToTimestamp(e.target.value))}\n      />\n      {hint && <Typography variant='caption' className={classes.hint}>{hint}</Typography>}\n    </div>\n  )\n}\n\nDateControl.propTypes = {\n  classes: PropTypes.object.isRequired,\n  className: PropTypes.string,\n  label: PropTypes.string.isRequired,\n  hint: PropTypes.string,\n  defaultValue: PropTypes.string,\n  allowEdit: PropTypes.bool,\n  permaEdit: PropTypes.bool,\n  onChange: PropTypes.func.isRequired\n}\n\nexport default withStyles(style)(DateControl)\n","import React, { useContext } from 'react'\nimport PropTypes from 'prop-types'\nimport {\n  Button,\n  Dialog,\n  IconButton,\n  DialogTitle,\n  DialogContent,\n  Typography,\n  DialogActions,\n  Divider,\n  List,\n  ListItem,\n  ListItemText\n} from '@material-ui/core'\nimport TagClass from '../../lib/Tags'\nimport { Close as CloseIcon } from '@material-ui/icons'\nimport { withStyles } from '@material-ui/core/styles'\nimport TagControl from '../controls/TagControl'\nimport TextAreaControl from '../controls/TextAreaControl'\nimport DateControl from '../controls/DateControl'\nimport style from './PhotoInfo.style'\nimport { SeriesConfig } from '../../contexts'\n\n// import DateControl from './controls/DateControl'\nconst PhotoInfo = ({ classes, allowEdit, photo, onClose, open, onChange }) => {\n  const seriesConfig = useContext(SeriesConfig)\n  const onChangeLocal = (fieldName) => (val) => {\n    onChange({ ...photo, [fieldName]: val })\n  }\n\n  const tagInst = new TagClass(seriesConfig, photo.tags)\n\n  return (\n    <Dialog\n      fullScreen\n      fullWidth\n      onClose={onClose}\n      aria-labelledby='customized-dialog-title'\n      open={open}\n    >\n\n      <DialogTitle disableTypography className={classes.dlgTitleContainer}>\n        <Typography variant='title' className={classes.dlgTitle}>\n          Photo Properties\n        </Typography>\n        <IconButton onClick={onClose}>\n          <CloseIcon />\n        </IconButton>\n      </DialogTitle>\n      <DialogContent>\n        <DateControl\n          className={classes.field}\n          label='Photo taken on'\n          defaultValue={photo.date}\n          onChange={onChangeLocal('date')}\n          allowEdit={allowEdit}\n        />\n\n        <TextAreaControl\n          label='Photo Note'\n          defaultValue={photo.note}\n          collapsed\n          collapsedHeight={50}\n          onChange={onChangeLocal('note')}\n          allowEdit={allowEdit}\n        />\n\n        <Typography variant='subtitle1'>Category tags</Typography>\n\n        {tagInst.seriesConfig.getNonXYTagTypes().map((tt, idx) => (\n          <TagControl\n            className={classes.field}\n            defaultValue={photo.tags}\n            tagConfig={tt}\n            group={tagInst.seriesConfig.getTagTypeIndex(tt.id)}\n            allowEdit={allowEdit}\n            onChange={onChangeLocal('tags')}\n            key={`tagtype-${idx}`}\n          />\n        ))}\n\n        <Typography className={classes.heading}>Metadata</Typography>\n        <Divider />\n        <List className={classes.list}>\n          {Object.keys(photo.meta).map((key, idx) => seriesConfig.meta[key] ? (\n            <ListItem key={`metadata${idx}`}>\n              <ListItemText\n                primary={seriesConfig.meta[key].label}\n                secondary={seriesConfig.meta[key].render(photo.meta[key])}\n              />\n            </ListItem>\n          ) : null\n          )}\n        </List>\n\n      </DialogContent>\n\n      <DialogActions>\n        <Button onClick={onClose} color='primary'>\n        Back\n        </Button>\n      </DialogActions>\n    </Dialog>\n  )\n}\n\nPhotoInfo.propTypes = {\n  classes: PropTypes.object.isRequired,\n  allowEdit: PropTypes.bool,\n  onClose: PropTypes.func.isRequired,\n  open: PropTypes.bool,\n  photo: PropTypes.object.isRequired,\n  // Now some action tags\n  onChange: PropTypes.func.isRequired\n}\n\nexport default withStyles(style)(PhotoInfo)\n","\nexport default theme => ({\n  root: {\n    height: '90%',\n    width: '85%'\n  },\n  dlgTitleContainer: {\n    display: 'flex',\n    padding: 0\n  },\n  dlgTitle: {\n    flexGrow: 1,\n    paddingTop: theme.spacing.unit * 2,\n    paddingBottom: theme.spacing.unit,\n    paddingLeft: theme.spacing.unit * 3\n  },\n  field: {\n    marginBottom: theme.spacing.unit * 2\n  }\n})\n","import React, { useState, useContext } from 'react'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\nimport { CssBaseline,\n  Button,\n  Typography,\n  AppBar,\n  Toolbar,\n  IconButton,\n  Badge,\n  Chip\n} from '@material-ui/core'\nimport {\n  ArrowBack as ArrowBackIcon,\n  Info as InfoIcon,\n  Label as LabelIcon\n} from '@material-ui/icons'\nimport { withStyles } from '@material-ui/core/styles'\nimport PhotoInfo from '../../components/PhotoInfo/PhotoInfo'\nimport style from './PhotoViewTool.style'\nimport Photo from '../../components/Photo/Photo'\nimport { SeriesConfig } from '../../contexts'\nimport Tags from '../../lib/Tags'\n\nconst STATES = {\n  VIEWPIC: 0,\n  SHOWINFO: 1,\n  SHOWTAGS: 2,\n  EDITTAGS: 3,\n  FIRSTAGEDIT: 4\n}\n\nconst PhotoViewTool = ({ classes, photo, onMenuBack, onUpdatePhoto, allowEdit, newPhoto }) => {\n  const seriesConfig = useContext(SeriesConfig)\n  // This is a special copy of the photo so we can play around with the XY tags and undo\n  // if we need to\n  const [tempPhoto, setTempPhoto] = useState(photo)\n  const [mode, setMode] = useState({\n    current: newPhoto ? STATES.FIRSTAGEDIT : STATES.VIEWPIC,\n    last: null\n  })\n\n  const tagsClass = new Tags(seriesConfig, tempPhoto.tags)\n\n  const changeMode = (desired) => {\n    setMode({ current: desired, last: mode.current })\n  }\n\n  const onCommitTags = () => {\n    changeMode(STATES.SHOWTAGS)\n    onUpdatePhoto(tempPhoto)\n  }\n\n  const onCommitTagsFirst = () => {\n    onUpdatePhoto(tempPhoto)\n    onMenuBack()\n  }\n\n  const onCancelTagEdit = () => {\n    changeMode(STATES.SHOWTAGS)\n    setTempPhoto(photo)\n  }\n\n  const photoClick = (e) => {\n    if (mode.current === STATES.VIEWPIC) {\n      e.preventDefault()\n      e.stopPropagation()\n      changeMode(STATES.SHOWINFO)\n    }\n  }\n\n  return (\n    <div className={classes.root}>\n      <CssBaseline /> {/* You only need this in a root element. Don't put it anywhere else in the dom */}\n      <AppBar position='static' className={classes.appBar}>\n        <Toolbar>\n          {mode.current !== STATES.FIRSTAGEDIT && (\n            <IconButton\n              className={classes.menuButton}\n              color='inherit'\n              aria-label='Menu'\n              onClick={() => onMenuBack()}\n            >\n              <ArrowBackIcon />\n            </IconButton>\n          )}\n\n          <Typography variant='h6' color='inherit' className={classes.grow}>\n            {newPhoto ? 'Add Tags' : 'Photo View'}\n          </Typography>\n          { mode.current === STATES.EDITTAGS &&\n          <Button color='inherit' onClick={onCancelTagEdit}>\n            Cancel\n          </Button>\n          }\n\n          { mode.current === STATES.EDITTAGS &&\n          <Button color='inherit' onClick={onCommitTags}>\n            Save\n          </Button>\n          }\n          { mode.current === STATES.FIRSTAGEDIT &&\n          <Button color='inherit' onClick={onCommitTagsFirst}>\n            Next\n          </Button>\n          }\n\n          { allowEdit && mode.current === STATES.SHOWTAGS &&\n          <Button color='inherit' onClick={() => changeMode(STATES.EDITTAGS)}>\n            Edit\n          </Button>\n          }\n\n          { (mode.current !== STATES.EDITTAGS && mode.current !== STATES.FIRSTAGEDIT) &&\n          <IconButton color='inherit'\n            className={classNames(classes.tagButton, mode.current === STATES.SHOWTAGS && classes.activeButton)}\n            onClick={() => changeMode(mode.current === STATES.SHOWTAGS ? STATES.VIEWPIC : STATES.SHOWTAGS)}\n          >\n            <Badge className={classes.margin} badgeContent={tagsClass.getXYTags().length} color='secondary'>\n              <LabelIcon />\n            </Badge>\n          </IconButton>\n          }\n\n          { (mode.current !== STATES.EDITTAGS && mode.current !== STATES.FIRSTAGEDIT) &&\n          <IconButton color='inherit'\n            className={classNames(classes.infoButton, mode.current === STATES.SHOWINFO && classes.activeButton)}\n            onClick={() => changeMode(mode.current === STATES.SHOWINFO ? STATES.VIEWPIC : STATES.SHOWINFO)}\n          >\n            <InfoIcon />\n          </IconButton>\n          }\n\n        </Toolbar>\n      </AppBar>\n      <div className={classes.inner} onClick={photoClick}>\n        <Photo\n          showTags={mode.current === STATES.SHOWTAGS}\n          photo={tempPhoto}\n          edit={allowEdit && (mode.current === STATES.EDITTAGS || mode.current === STATES.FIRSTAGEDIT)}\n          onChange={setTempPhoto}\n          onCommitTags={onCommitTags}\n        />\n        {mode.current === STATES.SHOWINFO && (\n          <div className={classes.infoWindow}>\n            Esse nisi adipisicing nulla deserunt ut adipisicing officia fugiat culpa excepteur amet et mollit magna. Voluptate cupidatat deserunt est ea esse duis. Aute cillum pariatur pariatur magna consectetur excepteur. Sit pariatur nostrud labore ex mollit mollit nisi reprehenderit. Id in sint commodo commodo ipsum fugiat aliqua culpa velit ad sint ut. Magna ut nostrud non do minim. Consequat ex duis elit eu cillum pariatur in nostrud est reprehenderit.\n          </div>\n        )}\n      </div>\n      <PhotoInfo\n        open={mode.current === STATES.SHOWINFO}\n        photo={photo}\n        allowEdit={allowEdit}\n        onChange={onUpdatePhoto}\n        onClose={() => changeMode(mode.last)}\n      />\n      { (mode.current === STATES.EDITTAGS || mode.current === STATES.FIRSTAGEDIT) && (\n        <Chip\n          label='Tap to tag features...'\n          onClick={() => {}}\n          className={classes.tipChip}\n        />\n      )}\n\n    </div>\n  )\n}\n\nPhotoViewTool.propTypes = {\n  classes: PropTypes.object.isRequired,\n  photo: PropTypes.object.isRequired,\n  allowEdit: PropTypes.bool,\n  newPhoto: PropTypes.bool,\n  // Now some action functions\n  onMenuBack: PropTypes.func.isRequired,\n  onUpdatePhoto: PropTypes.func.isRequired\n}\n\nexport default withStyles(style)(PhotoViewTool)\n","export default theme => ({\n  root: {\n    display: 'flex',\n    height: '100%',\n    flexDirection: 'column',\n    overflow: 'hidden'\n  },\n  appBar: {\n    flexGrow: 0\n  },\n  grow: {\n    flexGrow: 1\n  },\n  inner: {\n    flex: '1 1',\n    position: 'relative'\n  },\n  tabMenu: {\n    marginTop: theme.spacing.unit * 7\n  },\n  tipChip: {\n    position: 'absolute',\n    zIndex: 11,\n    bottom: 20,\n    left: '50%',\n    opacity: 0.6,\n    transform: 'translateX(-50%)'\n  },\n  // tagButton: {\n  //   zIndex: 10,\n  //   color: 'white',\n  //   position: 'absolute',\n  //   fontSize: '2.5rem',\n  //   top: 10,\n  //   left: 10,\n  //   opacity: 0.8\n  // },\n  // infoButton: {\n  //   zIndex: 10,\n  //   color: 'white',\n  //   position: 'absolute',\n  //   top: 10,\n  //   right: 10,\n  //   opacity: 0.8\n  // },\n  activeButton: {\n    color: theme.palette.secondary.main,\n    opacity: 1\n  }\n})\n","import uuid from 'uuid/v4'\nimport { convertJSDatetoTimestamp } from './datelib'\nimport SeriesConfig from './SeriesConfig'\n\nclass Photo {\n  constructor (seriesConfig, photo) {\n    this.config = new SeriesConfig(seriesConfig)\n    if (photo) this.photo = photo\n    else {\n      this.photo = this.newPhoto()\n    }\n  }\n\n  setMeta = () => {\n    this.meta = this.config.getPhotoMeta()\n  }\n\n  newPhoto = () => ({\n    id: uuid(),\n    url: null,\n    base64: null,\n    featured: false,\n    date: convertJSDatetoTimestamp(new Date()),\n    rawData: { },\n    note: null,\n    meta: this.config.getPhotoMeta(),\n    tags: []\n  })\n}\n\nexport default Photo\n","import uuid from 'uuid/v4'\nimport SeriesConfig from './SeriesConfig'\n\nclass Series {\n  constructor (seriesConfig, series) {\n    this.config = new SeriesConfig(seriesConfig)\n    if (series) this.series = series\n    else {\n      this.series = this.newSeries()\n    }\n  }\n\n  setMeta = () => {\n    this.meta = this.config.getSeriesMeta()\n  }\n\n  newSeries = () => ({\n    id: uuid(),\n    featured: false,\n    name: null,\n    meta: this.config.getSeriesMeta(),\n    note: null,\n    location: [49.3050394, -123.1398254],\n    direction: null,\n    photos: []\n  })\n}\n\nexport default Series\n","import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\nimport { Typography } from '@material-ui/core'\nimport Slider from '@material-ui/lab/Slider'\n// import { Menu as MenuIcon } from '@material-ui/icons'\nimport { withStyles } from '@material-ui/core/styles'\n\nconst style = theme => ({\n  root: {\n    color: 'white',\n    zIndex: 10,\n    display: 'flex',\n    flexDirection: 'column',\n    position: 'absolute',\n    height: '50%',\n    top: '45%',\n    left: '0',\n    transform: 'translateY(-50%)'\n  },\n  sliderLabel: {\n    display: 'block',\n    flexGrow: 1,\n    textAlign: 'center',\n    padding: theme.spacing.unit\n  },\n  container: {\n    padding: '10px 36px'\n  },\n  track: {\n    width: `4px!important`,\n    background: 'white'\n  },\n  thumb: {\n    background: 'white',\n    width: 30,\n    height: 30\n\n  }\n})\n\nconst PhotoFadeSlider = ({ classes, defaultValue, onChange }) => {\n  // we control the state internally so we get a smooth experience\n  const [slider, setSlider] = useState(defaultValue)\n\n  const onSliderMove = (event, value) => {\n    setSlider(value)\n    // send it back if we need to\n    onChange(value)\n  }\n\n  return (\n    <div className={classes.root}>\n      <Typography className={classes.sliderLabel} color='inherit' variant='caption'>New</Typography>\n      <Slider\n        classes={{\n          container: classes.container,\n          track: classes.track,\n          thumb: classes.thumb\n        }}\n        value={slider}\n        aria-labelledby='label'\n        onChange={onSliderMove}\n        vertical\n      />\n      <Typography className={classes.sliderLabel} color='inherit' variant='caption'>Reference</Typography>\n    </div>\n  )\n}\n\nPhotoFadeSlider.propTypes = {\n  classes: PropTypes.object.isRequired,\n  defaultValue: PropTypes.number,\n  onChange: PropTypes.func\n}\n\nPhotoFadeSlider.defaultProps = {\n  defaultValue: 100,\n  onChange: () => {}\n}\n\nexport default withStyles(style)(PhotoFadeSlider)\n","import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\nimport {\n  CssBaseline,\n  Snackbar,\n  Button\n} from '@material-ui/core'\nimport Photo from '../../components/Photo/Photo'\nimport PhotoFadeSlider from '../../components/controls/PhotoFadeSlider'\nimport { withStyles } from '@material-ui/core/styles'\nimport style from './PhotoReviewTool.style'\n\nconst PhotoReviewTool = ({\n  classes, captured, defaultRefPhotoId, photos,\n  onConfirm, onCancel, onRetry\n}) => {\n  const newRefPhoto = defaultRefPhotoId\n    ? photos.find(p => p.id === defaultRefPhotoId)\n    : photos && photos.length > 0 ? photos[0] : null\n\n  const [refPhoto, setRefPhoto] = useState(newRefPhoto)\n  const [slider, setSlider] = useState(100)\n\n  return (\n    <div className={classes.root}>\n      <CssBaseline />\n      { Boolean(refPhoto) && (\n        <PhotoFadeSlider defaultValue={100} onChange={setSlider} />\n      )}\n\n      <div className={classes.captured}>\n        <Photo\n          opacity={slider / 100}\n          className={classes.capturedContainer}\n          photo={captured}\n        />\n      </div>\n      { Boolean(refPhoto) && (\n        <div className={classes.reference} >\n          <Photo\n            className={classes.referenceContainer}\n            photo={refPhoto}\n          />\n        </div>\n      )}\n      <Snackbar\n        open\n        autoHideDuration={null}\n        ContentProps={{\n          'aria-describedby': 'snackbar-fab-message-id',\n          className: classes.snackbarContent\n        }}\n        message={<span id='snackbar-fab-message-id'>Keep this photo?</span>}\n        action={<div>\n          <Button color='inherit' size='small' onClick={onCancel}>\n                Cancel\n          </Button>\n          {Boolean(onRetry) && (\n            <Button color='inherit' size='small' onClick={onRetry}>\n          Retry\n            </Button>\n          )}\n\n          <Button color='inherit' size='small' onClick={onConfirm}>\n                Keep\n          </Button>\n        </div>\n        }\n        className={classes.snackbar}\n      />\n    </div>\n  )\n}\n\nPhotoReviewTool.propTypes = {\n  classes: PropTypes.object.isRequired,\n  defaultRefPhotoId: PropTypes.string,\n  photos: PropTypes.array,\n  captured: PropTypes.object.isRequired,\n  // Now some functions\n  onConfirm: PropTypes.func.isRequired,\n  onCancel: PropTypes.func.isRequired,\n  onRetry: PropTypes.func // only for camera\n\n}\n\nexport default withStyles(style)(PhotoReviewTool)\n","export default theme => ({\n  root: {\n    background: 'rgb(150,150, 150)',\n    // border: '5px solid red',\n    height: '100%',\n    width: '100%'\n  },\n  capturedContainer: {\n    position: 'absolute',\n    zIndex: 1,\n    height: '100%',\n    width: '100%'\n  },\n  referenceContainer: {\n    position: 'absolute',\n    zIndex: 0,\n    height: '100%',\n    width: '100%'\n  },\n  captured: {\n\n  },\n  reference: {\n\n  },\n  referenceTextContainer: {\n    width: '100%',\n    display: 'flex',\n    color: 'white',\n    background: 'rgba(0,0,0,0.5)',\n    padding: theme.spacing.unit * 3,\n    position: 'absolute',\n    zIndex: 4,\n    top: 0\n  },\n  newText: {\n    flexGrow: 1,\n    color: 'white',\n    textShadow: '1 1 1 black',\n    textAlign: 'right'\n  },\n  refText: {\n    flexGrow: 1,\n    color: 'white',\n    textShadow: '1 1 1 black'\n  }\n})\n","import { useState, useEffect } from 'react'\n\nexport const useCamera = (onCapture) => {\n  const [webcam, setWebcam] = useState()\n  const [cameraError, setCameraError] = useState()\n\n  const initCamera = () => {\n    const webcam = new Webcam(\n      document.getElementById('webcam'),\n      document.createElement('canvas')\n    )\n    webcam.setup(window.innerHeight, window.innerWidth)\n      .catch(() => {\n        setCameraError(true)\n        // alert('Error getting access to your camera')\n      })\n    setWebcam(webcam)\n  }\n\n  const captureImage = async () => {\n    const capturedData = webcam.takeBase64Photo({ type: 'png', quality: 1 })\n    // console.log(capturedData)\n    // alert(`Captured: ${capturedData.imageHeight} X ${capturedData.imageWidth}`)\n    onCapture(capturedData)\n  }\n\n  useEffect(() => {\n    if (!webcam && !cameraError) initCamera()\n  })\n\n  return { cameraError, captureImage }\n}\n\nclass Webcam {\n  constructor (webcamElement, canvasElement) {\n    this.webcamElement = webcamElement\n    this.canvasElement = canvasElement\n\n    if (window.location.protocol !== 'https:' && window.location.hostname !== 'localhost') {\n      console.warn('getUserMedia() must be run from a secure origin: https or localhost.\\nChanging protocol to https.')\n    }\n\n    if (!navigator.mediaDevices && !navigator.getUserMedia) {\n      console.warn(`Your browser doesn't support navigator.mediaDevices.getUserMedia and navigator.getUserMedia.`)\n    }\n  }\n\n  adjustVideoSize (width, height) {\n    const aspectRatio = width / height\n    if (width >= height) {\n      this.webcamElement.width = aspectRatio * this.webcamElement.height\n    }\n    else if (width < height) {\n      this.webcamElement.height = this.webcamElement.width / aspectRatio\n    }\n  }\n\n  async setup (width, height) {\n    return new Promise((resolve, reject) => {\n      if (navigator.mediaDevices.getUserMedia !== undefined) {\n        navigator.mediaDevices.getUserMedia({ audio: false, video: { facingMode: 'environment', width, height } })\n          .then((mediaStream) => {\n            if ('srcObject' in this.webcamElement) {\n              this.webcamElement.srcObject = mediaStream\n            }\n            else {\n              // For older browsers withouth the srcObject.\n              this.webcamElement.src = window.URL.createObjectURL(mediaStream)\n            }\n            this.webcamElement.onloadedmetadata = (e) => {\n              this.webcamElement.play()\n            }\n          })\n          .catch(err => reject(err))\n      }\n      else {\n        reject(new Error('Error accessing camera'))\n      }\n    })\n  }\n\n  _drawImage () {\n    const imageWidth = this.webcamElement.videoWidth\n    const imageHeight = this.webcamElement.videoHeight\n\n    const context = this.canvasElement.getContext('2d')\n    this.canvasElement.width = imageWidth\n    this.canvasElement.height = imageHeight\n\n    context.drawImage(this.webcamElement, 0, 0, imageWidth, imageHeight)\n\n    return { imageHeight, imageWidth }\n  }\n\n  takeBlobPhoto () {\n    const { imageWidth, imageHeight } = this._drawImage()\n    return new Promise((resolve, reject) => {\n      this.canvasElement.toBlob((blob) => {\n        resolve({ blob, imageHeight, imageWidth })\n      })\n    })\n  }\n\n  takeBase64Photo ({ type, quality } = { type: 'png', quality: 1 }) {\n    const { imageHeight, imageWidth } = this._drawImage()\n    const base64 = this.canvasElement.toDataURL('image/' + type, quality)\n    return { base64, imageHeight, imageWidth }\n  }\n}\n","import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\nimport {\n  Fab,\n  SwipeableDrawer,\n  CssBaseline,\n  Typography\n} from '@material-ui/core'\nimport PhotoFadeSlider from '../../components/controls/PhotoFadeSlider'\nimport PhotoGrid from '../../components/PhotoGrid/PhotoGrid'\nimport {\n  Camera as CameraIcon,\n  Cancel as CancelIcon,\n  MyLocation as MyLocationIcon,\n  PhotoLibrary as PhotoLibraryIcon\n} from '@material-ui/icons'\nimport { withStyles } from '@material-ui/core/styles'\nimport style from './CameraTool.style'\nimport { useCamera } from '../../lib/useCamera'\nimport Photo from '../../components/Photo/Photo'\n\n// https://googlechrome.github.io/samples/image-capture/grab-frame-take-photo.html\nconst CameraTool = ({ classes, photos, onCancel, onShutter, defaultRefPhotoId }) => {\n  const [slider, setSlider] = useState(50)\n  const newRefPhoto = defaultRefPhotoId\n    ? photos.find(p => p.id === defaultRefPhotoId)\n    : photos && photos.length > 0 ? photos[0] : null\n\n  const [refPhoto, setRefPhoto] = useState(newRefPhoto)\n  const [drawerOpen, setDrawerOpen] = useState(false)\n  const { cameraError, captureImage } = useCamera((data) => onShutter(data, refPhoto ? refPhoto.id : null))\n\n  const handleTileClick = (id) => {\n    setRefPhoto(photos.find(p => p.id === id))\n    setDrawerOpen(false)\n  }\n\n  return (\n    <div className={classes.root}>\n      <CssBaseline />\n      { !cameraError && Boolean(refPhoto) && (\n        <PhotoFadeSlider defaultValue={slider} onChange={setSlider} />\n      )}\n\n      { cameraError && (\n        <div className={classes.cameraErrorText}>\n          <Typography variant='h3' color='inherit'>No Camera Access</Typography>\n          <Typography variant='body2' color='inherit'>Please enabled access in your settings.</Typography>\n        </div>\n      )}\n\n      <div className={classes.captured}>\n        { Boolean(refPhoto) && (\n          <div className={classes.reference} >\n            <Photo\n              className={classes.referenceContainer}\n              opacity={(100 - slider) / 100}\n              photo={refPhoto}\n            />\n          </div>\n        )}\n        { !cameraError && (\n          <video\n            autoPlay\n            playsInline\n            muted\n            id='webcam'\n            width={window.innerWidth}\n            height={window.innerHeight}\n            className={classes.video}\n          />\n        )}\n      </div>\n\n      <Fab\n        color='primary'\n        aria-label='Take Photo'\n        classes={{\n          disabled: classes.disabledFab\n        }}\n        disabled={cameraError}\n        className={classNames(classes.cameraFab, classes.buttonFab)}\n        onClick={captureImage}\n      >\n        <CameraIcon className={classes.cameraIcon} />\n      </Fab>\n\n      <Fab\n        color='secondary'\n        aria-label='cancel'\n        onClick={onCancel}\n        classes={{\n          disabled: classes.disabledFab\n        }}\n        className={classNames(classes.cancelFab, classes.buttonFab)}\n      >\n        <CancelIcon className={classes.cancelIcon} />\n      </Fab>\n\n      {/* <Fab\n        aria-label='locationHelper'\n        disabled={cameraError}\n        classes={{\n          disabled: classes.disabledFab\n        }}\n        className={classNames(classes.myLocationFab, classes.buttonFab)}\n      >\n        <MyLocationIcon className={classes.myLocationIcon} />\n      </Fab> */}\n\n      <Fab\n        aria-label='cancel'\n        className={classNames(classes.libraryFab, classes.buttonFab)}\n        classes={{\n          disabled: classes.disabledFab\n        }}\n        disabled={!photos || photos.length === 0}\n        onClick={() => setDrawerOpen(true)}\n      >\n        <PhotoLibraryIcon className={classes.libraryIcon} />\n      </Fab>\n\n      <SwipeableDrawer\n        anchor='left'\n        open={drawerOpen}\n        classes={{\n          paperAnchorLeft: classes.swipeDrawer\n        }}\n        onClose={() => setDrawerOpen(false)}\n        onOpen={() => setDrawerOpen(true)}\n      >\n        <div\n          tabIndex={0}\n          className={classes.swipeDrawerContainer}\n          role='button'\n          onClick={() => setDrawerOpen(false)}\n          onKeyDown={() => setDrawerOpen(false)}\n        >\n          <PhotoGrid\n            multiSelect={false}\n            columns={1}\n            photos={photos}\n            onTileClick={handleTileClick}\n          />\n        </div>\n      </SwipeableDrawer>\n\n    </div>\n  )\n}\n\nCameraTool.propTypes = {\n  classes: PropTypes.object.isRequired,\n  photos: PropTypes.array,\n  defaultRefPhotoId: PropTypes.string, // id of the reference photo\n  onCancel: PropTypes.func.isRequired,\n  onShutter: PropTypes.func.isRequired\n}\n\nexport default withStyles(style)(CameraTool)\n","export default theme => ({\n  root: {\n    background: 'black',\n    // border: '5px solid red',\n    height: '100%',\n    width: '100%'\n  },\n  cameraErrorText: {\n    color: 'white',\n    position: 'absolute',\n    top: '50%',\n    left: '50%',\n    width: '90%',\n    transform: 'translateY(-50%) translateX(-50%)',\n    textAlign: 'center'\n  },\n  disabledFab: {\n    color: '#AAAAA!important',\n    background: '#DDDDDD!important',\n    opacity: 0.2\n  },\n  cameraFab: {\n    position: 'absolute',\n    zIndex: 10,\n    '@media (orientation: landscape)': {\n      right: '20px',\n      top: '50%',\n      transform: 'translateY(-50%)',\n      height: '25vh',\n      width: '25vh'\n    },\n    '@media (orientation: portrait)': {\n      bottom: '20px',\n      left: '50%',\n      transform: 'translateX(-50%)',\n      height: '25vw',\n      width: '25vw'\n    }\n  },\n  cameraIcon: {\n    height: '100%',\n    width: '100%'\n  },\n  cancelFab: {\n    position: 'absolute',\n    zIndex: 10,\n    '@media (orientation: landscape)': {\n      right: '15px',\n      top: '15px',\n      height: '15vh',\n      width: '15vh'\n    },\n    '@media (orientation: portrait)': {\n      right: '15px',\n      bottom: '15px',\n      height: '15vw',\n      width: '15vw'\n    }\n  },\n  cancelIcon: {\n    height: '100%',\n    width: '100%'\n  },\n\n  swipeDrawer: {\n    width: '50%'\n  },\n\n  libraryFab: {\n    position: 'absolute',\n    zIndex: 10,\n    '@media (orientation: landscape)': {\n      left: '15px',\n      top: '15px',\n      height: '15vh',\n      width: '15vh'\n    },\n    '@media (orientation: portrait)': {\n      left: '15px',\n      top: '15px',\n      height: '15vw',\n      width: '15vw'\n    }\n  },\n\n  myLocationFab: {\n    position: 'absolute',\n    zIndex: 10,\n    '@media (orientation: landscape)': {\n      right: '15px',\n      bottom: '15px',\n      height: '15vh',\n      width: '15vh'\n    },\n    '@media (orientation: portrait)': {\n      left: '15px',\n      bottom: '15px',\n      height: '15vw',\n      width: '15vw'\n    }\n  },\n  myLocationIcon: {\n    height: '80%',\n    width: '80%'\n  },\n  capturedContainer: {\n    position: 'absolute',\n    zIndex: 1,\n    height: '100%',\n    width: '100%'\n  },\n  referenceContainer: {\n    position: 'absolute',\n    zIndex: 2,\n    height: '100%',\n    width: '100%'\n  },\n  captured: {\n\n  },\n  reference: {\n\n  },\n  video: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    height: '100vh',\n    width: '100vw',\n    zIndex: 1\n    // '@media (orientation: portrait)': {\n    //   transform: 'rotate(90)'\n    // }\n  }\n  // overlayImage: {\n  //   position: 'absolute',\n  //   top: 0,\n  //   left: 0,\n  //   zIndex: 3,\n  //   height: '100vh',\n  //   width: '100vw',\n  //   textAlign: 'center'\n  // },\n  // overlayImageInner: {\n  //   '@media (orientation: landscape)': {\n  //     height: '100%',\n  //     width: 'auto'\n  //   },\n  //   '@media (orientation: portrait)': {\n  //     width: '100%',\n  //     height: 'auto'\n  //   }\n  // },\n  // newImage: {\n  //   position: 'absolute',\n  //   top: 0,\n  //   left: 0,\n  //   zIndex: 2\n  // }\n})\n","import React, { useState, useContext } from 'react'\nimport PropTypes from 'prop-types'\nimport {\n  CssBaseline,\n  Dialog,\n  DialogTitle,\n  Typography,\n  DialogContent,\n  DialogActions,\n  Button\n} from '@material-ui/core'\n// import { Menu as MenuIcon } from '@material-ui/icons'\nimport TagControl from '../controls/TagControl'\nimport TextAreaControl from '../controls/TextAreaControl'\nimport TextFieldControl from '../controls/TextFieldControl'\nimport DateControl from '../controls/DateControl'\nimport TagClass from '../../lib/Tags'\nimport Slider from '@material-ui/lab/Slider'\nimport MapDot from '../../components/maps/MapDot/MapDot'\n\nimport { withStyles } from '@material-ui/core/styles'\nimport style from './NewPhotoInfo.style'\nimport { SeriesConfig } from '../../contexts'\n\nconst NewPhotoInfo = ({ classes, photo, series, onChange, isNewSeries, onCancel, onSave }) => {\n  const seriesConfig = useContext(SeriesConfig)\n  const [rotation, setRotation] = useState(series && series.direction ? series.direction : -1)\n\n  console.log('NewPhotoInfo', { photo, series, onChange, isNewSeries, onCancel, onSave })\n\n  const onRotationChange = (dir) => {\n    const newDir = dir >= 0 ? dir : null\n    onChangeLocalSeries('direction', newDir)\n    setRotation(newDir)\n  }\n\n  const onMapChange = ({ latitude, longitude }) => {\n    onChangeLocalSeries('location', [latitude, longitude])\n  }\n\n  const onChangeLocal = (fieldName, val) => {\n    console.log('onChangeLocal', fieldName, val)\n    if (isNewSeries) {\n      onChange({\n        ...series,\n        photos: [{ ...photo, [fieldName]: val }]\n      })\n    }\n    else onChange({ ...photo, [fieldName]: val })\n  }\n  const onChangeLocalSeries = (fieldName, val) => {\n    console.log('onChangeLocalSeries', fieldName, val)\n    onChange({ ...series, [fieldName]: val })\n  }\n\n  const tagInst = new TagClass(seriesConfig, photo.tags)\n\n  return (\n    <div className={classes.root}>\n      <CssBaseline /> {/* You only need this in a root element. Don't put it anywhere else in the dom */}\n      <Dialog\n        fullScreen\n        fullWidth\n        scroll='paper'\n        disableBackdropClick\n        disableEscapeKeyDown\n        onClose={onCancel}\n        aria-labelledby='customized-dialog-title'\n        open\n      >\n\n        <DialogTitle disableTypography className={classes.dlgTitleContainer}>\n          <Typography variant='title' className={classes.dlgTitle}>\n          New Photo Properties\n          </Typography>\n        </DialogTitle>\n        <DialogContent>\n\n          {isNewSeries && (\n            <div className={classes.series}>\n              <form className={classes.form} elevation={1} noValidate autoComplete='off'>\n                <TextFieldControl\n                  className={classes.field}\n                  label='Series Name'\n                  placeholder='New Series'\n                  permaEdit\n                  allowEdit\n                  hint='give this series a name'\n                  value={series.name}\n                  onChange={val => onChangeLocalSeries('name', val)}\n                />\n                <TextAreaControl\n                  className={classes.field}\n                  label='Notes'\n                  placeholder='Any instructions for the next person to add a picture to this series?'\n                  multiline\n                  rows='1'\n                  rowsMax='4'\n                  permaEdit\n                  allowEdit\n                  value={series.note}\n                  onChange={val => onChangeLocalSeries('note', val)}\n                />\n\n                <div className={classes.mapWrapper}>\n                  <Typography variant='overline' className={classes.formLabel}>Location</Typography>\n                  <div style={{ height: 200, marginBottom: 10 }}>\n                    <MapDot\n                      editable\n                      className={classes.map}\n                      direction={rotation > 0 ? rotation : null}\n                      latitude={series.location[0]}\n                      longitude={series.location[1]}\n                      onChange={onMapChange}\n                    />\n                  </div>\n                  <Typography variant='overline' className={classes.mapFormLabel}>Direction {rotation > 0 ? '' : '(off)'}</Typography>\n                  <Slider\n                    className={classes.field}\n                    classes={{ container: classes.slider }}\n                    value={rotation || -1}\n                    min={-1}\n                    max={360}\n                    step={1}\n                    onChange={(e, value) => onRotationChange(value)}\n                  />\n                </div>\n              </form>\n            </div>\n          )}\n\n          <DateControl\n            className={classes.field}\n            label='Photo taken on'\n            defaultValue={photo.date || null}\n            onChange={val => onChangeLocal('date', val)}\n            hint='Edit the date you took this picture'\n            allowEdit\n            permaEdit\n          />\n\n          <TextAreaControl\n            label='Photo Note'\n            className={classes.field}\n            defaultValue={photo.note}\n            placeholder='Anything special about this photo?....'\n            onChange={val => onChangeLocal('note', val)}\n            rows={1}\n            rowsMax={5}\n            allowEdit\n            permaEdit\n          />\n\n          <Typography variant='subtitle1'>Category tags</Typography>\n\n          {tagInst.seriesConfig.getNonXYTagTypes().map((tt, idx) => (\n            <TagControl\n              className={classes.field}\n              defaultValue={photo.tags}\n              tagConfig={tt}\n              group={tagInst.seriesConfig.getTagTypeIndex(tt.id)}\n              allowEdit\n              permaEdit\n              onChange={val => onChangeLocal('tags', val)}\n              key={`tagtype-${idx}`}\n            />\n          ))}\n\n        </DialogContent>\n\n        <DialogActions>\n          <Button onClick={onCancel} color='primary'>\n  Cancel\n          </Button>\n          <Button onClick={onSave} color='primary'>\n  Next\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  )\n}\n\nNewPhotoInfo.propTypes = {\n  classes: PropTypes.object.isRequired,\n  photo: PropTypes.object.isRequired,\n  series: PropTypes.object,\n  isNewSeries: PropTypes.bool,\n  // onChange serves double duty here. I'm not sure if that's a good idea\n  onChange: PropTypes.func.isRequired,\n  // Standard functions\n  onCancel: PropTypes.func.isRequired,\n  onSave: PropTypes.func\n}\n\nexport default withStyles(style)(NewPhotoInfo)\n","export default theme => ({\n  root: {\n\n  },\n  formLabel: {\n    color: theme.palette.text.secondary\n  },\n  mapFormLabel: {\n    marginTop: theme.spacing.unit * 2,\n    marginBottom: theme.spacing.unit,\n    color: theme.palette.text.secondary\n  },\n  map: {\n    marginBottom: theme.spacing.unit * 2\n  },\n  mapWrapper: {\n    marginBottom: theme.spacing.unit * 2\n  },\n  field: {\n    marginBottom: theme.spacing.unit * 2\n  }\n})\n","import { useEffect, useState } from 'react'\n\nconst useFileInput = (onChange = () => {}) => {\n  const [fileInput] = useState(() => {\n    const input = document.createElement('input')\n    input.type = 'file'\n    return input\n  })\n\n  useEffect(() => {\n    const handleChange = evt => {\n      const [file] = [...fileInput.files]\n      if (file) {\n        const reader = new FileReader()\n        reader.onload = e => {\n          onChange(e.target.result)\n        }\n        reader.readAsDataURL(file)\n      }\n      fileInput.value = null\n    }\n\n    fileInput.addEventListener('change', handleChange)\n    return () => fileInput.removeEventListener('change', handleChange)\n  }, [])\n\n  return () => {\n    fileInput.click()\n  }\n}\n\nexport default useFileInput\n","import React, { useState, useContext } from 'react'\nimport PropTypes from 'prop-types'\nimport exifParser from 'exif-parser'\nimport moment from 'moment'\nimport PhotoClass from './lib/Photo'\nimport { useDeviceOrientation, useGeolocation } from './lib/sensors'\nimport SeriesClass from './lib/Series'\nimport { SeriesConfig } from './contexts'\nimport PhotoReviewTool from './views/PhotoReviewTool/PhotoReviewTool'\nimport CameraTool from './views/CameraTool/CameraTool'\n// import PhotoViewTool from './views/PhotoViewTool/PhotoViewTool'\nimport NewPhotoInfo from './components/NewPhotoInfo/NewPhotoInfo'\nimport useFileInput from './lib/useFileInput'\n\nconst MODES = {\n  CAMERA: 'camera',\n  FILEPICKER: 'library',\n  PHOTOREVIEW: 'photoreview',\n  PHOTOINFOEDIT: 'photoinfoedit'\n}\n\nconst NewPhoto = ({ inputMethod, onCreate, onCancel, photos, isNewSeries }) => {\n  const seriesConfig = useContext(SeriesConfig)\n  const [newPhoto, setNewPhoto] = useState(null)\n  // If series isn't provided then this is a new series and we need to accomodate\n  // onSeriesCreate\n  const [newSeries, setNewSeries] = useState(photos ? null : new SeriesClass(seriesConfig).series)\n  const [photoRefId, setPhotoRefId] = useState(null)\n  const [mode, _changeMode] = useState({ current: inputMethod, history: [] })\n  const orientation = useDeviceOrientation()\n  const geo = useGeolocation()\n\n  const onLibraryAdd = (data) => {\n    console.log('onLibraryAdd Debug GOT DATA')\n    let exif = {}\n    // const regex = /^data:.+\\/(.+);base64,(.*)$/\n    // const matches = data.match(regex)\n\n    // const parser = exifParser.create(Buffer.from(matches[2], 'base64'))\n    // try {\n    //   exif = parser.parse()\n    //   console.log('got EXIF')\n    // }\n    // catch (err) {\n    // // got invalid data, handle error\n    //   console.error('EXIF ERROR', err)\n    // }\n    // Ok, now try to get the datetime off the EXIF\n    let date = moment().format('x')\n    try {\n      date = exif.tags.DateTimeOriginal\n    }\n    catch (err) {\n      console.error('ERROR GETTING TIMESTAMP', err)\n    }\n    const newPhoto = new PhotoClass(seriesConfig).photo\n\n    if (isNewSeries) {\n      let loc = newSeries.location\n      try {\n        const { latitude, longitude } = newPhoto.rawData.geolocate\n        loc = [latitude, longitude]\n      }\n      catch (e) {\n        console.error(`Couldn't get geolocation from sensors`)\n      }\n      setNewSeries({\n        ...newSeries,\n        location: loc\n      })\n    }\n\n    setNewPhoto({\n      ...newPhoto,\n      date: date,\n      rawData: {\n        exif\n      },\n      base64: data\n    })\n    changeMode(MODES.PHOTOREVIEW)\n    console.log('onLibraryAdd FINISHED')\n  }\n\n  const fileClick = useFileInput(onLibraryAdd)\n\n  const changeMode = (newModeName) => {\n    console.log('NEWPHOTO changeMode', mode, newModeName)\n    _changeMode({\n      current: newModeName,\n      history: [...mode.history, mode.current]\n    })\n  }\n  const lastMode = () => {\n    if (mode.history.length > 0) {\n      const oldHistory = [...mode.history]\n      const oldMode = oldHistory.pop()\n      _changeMode({\n        current: oldMode,\n        history: oldHistory\n      })\n    }\n    else {\n      onCancel()\n    }\n  }\n\n  const onShutter = (data, refId) => {\n    const newPhoto = new PhotoClass(seriesConfig).photo\n    if (isNewSeries) {\n      let loc = newSeries.location\n      try {\n        const { latitude, longitude } = newPhoto.rawData.geolocate\n        loc = [latitude, longitude]\n      }\n      catch (e) {\n        console.error(`Couldn't get geolocation from sensors`)\n      }\n      setNewSeries({\n        ...newSeries,\n        location: loc\n      })\n    }\n\n    setNewPhoto({\n      ...newPhoto,\n      rawData: {\n        orient: orientation,\n        geolocate: geo\n      },\n      base64: data.base64\n    })\n    setPhotoRefId(refId)\n    changeMode(MODES.PHOTOREVIEW)\n  }\n\n  const onSave = () => {\n    if (isNewSeries) {\n      onCreate({\n        ...newSeries,\n        photos: [newPhoto]\n      })\n    }\n    else {\n      onCreate(newPhoto)\n    }\n  }\n\n  let component = null\n  switch (mode.current) {\n    case MODES.CAMERA:\n      component = <CameraTool\n        photos={photos}\n        onShutter={onShutter}\n        onCancel={onCancel}\n      />\n      break\n    case MODES.FILEPICKER:\n      fileClick()\n      break\n    case MODES.PHOTOREVIEW:\n      component = <PhotoReviewTool\n        defaultRefPhotoId={photoRefId}\n        photos={photos}\n        captured={newPhoto}\n        onConfirm={() => changeMode(MODES.PHOTOINFOEDIT)}\n        onCancel={onCancel}\n        onRetry={lastMode}\n      />\n      break\n    case MODES.PHOTOINFOEDIT:\n      component = <NewPhotoInfo\n        photo={newPhoto}\n        series={newSeries}\n        isNewSeries={isNewSeries}\n        onChange={isNewSeries ? setNewSeries : setNewPhoto}\n        onCancel={onCancel}\n        onSave={onSave}\n      />\n      break\n    default:\n      console.log('NEWPHOTO: default state. you should NEVER see this', mode)\n      onCancel()\n  }\n\n  return component\n}\n\nNewPhoto.propTypes = {\n  inputMethod: PropTypes.oneOf(['camera', 'library']),\n  onCreate: PropTypes.func.isRequired,\n  onCancel: PropTypes.func.isRequired,\n  isNewSeries: PropTypes.bool,\n  // This might be a new series so we might have\n  // actions to work on that\n  // This will be provided EITHER photos or onSeriesCreate\n  photos: PropTypes.array\n}\n\nexport default NewPhoto\n","import { useState, useEffect } from 'react'\n\nexport const useGeolocation = () => {\n  const [state, setState] = useState({\n    accuracy: null,\n    altitude: null,\n    altitudeAccuracy: null,\n    heading: null,\n    latitude: null,\n    longitude: null,\n    speed: null,\n    timestamp: Date.now()\n  })\n  let mounted = true\n  let watchId\n\n  const onEvent = event => {\n    if (mounted) {\n      setState({\n        accuracy: event.coords.accuracy,\n        altitude: event.coords.altitude,\n        altitudeAccuracy: event.coords.altitudeAccuracy,\n        heading: event.coords.heading,\n        latitude: event.coords.latitude,\n        longitude: event.coords.longitude,\n        speed: event.coords.speed,\n        timestamp: event.timestamp\n      })\n    }\n  }\n\n  useEffect(\n    () => {\n      navigator.geolocation.getCurrentPosition(onEvent)\n      watchId = navigator.geolocation.watchPosition(onEvent)\n\n      return () => {\n        mounted = false\n        navigator.geolocation.clearWatch(watchId)\n      }\n    },\n    [0]\n  )\n\n  return state\n}\n\nexport function useDeviceOrientation () {\n  const [deviceOrientation, setDeviceOrientation] = useState({ absolute: false, alpha: null, beta: null, gamma: null })\n\n  function handleDeviceOrientation (event) {\n    setDeviceOrientation({\n      absolute: event.absolute,\n      alpha: event.alpha,\n      beta: event.beta,\n      gamma: event.gamma\n    })\n  }\n\n  useEffect(() => {\n    window.addEventListener('deviceorientation', handleDeviceOrientation, true)\n\n    return () => {\n      window.removeEventListener('deviceorientation', handleDeviceOrientation)\n    }\n  }, [])\n\n  return deviceOrientation\n}\n\nexport function playClickAudio (clickSound) {\n  let audio = new Audio('data:audio/mp3;base64,' + clickSound.base64)\n  audio.play()\n}\n","import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\nimport SeriesView from './views/SeriesView/SeriesView'\nimport SeriesEdit from './views/SeriesEdit/SeriesEdit'\nimport Slideshow from './views/Slideshow/Slideshow'\nimport PhotoViewTool from './views/PhotoViewTool/PhotoViewTool'\nimport { SeriesConfig } from './contexts'\nimport NewPhoto from './NewPhoto'\nimport SeriesClass from './lib/Series'\n\nconst MODES = {\n  SERIES_VIEW: 'series',\n  SERIES_EDIT: 'editseries',\n  NEWPHOTO: 'newphoto',\n  NEWSERIES: 'newseries',\n  REVIEW: 'review',\n  PHOTO_VIEW: 'photoviewer',\n  PHOTO_VIEW_NEW: 'newphotoviewer',\n  SLIDESHOW: 'slideshow'\n}\nconst VIEW_ONLY_MODES = [MODES.SERIES_VIEW, MODES.PHOTO_VIEW, MODES.SLIDESHOW]\nconst VALID_STARTMODES = [MODES.SERIES_VIEW, MODES.NEWPHOTO, MODES.NEWSERIES, MODES.PHOTO_REVIEW]\n\nconst RepeatablePhotos = ({\n  modeName, series, inputMethod: inputMethodINIT, seriesConfig, allowEdit,\n  onChange, onClose, onDelete, onNewSeries\n}) => {\n  // Manage view modes separately\n  const [mode, _changeMode] = useState({\n    current: {\n      name: modeName || MODES.SERIES_VIEW,\n      pid: null,\n      inputMethod: inputMethodINIT\n    },\n    history: []\n  })\n\n  // console.log('STATE', { mode, series, seriesConfig })\n\n  // When anything changes about a photo\n  const onUpdatePhoto = (photo) => onChange({\n    ...series,\n    photos: series.photos.map(sp => sp.id === photo.id ? photo : sp)\n  })\n\n  const onCreatePhoto = (photo) => {\n    onChange({\n      ...series,\n      photos: [...series.photos, photo]\n    })\n    changeMode(MODES.PHOTO_VIEW_NEW, photo.id)\n  }\n\n  // When a photo is removed\n  const onDeletePhotos = (photoIdArr) => onChange({\n    ...series,\n    photos: series.photos.filter(sp => photoIdArr.indexOf(sp.id) < 0)\n  })\n\n  // Here's our modeChanger. My guess it will get a lot more complicated\n  // once the reducers get in and working\n  const changeMode = (newModeName, newPid, newInputMethod) => {\n    if (mode === null) onClose()\n    if (!allowEdit && VIEW_ONLY_MODES.indexOf(newModeName) < 0) {\n      console.error('ILLEGAL MODE CHANGE!!!!!', { from: mode.current, to: newModeName, allowEdit })\n    }\n    else {\n      // console.log('CHANGING MODE TO', newModeName)\n      _changeMode({\n        current: {\n          name: newModeName,\n          pid: newPid,\n          inputMethod: newInputMethod\n        },\n        history: [...mode.history, mode.current]\n      })\n    }\n  }\n  const lastMode = () => {\n    // console.log('REPEATABLEPHOTOS lastMode', mode)\n    if (mode.history.length > 0) {\n      const oldHistory = [...mode.history]\n      const oldMode = oldHistory.pop()\n      _changeMode({\n        current: oldMode,\n        history: oldHistory\n      })\n    }\n    else {\n      onClose()\n    }\n  }\n\n  const onCreateSeries = (series) => {\n    onNewSeries(series)\n    onClose()\n  }\n\n  // The action to initiate the photo viewer\n  const viewPhoto = (pid) => {\n    // console.log('DEBUG', mode, series.photos.find(p => p.id === pid))\n    changeMode(MODES.PHOTO_VIEW, pid)\n  }\n\n  let component = null\n\n  switch (mode.current.name) {\n    case MODES.SERIES_VIEW:\n      component = (\n        <SeriesView\n          series={series}\n          onMenuBack={onClose}\n          allowEdit={allowEdit}\n          onSlideshowStart={() => changeMode(MODES.SLIDESHOW)}\n          onCameraAdd={() => changeMode(MODES.NEWPHOTO, null, 'camera')}\n          onLibraryAdd={() => changeMode(MODES.NEWPHOTO, null, 'library')}\n          onEditSeries={() => changeMode(MODES.SERIES_EDIT)}\n          onChange={onChange}\n          onDeletePhotos={onDeletePhotos}\n          onDeleteSeries={onDelete}\n          onTileClick={viewPhoto}\n        />\n      )\n      break\n    case MODES.SERIES_EDIT:\n      component = (\n        <SeriesEdit\n          series={series}\n          allowEdit={allowEdit}\n          onMenuBack={() => changeMode(MODES.SERIES_VIEW)}\n          onChange={onChange}\n          onDeleteSeries={onDelete}\n        />\n      )\n      break\n    case MODES.PHOTO_VIEW:\n      component = (\n        <PhotoViewTool\n          photo={series.photos.find(p => p.id === mode.current.pid)}\n          allowEdit={allowEdit}\n          onMenuBack={lastMode}\n          onUpdatePhoto={onUpdatePhoto}\n        />\n      )\n      break\n    case MODES.PHOTO_VIEW_NEW:\n      component = (\n        <PhotoViewTool\n          photo={series.photos.find(p => p.id === mode.current.pid)}\n          allowEdit={allowEdit}\n          onMenuBack={() => changeMode(MODES.SERIES_VIEW)}\n          newPhoto\n          onUpdatePhoto={onUpdatePhoto}\n        />\n      )\n      break\n    case MODES.SLIDESHOW:\n      component = (\n        <Slideshow photos={series.photos} onCancel={lastMode} />\n      )\n      break\n    case MODES.NEWPHOTO:\n      component = (\n        <NewPhoto\n          inputMethod={mode.current.inputMethod}\n          photos={series ? series.photos : null}\n          onCreate={onCreatePhoto}\n          onCancel={lastMode}\n        />\n      )\n      break\n    case MODES.NEWSERIES:\n      component = (\n        <NewPhoto\n          inputMethod={mode.current.inputMethod}\n          isNewSeries\n          onCreate={onCreateSeries}\n          onCancel={lastMode}\n        />\n      )\n      break\n    default:\n      console.log('REPEATABLEPHOTO: default state. you should NEVER see this', mode)\n      component = null\n  }\n\n  return (\n    <SeriesConfig.Provider value={seriesConfig}>\n      {component}\n    </SeriesConfig.Provider>\n  )\n}\n\nRepeatablePhotos.propTypes = {\n  modeName: PropTypes.oneOf(VALID_STARTMODES),\n  seriesConfig: PropTypes.object.isRequired,\n  inputMethod: PropTypes.oneOf(['camera', 'library']),\n  series: PropTypes.object,\n  allowEdit: PropTypes.bool,\n  // Now some functions to handle actions we might take\n  onChange: PropTypes.func.isRequired,\n  onNewSeries: PropTypes.func.isRequired,\n  onDelete: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired\n}\nRepeatablePhotos.defaultProps = {\n  mode: MODES.SERIES_VIEW,\n  canEdit: false\n}\n\nexport default RepeatablePhotos\n","export default {\n  'meta': {\n    'project': {\n      'type': 'SERIES',\n      'label': 'Project',\n      'default': '926ff265-e22b-400d-ae00-a817d69d5042',\n      render: (key) => `My Project: ${key}`// Some handler for rendering metadata\n    },\n    'reach': {\n      'type': 'SERIES',\n      'label': 'Reach',\n      'default': '4f310e81-e1f8-45e7-9341-859e7f4e2208',\n      render: (key) => `My Project: ${key}`// Some handler for rendering metadata\n    },\n    'user': {\n      'type': 'PHOTO',\n      'label': 'User',\n      'default': 'fa645ddf-9147-4372-934f-f3a219fc81f2',\n      render: (key) => `My Project: ${key}`// Some handler for rendering metadata\n    }\n  },\n  'tags': [\n    {\n      'id': 'structures',\n      'label': 'Structures',\n      'isXY': true,\n      'allowAdditions': false,\n      'values': [\n        {\n          'label': 'Structure-0',\n          'id': '4261a967-c01b-4795-ac04-604821d45074'\n        },\n        {\n          'label': 'Structure-1',\n          'id': '46a19e1a-53d3-4d66-88ba-789d93f33ab7'\n        },\n        {\n          'label': 'Structure-2',\n          'id': '1003b5f0-e874-4e30-86f8-cd6cf0bb341f'\n        },\n        {\n          'label': 'Structure-3',\n          'id': 'fe98b4f1-f3dd-4999-9e0f-ff01f07ab60f'\n        },\n        {\n          'label': 'Structure-4',\n          'id': 'c7385fd3-1c0d-4453-8571-fe09780a07c2'\n        },\n        {\n          'label': 'Structure-5',\n          'id': '5fb4df60-500a-487a-95b9-e785241e7ba9'\n        },\n        {\n          'label': 'Structure-6',\n          'id': 'e97c7c70-6752-4667-9774-b78b7cca817f'\n        },\n        {\n          'label': 'Structure-7',\n          'id': '353654fa-9bd0-4227-b67b-90d5537bd30d'\n        },\n        {\n          'label': 'Structure-8',\n          'id': '885defcb-2c10-4dad-a81a-ae1cf3cfda23'\n        },\n        {\n          'label': 'Structure-9',\n          'id': 'a314653d-ef5e-42dd-be06-8fa89e80698b'\n        },\n        {\n          'label': 'Structure-10',\n          'id': '985da9e9-505e-41c0-99b0-523a39094756'\n        },\n        {\n          'label': 'Structure-11',\n          'id': '9736da92-6276-46a6-af6a-edf7b446b393'\n        }\n      ]\n    },\n    {\n      'id': 'treetypes',\n      'label': 'Tree Types',\n      'isXY': true,\n      'allowAdditions': true,\n      'values': [\n        {\n          'label': 'Elm',\n          'id': 'f5378e05-66dc-440e-b707-1642fb1b2dad'\n        },\n        {\n          'label': 'Birch',\n          'id': 'b6a712ad-eca4-4e7f-8152-97f533e1dc0a'\n        },\n        {\n          'label': 'Palm',\n          'id': '02607266-6281-4e4e-bef1-37780fd3e1c3'\n        },\n        {\n          'label': 'Cottonwood',\n          'id': '56350721-fa07-4e93-bc5c-c68169483aed'\n        },\n        {\n          'label': 'Oak',\n          'id': '4917a009-6dfe-4bbf-9fac-cc4943f75238'\n        }\n      ]\n    },\n    {\n      'id': 'emotions',\n      'label': 'Emotions',\n      'isXY': false,\n      'allowAdditions': true,\n      'values': [\n        {\n          'label': 'Indignation',\n          'id': '6298aa20-c183-4415-bc77-caeed84451d8'\n        },\n        {\n          'label': 'Anger',\n          'id': '18dd2696-7ea7-4e6c-b51c-820ee88fe3d7'\n        },\n        {\n          'label': 'Confusion',\n          'id': '4aa2ee88-5c90-4a86-80f5-f349b9ed2fcb'\n        },\n        {\n          'label': 'Ambivalence',\n          'id': '846b93d0-a5f7-4f00-ae04-c7fbd6100239'\n        },\n        {\n          'label': 'Cautious',\n          'id': '0b5e1de2-e7f1-439a-90fc-d06bb29a93fd'\n        }\n      ]\n    },\n    {\n      'id': 'season',\n      'label': 'Season',\n      'isXY': false,\n      'allowAdditions': false,\n      'values': [\n        {\n          'label': 'Winter',\n          'id': '027d22a5-fd5d-4c89-8273-b6554d313314'\n        },\n        {\n          'label': 'Spring',\n          'id': '06db5fab-f606-446f-b9b7-e1b6e4e2f30f'\n        },\n        {\n          'label': 'Summer',\n          'id': 'e4c2d0f3-223c-462d-bb30-0820244afeb4'\n        },\n        {\n          'label': 'Fall',\n          'id': '8a66256f-a189-4bfa-aefe-5b5bfb4ad69c'\n        }\n      ]\n    }\n  ]\n}\n","import { openDb } from 'idb'\nimport seriesList from './seriesList.json'\n\nconst STORENAME = 'serieslist'\nconst dbPromise = openDb('serieslistDB', 1, upgradeDB => {\n  console.log('UPGRADE NEEDED', upgradeDB)\n  const store = upgradeDB.createObjectStore(STORENAME)\n  console.log('UPGRADE NEEDED STORE', store)\n  seriesList.forEach(async series => {\n    await store.put(series, series.id)\n  })\n}).catch(e => {\n  console.error('ERROR', e)\n})\n\nexport default {\n  async reload () {\n    const db = await dbPromise\n    const tx = db.transaction(STORENAME, 'readwrite')\n\n    seriesList.forEach(async series => {\n      await tx.objectStore(STORENAME).put(series, series.id)\n    })\n  },\n  async get (key) {\n    const db = await dbPromise\n    return db.transaction(STORENAME).objectStore(STORENAME).get(key)\n  },\n  async getAll () {\n    const db = await dbPromise\n    return db.transaction(STORENAME).objectStore(STORENAME).getAll()\n  },\n  async set (key, val) {\n    const db = await dbPromise\n    const tx = db.transaction(STORENAME, 'readwrite')\n    tx.objectStore(STORENAME).put(val, key)\n    return tx.complete\n  },\n  async delete (key) {\n    const db = await dbPromise\n    const tx = db.transaction(STORENAME, 'readwrite')\n    tx.objectStore(STORENAME).delete(key)\n    return tx.complete\n  },\n  async clear () {\n    const db = await dbPromise\n    const tx = db.transaction(STORENAME, 'readwrite')\n    tx.objectStore(STORENAME).clear()\n    return tx.complete\n  },\n  async keys () {\n    const db = await dbPromise\n    return db.transaction(STORENAME).objectStore(STORENAME).getAllKeys()\n  }\n}\n","import React, { useState, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport {\n  CssBaseline,\n  AppBar,\n  Button,\n  IconButton,\n  Toolbar,\n  Typography,\n  Dialog,\n  FormControlLabel,\n  Switch,\n  Divider,\n  DialogTitle,\n  DialogContent,\n  DialogActions\n} from '@material-ui/core'\nimport { withStyles } from '@material-ui/core/styles'\nimport SeriesList from '../views/SeriesList/SeriesList'\nimport RepeatablePhotos from '../RepeatablePhotos'\nimport seriesConfig from './seriesConfig'\n\nimport style from './TestApp.style'\nimport {\n  Info as InfoIcon,\n  Settings as SettingsIcon,\n  PlaylistAdd as PlaylistAddIcon\n  // Refresh as RefreshIcon\n} from '@material-ui/icons'\nimport db from './db'\nimport useNewImageMenu from '../components/controls/useNewImageMenu'\n\nconst TestApp = ({ classes }) => {\n  const [currSeriesList, setSeriesList] = useState([])\n  const [aboutOpen, setAboutOpen] = useState(false)\n  const [allowEdit, setAllowEdit] = useState(true)\n  const [settingsOpen, setSettingsOpen] = useState(false)\n\n  // {SERIES, MODE}\n  const [rpState, setStartState] = useState(null)\n\n  const onChange = (newSeries) => {\n    // console.log('TestApp:: db.put', newSeries)\n    setSeriesList(currSeriesList.map(s => {\n      if (s.id !== newSeries.id) return s\n      else return newSeries\n    }))\n    setStartState({\n      ...rpState,\n      series: newSeries\n    })\n    db.set(newSeries.id, newSeries).then(fetchData)\n  }\n\n  const onDelete = (id) => {\n    db.delete(id).then(fetchData)\n    fetchData()\n    setStartState(null)\n  }\n\n  // Now some functions for the series list\n  const tileClick = (selectedSeries) => setStartState({ series: selectedSeries, modeName: 'series' })\n  const cameraClick = (selectedSeries) => {\n    setStartState({ series: selectedSeries, modeName: 'newphoto', inputMethod: 'camera' })\n  }\n\n  // When you click the library chooser you get this\n  const libraryClick = (selectedSeries) => {\n    // console.log('libraryClick debug', selectedSeries)\n    setStartState({ series: selectedSeries, modeName: 'newphoto', inputMethod: 'library' })\n  }\n\n  const seriesCameraClick = () => {\n    setStartState({ series: null, modeName: 'newseries', inputMethod: 'camera' })\n  }\n\n  // When you click the library chooser you get this\n  const seriesLibraryClick = () => {\n    // console.log('libraryClick debug', selectedSeries)\n    setStartState({ series: null, modeName: 'newseries', inputMethod: 'library' })\n  }\n\n  const { onDownThunk, onUpThunk, onBlock, menu } = useNewImageMenu(\n    seriesCameraClick,\n    seriesLibraryClick\n  )\n\n  const onNewSeries = async (series) => {\n    console.log('TESTApp onNewSeries', series)\n    await db.set(series.id, series)\n    setSeriesList([...currSeriesList, series])\n    setStartState({ series, modeName: 'series' })\n  }\n\n  // This is just for reloading test data in case the users delete it\n  const reloadData = () => {\n    db.reload()\n    fetchData()\n    setSettingsOpen(false)\n  }\n\n  const dumpData = async () => {\n    await db.getAll().then(data => {\n      console.log('DUMP\\n\\n\\n', JSON.stringify(data))\n    })\n  }\n\n  // Can't use async inside a hook so this is a workaround:\n  const fetchData = async () => {\n    await db.getAll().then(setSeriesList)\n  }\n\n  useEffect(() => {\n    fetchData()\n  }, [])\n\n  if (rpState) {\n    return (\n      <RepeatablePhotos\n        allowEdit={allowEdit}\n        seriesConfig={seriesConfig}\n        series={rpState.series}\n        inputMethod={rpState.inputMethod}\n        modeName={rpState.modeName}\n        onChange={onChange}\n        onDelete={onDelete}\n        onNewSeries={onNewSeries}\n        onClose={() => setStartState(null)}\n      />\n    )\n  }\n\n  return (\n    <div className={classes.root}>\n      <CssBaseline />\n      <AppBar position='static' className={classes.appBar}>\n        <Toolbar>\n          <Typography variant='h6' color='inherit' className={classes.grow}>\n           Photos Demo\n          </Typography>\n          <IconButton color='inherit' onClick={() => setSettingsOpen(true)}>\n            <SettingsIcon />\n          </IconButton>\n          <IconButton color='inherit' onClick={() => setAboutOpen(true)}>\n            <InfoIcon />\n          </IconButton>\n        </Toolbar>\n      </AppBar>\n      <div className={classes.inner}>\n        <div className={classes.projMockup}>\n\n          <Typography variant='h5'>My Awesome Project</Typography>\n          <Typography paragraph variant='body1'>\n        Imagine that this page is a project or other item you'd want to attach repeatable photos to\n          </Typography>\n        </div>\n\n        <AppBar position='static' color='default' className={classes.photoBar}>\n          <Toolbar>\n            <Typography variant='subtitle1' color='inherit' className={classes.grow}>\n              Repeatable Photo Series:\n            </Typography>\n            {allowEdit && (\n              <IconButton\n                color='inherit'\n                onClick={onBlock}\n                onMouseDown={onDownThunk()}\n                onMouseUp={onUpThunk()}\n                onTouchStart={onDownThunk()}\n                onTouchEnd={onUpThunk()}\n              >\n                <PlaylistAddIcon />\n              </IconButton>\n            )}\n\n          </Toolbar>\n          {menu}\n        </AppBar>\n        <SeriesList\n          columns={1}\n          allowEdit={allowEdit}\n          seriesList={currSeriesList}\n          tileClick={tileClick}\n          cameraClick={cameraClick}\n          libraryClick={libraryClick}\n        />\n\n        {/*\n\n                SETTINGS DIALOG\n\n        */}\n        <Dialog\n          open={settingsOpen}\n          onClose={() => setSettingsOpen(false)}\n          aria-labelledby='form-dialog-title'\n        >\n          <DialogTitle id='form-dialog-title'>Settings</DialogTitle>\n          <DialogContent>\n\n            <FormControlLabel\n              fullWidth\n              control={\n                <Switch\n                  checked={allowEdit}\n                  onChange={() => setAllowEdit(!allowEdit)}\n                  color='primary'\n                />\n              }\n              labelPlacement='start'\n              label='Allow Edits?'\n            />\n            <Typography paragraph variant='caption'>\n             Turn this off to simulate what a view-only experience is like.\n            </Typography>\n\n            <Button fullWidth variant='contained' color='secondary' className={classes.button} onClick={reloadData}>\n                RELOAD DATA\n            </Button>\n\n            <Typography paragraph variant='caption'>\n              If you have deleted the stock test series click this button to bring them back.\n            </Typography>\n\n            <Button fullWidth variant='contained' color='primary' className={classes.button} onClick={dumpData}>\n                Dump DB to console\n            </Button>\n\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={() => setSettingsOpen(false)} color='primary'>\n              Ok\n            </Button>\n          </DialogActions>\n        </Dialog>\n\n        {/*\n\n                ABOUT DIALOG\n\n        */}\n        <Dialog\n          open={aboutOpen}\n          fullScreen\n          onClose={() => setAboutOpen(false)}\n          aria-labelledby='form-dialog-title'\n        >\n          <DialogTitle id='form-dialog-title'>About</DialogTitle>\n          <DialogContent>\n            <Typography paragraph variant='body1'>\n              This is a proof of concept app showing how repeatable photos can work as a plugin in an\n              existing app\n            </Typography>\n            <Divider />\n            <Typography paragraph variant='subtitle1'>Photo Series</Typography>\n            <Typography paragraph variant='body1'>\n              A Photo series is a set of photos taken from the same geographic position and facing the same direction\n            </Typography>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={() => setAboutOpen(false)} color='primary'>\n              Ok\n            </Button>\n          </DialogActions>\n        </Dialog>\n      </div>\n    </div>\n  )\n}\n\nTestApp.propTypes = {\n  classes: PropTypes.object.isRequired\n}\n\nexport default withStyles(style)(TestApp)\n","export default theme => ({\n  root: {\n    display: 'flex',\n    flexDirection: 'column',\n    background: theme.palette.background.paper,\n    height: '100%'\n  },\n  appBar: {\n    flexGrow: 0\n  },\n  photoBar: {\n\n  },\n  grow: {\n    flexGrow: 1\n  },\n  projMockup: {\n    padding: theme.spacing.unit * 2\n  },\n  inner: {\n    position: 'relative',\n    flexGrow: 1,\n    overflowY: 'scroll',\n    overflowX: 'hidden',\n    '-webkit-overflow-scrolling': 'touch'\n  }\n})\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n)\n\nexport function register (config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href)\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config)\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          )\n        })\n      }\n      else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config)\n      }\n    })\n  }\n}\n\nfunction registerValidSW (swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing\n        if (installingWorker == null) {\n          return\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              )\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration)\n              }\n            }\n            else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.')\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration)\n              }\n            }\n          }\n        }\n      }\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error)\n    })\n}\n\nfunction checkValidServiceWorker (swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type')\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload()\n          })\n        })\n      }\n      else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config)\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      )\n    })\n}\n\nexport function unregister () {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister()\n    })\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport TestApp from './TestApp/TestApp'\nimport * as serviceWorker from './serviceWorker'\nimport './index.css'\nrequire('typeface-roboto')\n\nReactDOM.render(<TestApp />, document.getElementById('root'))\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.register()\n"],"sourceRoot":""}